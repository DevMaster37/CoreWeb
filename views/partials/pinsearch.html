 <div id="page-content" style="min-height:1036px">
                    <!-- Blank Header -->
                    <div class="content-header">
                        <div class="header-section">
                            <h1>
                                <i class="gi gi-barcode"></i>PIN Search<br><small>Get info about the PIN</small>
                            </h1>
                        </div>
                    </div>
                    <ul class="breadcrumb breadcrumb-top">
                        <li>System</li>
                        <li>PIN Search</li>
                    </ul>
                        <!-- Example Block -->
    <div class="block">
        <div class="block-title">
            <h2>PIN Search</h2>
        </div>
        <div class="row" ng-if="PinProperty ==0">
            <div class="col-md-12 col-xs-12">
                <div class="table-options clearfix">
                    
                    <fieldset>
                        <legend>Filtering Options</legend>
                        <form class="form-horizontal">
                            <div class="col-md-6 col-xs-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Date From</label>
                                    <div class="col-md-4">
                                        <p class="input-group">
                                            <input type="text" class="form-control" uib-datepicker-popup="{{format}}"
                                                   ng-model="filter.date_from" is-open="popup1.opened"
                                                   datepicker-options="dateOptions" close-text="Close"
                                                   alt-input-formats="altInputFormats" datetimepicker-neutral-timezone/>
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" ng-click="open1()"><i
                                                        class="glyphicon glyphicon-calendar"></i></button>
                                                
                                            </span>
                                        </p>
                                    </div>
                                    <div class="col-md-6">
                                            <div uib-timepicker ng-model="filter.time_from" hour-step="1" minute-step="5"
                                                 show-meridian="false" show-spinners="false"></div>
    
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Timezone</label>
                                    <div class="col-md-4">
                                        <timezone-selector set-local="true" ng-model="filter.timezone"></timezone-selector>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Caller ID</label>
                                    <div class="col-md-4">
                                        <input class="form-control" ng-model="filter.callerID"
                                               placeholder="Caller ID">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Serial</label>
                                    <div class="col-md-4">
                                        <input class="form-control" ng-model="filter.serial"
                                               placeholder="Serial">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Currency</label>
                                    <div class="col-md-4">
                                        <select class="form-control" ng-model="filter.currency">
                                            <option ng-repeat="currency in currencies | orderBy:'symbol'"
                                                    value="{{currency.symbol}}">{{currency.symbol}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                        <label class="col-md-2 control-label">Pin</label>
                                        <div class="col-md-4">
                                            <input class="form-control" ng-model="filter.pin"
                                                   placeholder="Pin">
                                        </div>
                                </div>
                                <!--
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Type</label>
                                    <div class="col-md-4"><select class="form-control" ng-model="filter.type">
                                        <option value="fixed">Fixed</option>
                                        <option value="flexi">Flexi</option>
                                    </select></div>
                                </div>
                                
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <a ng-if="filtered" class="form-control btn btn-primary"
                                           href="/api/topuplog/topuplog?token={{profile.token}}&filter={{filterBase}}&category=csv">Download
                                            Filtered CSV</a>
                                    </div>
                                </div>
                                !-->
                            </div>
                            
                            <div class="col-md-6 col-xs-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Date To</label>
                                    <div class="col-md-4">
                                        <p class="input-group">
                                            <input type="text" class="form-control" uib-datepicker-popup="{{format}}"
                                                   ng-model="filter.date_to" is-open="popup2.opened"
                                                   datepicker-options="dateOptions" close-text="Close"
                                                   alt-input-formats="altInputFormats" datetimepicker-neutral-timezone/>
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" ng-click="open2()"><i
                                                class="glyphicon glyphicon-calendar"></i></button>
                                            </span>
                                        </p>
                                    </div>
                                    <div class="col-md-6">
                                            <div uib-timepicker ng-model="filter.time_to" hour-step="1" minute-step="5"
                                                 show-meridian="false" show-spinners="false"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                        <label class="col-md-2 control-label">Topup Number</label>
                                        <div class="col-md-4">
                                            <input class="form-control" ng-model="filter.topupnumber"
                                                   placeholder="">
                                        </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Value</label>
                                    <div class="col-md-4">
                                        <input class="form-control" ng-model="filter.value"
                                               placeholder="Value">
                                    </div>
                                </div>
                                <div class="form-group">
                                        <label class="col-md-2 control-label">Used</label>
                                        <div class="col-md-4"><select class="form-control" ng-model="filter.used">
                                            <option value="true">Yes</option>
                                            <option value="false">No</option>
                                        </select></div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Valid</label>
                                    <div class="col-md-4"><select class="form-control" ng-model="filter.valid">
                                        <option value="true">Yes</option>
                                        <option value="false">No</option>
                                    </select></div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <button class="form-control btn btn-primary" ng-click="PinapplyFilter()">
                                            Apply Filter
                                        </button>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <button ng-if="filtered" class="form-control btn btn-primary"
                                                ng-click="clearFilter()">Clear Filter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </fieldset>
                </div>
                <fieldset>
                    <legend>Pin</legend>
                    <div class="table-responsive">
                        <table id="general-table" class="table table-striped table-vcenter">
                            <thead>
                            <tr>
                                <td>Date</td>
                                <td>Caller ID</td>
                                <td>Serial</td>
                                <td>PIN</td>
                                <td>Value</td>
                                <td>Currency</td>
                                <td>Topup Number</td>
                                <td>Type</td>
                                <td>Valid</td>
                                <td>Used</td>
                                <td>Valid From</td>
                                <td>Valid To</td>
                                <td>Actions</td>
                            </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="i in Pins">
                                    <td>{{i.used_date | date : 'MMM d, y HH:mm:ss'}}</td>
                                    <td>{{i.caller_id}}</td>
                                    <td><a href="javascript:void(0)" ng-click="getPinById(i._id)">{{i.serial}}</a></td>
                                    <td>{{i.code}}</td>
                                    <td>{{i.value}}</td>
                                    <td>{{i.currency}}</td>
                                    <td><a href="javascript:void(0)" ng-click="pinRelation(i)">{{i.topupnumber}}</a></td>
                                    <td>{{i.type |translate}}</td>
                                    <td>{{i.valid | translate}}</td>
                                    <td>{{i.used |translate}}</td>
                                    <td>{{i.valid_from | date : 'MMM d, y HH:mm:ss'}}</td>
                                    <td>{{i.valid_to | date : 'MMM d, y HH:mm:ss'}}</td>
                                    <td>
                                        <label class="switch switch-primary">
                                                <input type="checkbox" ng-model="i.valid" ng-change="enabledisablePin(i)" >
                                                <span></span>
                                        </label>
                                    </td>
                                </tr>
                        </tbody>

                        </table>
                    </div>
                    <div class="table-options clearfix">
                        <ul uib-pagination total-items="count" items-per-page="limit" ng-model="page"
                            ng-change="changePage(page)" max-size="10" class="pagination-sm"
                            boundary-link-numbers="true" next-text="{{'nextPage'|translate}}"
                            previous-text="{{'prevPage'|translate}}"></ul>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="row" ng-if="PinProperty == 1">
            <fieldset >
                <legend>Review PIN Information <span class=" pull-right"><a href="javascript:void(0)" ng-click="resetPin();">Start Over</a></span></legend>
                   <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Type</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.type |translate}}</p>
                            
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Sequence #</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.seq}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Value</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.value}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Currency</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.currency}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Allocated To</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{account_names[obj.allocated_to]}}</p>
                        </div>
                        </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Serial</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.serial}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Code</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.code}}</p>
                            
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Valid From</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.valid_from | date : 'MMM d, y HH:mm:ss'}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Valid To</label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.valid_to | date : 'MMM d, y HH:mm:ss'}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Valid ? </label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.valid|translate}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="example-text-input">Used ? </label>
                        <div class="col-md-9">
                            <p class="form-control-static">{{obj.used|translate}}</p>
                        </div>
                    </div>
                    <div class="form-group" ng-if="obj.used">
                            <label class="col-md-3 control-label" for="example-text-input">Used On </label>
                                <div class="col-md-9">
                                    <p class="form-control-static">{{obj.used_date | date : 'MMM d, y HH:mm:ss'}}</p>
                                    
                                </div>
                    </div>
                    <div class="form-group" ng-if="obj.used">
                        <label class="col-md-3 control-label" for="example-text-input">Used Via </label>
                                <div class="col-md-9">
                                    <p class="form-control-static">{{obj.channel | translate}}</p>
                                    
                                </div>
                    </div>
                    <div class="form-group" ng-if="obj.used">
                        <label class="col-md-3 control-label" for="example-text-input">Used For </label>
                                <div class="col-md-9">
                                    <p class="form-control-static">{{obj.topup_destination}}</p>
                                    
                                </div>
                    </div>
                    <div class="form-group" ng-if="obj.used">
                        <label class="col-md-3 control-label" for="example-text-input">Used Amount </label>
                                <div class="col-md-9">
                                    <p class="form-control-static">{{obj.topup_amount}}</p>
                                    
                                </div>
                    </div>
                    <div class="form-group" ng-if="obj.used">
                        <label class="col-md-3 control-label" for="example-text-input">Used Currency </label>
                                <div class="col-md-9">
                                    <p class="form-control-static">{{obj.topup_currency}}</p>
                                    
                                </div>
                    </div>
                    <div class="form-group" ng-if="obj.used">
                        <label class="col-md-3 control-label" for="example-text-input">Used By (CallerID) </label>
                                <div class="col-md-9">
                                    <p class="form-control-static">{{obj.caller_id}}</p>
                                    
                                </div>
                    </div>
                <hr>
               
                    <p>Topup Tries :</p>
                    <table  class="table table-condensed">
        
                        <tr>
                            <td>Date</td>
                            <td>Caller ID</td>
                            <td>Topup Number</td>
                            <td>Successful ?</td>
                            <td>Code</td>
                            <td>Channel</td>
                        </tr>
                        <tr ng-repeat="i in obj.tries">
                            <td>{{i.time | date : 'MMM d, y HH:mm:ss'}}</td>
                            <td>{{i.caller_id}}</td>
                            <td>{{i.topup_number}}</td>
                            <td>{{i.success | translate }}</td>
                            <td>{{i.code}}</td>
                            <td>{{i.channel}}</td>
                        </tr>
                        </table>
            </fieldset>
        </div>
        <div class="row" ng-if="PinProperty == 2">
            <fieldset >
                    <legend>Review PIN Information <span class=" pull-right"><a href="javascript:void(0)" ng-click="resetPin();">Start Over</a></span></legend>
                <p>Topup Logs :</p>
                <div class="table-responsive">
                    <table id="general-table" class="table table-striped table-vcenter">
                                <thead>
                                <tr>
                                    <td>Account</td>
                                    <td>System Reference</td>
                                    <td>Customer Reference</td>
                                    <td>Operator Reference</td>
                                    <td>Vendor SIM</td>
                                    <td>App Host</td>
                                    <td>Time</td>
                                    <td>Target</td>
                                    <td>Product ID</td>
                                    <td>Country</td>
                                    <td>Operator Name</td>
                                    <td>Amount</td>
                                    <td>Currency</td>
                                    <td>Successful ?</td>
                                    <td>Response Code</td>
                                    <!--<td>Response Message</td>-->
                                    <td>Completed In</td>
                                    <td>Channel</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                        <tr ng-repeat="i in topupInfo |filter : namefilter">
                                                <td>{{account_names[i.account]}}</td>
                                                <td>{{i.operator_reference}}</td>
                                                <td>{{i.customer_reference}}</td>
                                                <td>{{i.api_transactionid}}</td>
                                                <td>{{i.vnd_sim}}</td>
                                                <td>{{i.app_host}}</td>
                                                <td>{{i.time | date : 'MMM d, y HH:mm:ss' }}</td>
                                                <td>{{i.target}}</td>
                                                <td>{{i.product_id}}</td>
                                                <td>{{i.country}}</td>
                                                <td>{{i.operator_name}}</td>
                                                <td>{{i.topup_amount | currency : '' : 2}}</td>
                                                <td>
                                                    <div class="currency-flag currency-flag-sm currency-flag-{{i.topup_currency|lowercase}}"></div>
                                                    {{i.topup_currency}}
                                                </td>
                                                <td>{{i.success | translate}}</td>
                                                <td>{{i.code}}</td>
                                                <!--<td>{{i.message}}</td>-->
                                                <td>{{(i.completed_in || 0) / 1000}}s</td>
                                                <td>{{i.channel |translate}}</td>
                                            </tr>
                                </tr>
                                </tbody>
    
                    </table>
                </div>
                <legend></legend>                
                <p>Transactions :</p>
                <div class="table-responsive">
                        <table id="general-table" class="table table-striped table-vcenter">
                            <thead>
                            <tr>
                                <td>Transaction ID</td>
                                <td>Account</td>
                                <td>Time</td>
                                <td>Type</td>
                                <td>Amount</td>
                                <td>Currency</td>
                                <td>Balance After TX</td>
                                <td>Wallet ID</td>
                                <td>Source</td>
                                <td>Description</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="i in transaction |filter : namefilter">
                                <td>{{i._id}}</td>
                                <td>{{account_names[i.account]}}</td>
                                <td>{{i.time | date : 'MMM d, y HH:mm:ss' }}</td>
                                <td ng-if="i.type=='deb'"><span class="text-danger">{{i.type | uppercase}}</span></td>
                                <td ng-if="i.type=='deb'"><span
                                        class="text-danger">-{{i.amount | currency : '' : 2}} </span></td>
                                <td ng-if="i.type=='crd'"><span class="text-success">{{i.type | uppercase}}</span></td>
                                <td ng-if="i.type=='crd'"><span
                                        class="text-success">+{{i.amount | currency : '' : 2}} </span></td>
                                <td>
                                    <div class="currency-flag currency-flag-sm currency-flag-{{i.currency|lowercase}}"></div>
                                    {{i.currency}}
                                </td>
                                <td>{{i.balance_after | currency : '' : 2}}</td>
                                <td>{{i.wallet_id}}</td>
                                <td>{{i.source}}</td>
                                <td ng-if="i.type=='deb'">{{i.description}} paid with {{i.amount | currency : '' : 2}} {{i.currency}}</td>
                                <td ng-if="i.type=='crd'">{{i.description}}</td>
                            </tr>
                            </tbody>

                        </table>
                    </div>
            </fieldset>
        </div>
    </div>

    <footer class="clearfix">
        <div class="pull-left">
            <span id="year-copy"></span> &copy; <a href="http://www.primeairtime.com/" target="_blank">Prime Airtime Ltd</a>
        </div>
    </footer>
    
    <!-- END Example Block -->
             

                    