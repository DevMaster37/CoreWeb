<div id="page-content" style="min-height:1036px">
    <!-- Blank Header -->
    <div class="content-header">
        <div class="header-section">
            <h1>
                <i class="fa fa-brain"></i>Summary Reports<br><small>Daily overview of the system</small>
            </h1>
        </div>
    </div>
    <ul class="breadcrumb breadcrumb-top">
        <li>System</li>
        <li>Summary Reports</li>
    </ul>
        <!-- Example Block -->
<div class="block">
<div class="block-title">
<h2>Reports</h2>
</div>
<div class="row" ng-if="viewSummary">
<div class="col-md-12 col-xs-12">
<div class="table-options clearfix">
    
    <fieldset>
        <legend>Latest Report (Summary Overview) ({{dsum.time | date : short}})</legend>
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Prepaid Wallet Balance</b></h4>
                    <p>NGN {{dsum.prepaidBalTotal  | currency : '' : 2}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Stock Levels at COB</b></h4>
                    <p>NGN {{dsum.stockTotal  | currency : '' : 2}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Sales for the Day</b></h4>
                    <p>NGN {{dsum.salesTotal  | currency : '' : 2}}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Topups Made</b></h4>
                    <p>{{dsum.topupsTotal}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Successful</b></h4>
                    <p>{{dsum.sucCountTotal}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-danger">
                    <h4 class="alert-heading"><b>Failed</b></h4>
                    <p>{{dsum.failCountTotal}}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Fund Transfers</b></h4>
                    <p>Volume : NGN {{dsum.ftTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.ftTotalCount}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Billpay Electricity</b></h4>
                    <p>Volume : NGN {{dsum.bpeTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.bpeTotalCount}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Billpay Television</b></h4>
                    <p>Volume : NGN {{dsum.bpdTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.bpdTotalCount}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Airtime</b></h4>
                    <p>Volume : NGN {{dsum.airTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.airTotalCount }}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>DATA</b></h4>
                    <p>Volume : NGN {{dsum.datTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.datTotalCount}}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <a href="javascript:void(0);" ng-click="detailView(dsum._id)"class="btn btn-primary btn-lg btn-block">View Details</a>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Report History</legend>
        <div class="table-responsive">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <td>Date</td>
                    <td>Prepaid Wallet Balance</td>
                    <td>Stock Levels at COB</td>
                    <td>Sales for the Day</td>
                    <td>Topups Made</td>
                    <td>Successful</td>
                    <td>Failed</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="i in dsumlist">
                    <td ><a href="javascript:void(0);" ng-click="detailView(i._id);" >{{i.time |date : short}}</a></td>
                    <td>{{i.prepaidBalTotal | currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-ngn"></div>
                        NGN</td>
                  
                        <td>{{i.stockTotal | currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-ngn"></div>
                            NGN</td>
                            <td>{{i.salesTotal | currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-ngn"></div>
                                NGN</td>
                               
                    <td>{{i.topupsTotal}}</td>
                    <td>{{i.sucCountTotal}}</td>
                    <td>{{i.failCountTotal}}</td>
                   
                </tr>

                </tbody>

            </table>
        </div>
    </fieldset>
</div>

</div>
</div>
<div class="row" ng-if="viewDetail">
    <fieldset>
        <legend>Latest Report (Summary Overview) ({{dsum.time | date : short}})</legend>
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Prepaid Wallet Balance</b></h4>
                    <p>NGN {{dsum.prepaidBalTotal  | currency : '' : 2}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Stock Levels at COB</b></h4>
                    <p>NGN {{dsum.stockTotal  | currency : '' : 2}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Sales for the Day</b></h4>
                    <p>NGN {{dsum.salesTotal  | currency : '' : 2}}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Topups Made</b></h4>
                    <p>{{dsum.topupsTotal}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Successful</b></h4>
                    <p>{{dsum.sucCountTotal}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-danger">
                    <h4 class="alert-heading"><b>Failed</b></h4>
                    <p>{{dsum.failCountTotal}}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Fund Transfers</b></h4>
                    <p>Volume : NGN {{dsum.ftTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.ftTotalCount}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Billpay Electricity</b></h4>
                    <p>Volume : NGN {{dsum.bpeTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.bpeTotalCount}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Billpay Television</b></h4>
                    <p>Volume : NGN {{dsum.bpdTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.bpdTotalCount}}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>Airtime</b></h4>
                    <p>Volume : NGN {{dsum.airTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.airTotalCount }}</p>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="alert alert-success">
                    <h4 class="alert-heading"><b>DATA</b></h4>
                    <p>Volume : NGN {{dsum.datTotalAmt  | currency : '' : 2}}</p>
                    <p>Count : {{dsum.datTotalCount}}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <a href="javascript:void(0);" ng-click="updateSettingsView()"class="btn btn-primary btn-lg btn-block">Back to Summary View</a>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Account Top-ups made on the day</legend>
        <div class="table-responsive">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <td>Date/Time</td>
                    <td>Account</td>
                    <td>Amount</td>
                    <td>Type</td>
                    <td>Wallet Balance Before</td>
                    <td>Wallet Balance After</td>
                    <td>Made by</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="i in drec.accountTopups" ng-if="drec.accountTopups.length > 0">
                    <td >{{i.time | date : 'MMM d, y HH:mm:ss' }}</td>
                    
                    <td>{{account_names[i.account]}}</td>
                    <td ng-if="i.type=='deb'"><span class="text-danger">-{{i.amount |currency : '' : 2}} </span><div class="currency-flag currency-flag-sm currency-flag-{{i.currency|lowercase}}"></div></td>
                    <td ng-if="i.type=='deb'"><span class="text-danger">{{i.type | uppercase}}</span></td>

                    <td ng-if="i.type=='crd'"><span class="text-success">+{{i.amount |currency : '' : 2}} </span><div class="currency-flag currency-flag-sm currency-flag-{{i.currency|lowercase}}"></div></td>
                    <td ng-if="i.type=='crd'"><span class="text-success">{{i.type | uppercase}}</span></td>
                    
                    <td>{{i.balance_before |currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-{{i.currency|lowercase}}"></div></td>
                    <td>{{i.balance_after |currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-{{i.currency|lowercase}}"></div></td>
                    
                    <td>{{i.topup_by}}</td>
                   
                </tr>
                <tr ng-if="drec.accountTopups.length == 0">
                    <td colspan="7">No Transactions Made on the day</td>
                </tr>

                </tbody>

            </table>
        </div>
    </fieldset>
    <fieldset>
        <legend>Sales Reports</legend>
        <div class="table-responsive">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <td>Account</td>
                    <td>Paid Amount</td>
                    <td>Topup Amount</td>
                    <td>Topup Count</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="i in drec.sales">
                    <td >{{i.account_name}}</td>
                    <td>{{i.sumSA | currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-ngn"></div>
                        NGN</td>
                  
                        <td>{{i.sumTA | currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-ngn"></div>
                            NGN</td>
                    <td>{{i.cnt}}</td>
                   
                </tr>

                </tbody>

            </table>
        </div>
    </fieldset>
    <fieldset>
        <legend>Stock Level Details</legend>
        <div class="table-responsive">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <td>Code</td>
                    <td>Subcode</td>
                    <td>Tag</td>
                    <td>Balance</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="i in drec.stockLevels">
                    <td >{{i.code}}</td>
                    <td>{{i.subcode}}</td>
                    <td>{{i.tag}}</td>
                    <td>{{i.balance | currency : '' : 2}} <div class="currency-flag currency-flag-sm currency-flag-{{i.currency|lowercase}}"></div>
                        {{i.currency}}</td>
                   
                </tr>

                </tbody>

            </table>
        </div>
    </fieldset>
    <fieldset>
        <legend>Mismatch or Leakage Detection</legend>
        <div class="table-responsive">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <td>Code</td>
                    <td>Count</td>
                    <td>Amount</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="i in drec.mismatchTable">
                    <td ng-if="((i.count == 0) && (i.amount == 0))"><span class="text-success">{{i.code}}</span></td>
                    <td ng-if="((i.count == 0) && (i.amount == 0))"><span class="text-success">{{i.count}}</span></td>
                    <td ng-if="((i.count == 0) && (i.amount == 0))"><span class="text-success">{{i.amount}}</span></td>
                    <td ng-if="((i.count > 0) || (i.amount > 0))"><span class="alert-danger">{{i.code}}</span></td>
                    <td ng-if="((i.count > 0) || (i.amount > 0))"><span class="alert-danger">{{i.count}}</span></td>
                    <td ng-if="((i.count > 0) || (i.amount> 0))"><span class="alert-danger">{{i.amount}}</span></td>
                   
                </tr>

                </tbody>

            </table>
        </div>
    </fieldset>
    <fieldset>
        <legend>Stuck Transactions</legend>
        <div class="table-responsive">
            <table id="general-table" class="table table-striped table-vcenter">
                <thead>
                <tr>
                    <td>Date/Time</td>
                    <td>Country</td>
                    <td>Operator</td>
                    <td>Product ID</td>
                    <td>Type</td>
                    <td>TXKEY</td>
                    <td>App Host</td>
                    <td>Toup Amount</td>
                    <td>Topup Currency</td>
                    <td>Target</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="i in drec.stuckTransactions">
                    <td >{{i.time | date : 'MMM d, y HH:mm:ss' }}</td>
                    <td>{{i.country}}</td>
                    <td>{{i.operator_name}}</td>
                    <td>{{i.product_id}}</td>
                    <td>{{i.type |translate}}</td>
                    <td>{{i.txkey}}</td>
                    <td>{{i.app_host}}</td>
                    <td>{{i.topup_amount | currency : '' : 2}}</td>
                    <td>{{i.topup_currency}}</td>
                    <td>{{i.target}}</td>
                   
                </tr>

                </tbody>

            </table>
        </div>
    </fieldset>
</div>


</div>

<footer class="clearfix">
<div class="pull-left">
<span id="year-copy"></span> &copy; <a href="http://www.primeairtime.com/" target="_blank">Prime Airtime Ltd</a>
</div>
</footer>

<!-- END Example Block -->


    