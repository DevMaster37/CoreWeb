function ProductType(e){this.value=e,this.label=ProductType.TYPE_STRINGS[e]}function Product(e){Object.assign(this,e),this.type=new ProductType(this.type)}function AccountPaidTransFilter(e,t){this.transFlag=e,this.criteria=t}function AccountTopupTransFilter(e,t){this.transFlag=e,this.criteria=t}function CountryPaidTransFilter(e,t){this.transFlag=e,this.criteria=t}function CountryTopupTransFilter(e,t){this.transFlag=e,this.criteria=t}ProductType.TYPE_STRINGS={topup:"Airtime",pin:"PIN",data:"DATA",billpay:"BillPay",ft:"Fund Transfer",other:"Other",sms:"SMS"},AccountPaidTransFilter.prototype.filter=function(e){var t=this;return"country"==this.transFlag?e.top10_accounts_paid.filter(function(e){return e.country===t.criteria}):"destination"==this.transFlag?e.top10_accounts_paid.filter(function(e){return e.country+"-"+e.operator_name===t.criteria}):"provider"==this.transFlag?e.top10_accounts_paid.filter(function(e){return e.tag===t.criteria}):"producttype"==this.transFlag?e.top10_accounts_paid.filter(function(e){return e.type===t.criteria}):"agent"==this.transFlag?e.top10_accounts_paid.filter(function(e){return e._id===t.criteria}):t.criteria?e.top10_accounts_paid.filter(function(e){return-1!=t.criteria.indexOf(e._id)}):e.top10_accounts_paid},AccountTopupTransFilter.prototype.filter=function(e){var t=this;return"country"==this.transFlag?e.top10_accounts_topup.filter(function(e){return e.country===t.criteria}):"destination"==this.transFlag?e.top10_accounts_topup.filter(function(e){return e.country+"-"+e.operator_name===t.criteria}):"provider"==this.transFlag?e.top10_accounts_topup.filter(function(e){return e.tag===t.criteria}):"producttype"==this.transFlag?e.top10_accounts_topup.filter(function(e){return e.type===t.criteria}):"agent"==this.transFlag?e.top10_accounts_topup.filter(function(e){return e._id===t.criteria}):t.criteria?e.top10_accounts_topup.filter(function(e){return-1!=t.criteria.indexOf(e._id)}):e.top10_accounts_topup},CountryPaidTransFilter.prototype.filter=function(e){var t=this;return"country"==this.transFlag?e.top10_countries_paid.filter(function(e){return e.country===t.criteria}):"destination"==this.transFlag?e.top10_countries_paid.filter(function(e){return e.country+"-"+e.operator_name===t.criteria}):"provider"==this.transFlag?e.top10_countries_paid.filter(function(e){return e.tag===t.criteria}):"producttype"==this.transFlag?e.top10_countries_paid.filter(function(e){return e.type===t.criteria}):e.top10_countries_paid},CountryTopupTransFilter.prototype.filter=function(e){var t=this;return"country"==this.transFlag?e.top10_countries_topup.filter(function(e){return e.country===t.criteria}):"destination"==this.transFlag?e.top10_countries_topup.filter(function(e){return e.country+"-"+e.operator_name===t.criteria}):"provider"==this.transFlag?e.top10_countries_topup.filter(function(e){return e.tag===t.criteria}):"producttype"==this.transFlag?e.top10_countries_topup.filter(function(e){return e.type===t.criteria}):e.top10_countries_topup},angular.module("angular-timezone-selector",[]).constant("_",_).constant("moment",moment).factory("timezoneFactory",["_","moment",function(e,n){return{get:function(){var a={};return e.forEach(n.tz.names(),function(e){var t=n.tz(e);a[e]={id:e,name:e.replace(/_/g," "),offset:"UTC"+t.format("Z"),nOffset:t.utcOffset()}}),a}}}]).factory("zoneToCC",["_",function(e){var t={};return e.forEach([{id:"1",cca2:"AD",name:"Europe/Andorra"},{id:"2",cca2:"AE",name:"Asia/Dubai"},{id:"3",cca2:"AF",name:"Asia/Kabul"},{id:"4",cca2:"AG",name:"America/Antigua"},{id:"5",cca2:"AI",name:"America/Anguilla"},{id:"6",cca2:"AL",name:"Europe/Tirane"},{id:"7",cca2:"AM",name:"Asia/Yerevan"},{id:"8",cca2:"AO",name:"Africa/Luanda"},{id:"9",cca2:"AQ",name:"Antarctica/McMurdo"},{id:"10",cca2:"AQ",name:"Antarctica/Rothera"},{id:"11",cca2:"AQ",name:"Antarctica/Palmer"},{id:"12",cca2:"AQ",name:"Antarctica/Mawson"},{id:"13",cca2:"AQ",name:"Antarctica/Davis"},{id:"14",cca2:"AQ",name:"Antarctica/Casey"},{id:"15",cca2:"AQ",name:"Antarctica/Vostok"},{id:"16",cca2:"AQ",name:"Antarctica/DumontDUrville"},{id:"17",cca2:"AQ",name:"Antarctica/Syowa"},{id:"18",cca2:"AQ",name:"Antarctica/Troll"},{id:"19",cca2:"AR",name:"America/Argentina/Buenos_Aires"},{id:"20",cca2:"AR",name:"America/Argentina/Cordoba"},{id:"21",cca2:"AR",name:"America/Argentina/Salta"},{id:"22",cca2:"AR",name:"America/Argentina/Jujuy"},{id:"23",cca2:"AR",name:"America/Argentina/Tucuman"},{id:"24",cca2:"AR",name:"America/Argentina/Catamarca"},{id:"25",cca2:"AR",name:"America/Argentina/La_Rioja"},{id:"26",cca2:"AR",name:"America/Argentina/San_Juan"},{id:"27",cca2:"AR",name:"America/Argentina/Mendoza"},{id:"28",cca2:"AR",name:"America/Argentina/San_Luis"},{id:"29",cca2:"AR",name:"America/Argentina/Rio_Gallegos"},{id:"30",cca2:"AR",name:"America/Argentina/Ushuaia"},{id:"31",cca2:"AS",name:"Pacific/Pago_Pago"},{id:"32",cca2:"AT",name:"Europe/Vienna"},{id:"33",cca2:"AU",name:"Australia/Lord_Howe"},{id:"34",cca2:"AU",name:"Antarctica/Macquarie"},{id:"35",cca2:"AU",name:"Australia/Hobart"},{id:"36",cca2:"AU",name:"Australia/Currie"},{id:"37",cca2:"AU",name:"Australia/Melbourne"},{id:"38",cca2:"AU",name:"Australia/Sydney"},{id:"39",cca2:"AU",name:"Australia/Broken_Hill"},{id:"40",cca2:"AU",name:"Australia/Brisbane"},{id:"41",cca2:"AU",name:"Australia/Lindeman"},{id:"42",cca2:"AU",name:"Australia/Adelaide"},{id:"43",cca2:"AU",name:"Australia/Darwin"},{id:"44",cca2:"AU",name:"Australia/Perth"},{id:"45",cca2:"AU",name:"Australia/Eucla"},{id:"46",cca2:"AW",name:"America/Aruba"},{id:"47",cca2:"AX",name:"Europe/Mariehamn"},{id:"48",cca2:"AZ",name:"Asia/Baku"},{id:"49",cca2:"BA",name:"Europe/Sarajevo"},{id:"50",cca2:"BB",name:"America/Barbados"},{id:"51",cca2:"BD",name:"Asia/Dhaka"},{id:"52",cca2:"BE",name:"Europe/Brussels"},{id:"53",cca2:"BF",name:"Africa/Ouagadougou"},{id:"54",cca2:"BG",name:"Europe/Sofia"},{id:"55",cca2:"BH",name:"Asia/Bahrain"},{id:"56",cca2:"BI",name:"Africa/Bujumbura"},{id:"57",cca2:"BJ",name:"Africa/Porto-Novo"},{id:"58",cca2:"BL",name:"America/St_Barthelemy"},{id:"59",cca2:"BM",name:"Atlantic/Bermuda"},{id:"60",cca2:"BN",name:"Asia/Brunei"},{id:"61",cca2:"BO",name:"America/La_Paz"},{id:"62",cca2:"BQ",name:"America/Kralendijk"},{id:"63",cca2:"BR",name:"America/Noronha"},{id:"64",cca2:"BR",name:"America/Belem"},{id:"65",cca2:"BR",name:"America/Fortaleza"},{id:"66",cca2:"BR",name:"America/Recife"},{id:"67",cca2:"BR",name:"America/Araguaina"},{id:"68",cca2:"BR",name:"America/Maceio"},{id:"69",cca2:"BR",name:"America/Bahia"},{id:"70",cca2:"BR",name:"America/Sao_Paulo"},{id:"71",cca2:"BR",name:"America/Campo_Grande"},{id:"72",cca2:"BR",name:"America/Cuiaba"},{id:"73",cca2:"BR",name:"America/Santarem"},{id:"74",cca2:"BR",name:"America/Porto_Velho"},{id:"75",cca2:"BR",name:"America/Boa_Vista"},{id:"76",cca2:"BR",name:"America/Manaus"},{id:"77",cca2:"BR",name:"America/Eirunepe"},{id:"78",cca2:"BR",name:"America/Rio_Branco"},{id:"79",cca2:"BS",name:"America/Nassau"},{id:"80",cca2:"BT",name:"Asia/Thimphu"},{id:"81",cca2:"BW",name:"Africa/Gaborone"},{id:"82",cca2:"BY",name:"Europe/Minsk"},{id:"83",cca2:"BZ",name:"America/Belize"},{id:"84",cca2:"CA",name:"America/St_Johns"},{id:"85",cca2:"CA",name:"America/Halifax"},{id:"86",cca2:"CA",name:"America/Glace_Bay"},{id:"87",cca2:"CA",name:"America/Moncton"},{id:"88",cca2:"CA",name:"America/Goose_Bay"},{id:"89",cca2:"CA",name:"America/Blanc-Sablon"},{id:"90",cca2:"CA",name:"America/Toronto"},{id:"91",cca2:"CA",name:"America/Nipigon"},{id:"92",cca2:"CA",name:"America/Thunder_Bay"},{id:"93",cca2:"CA",name:"America/Iqaluit"},{id:"94",cca2:"CA",name:"America/Pangnirtung"},{id:"95",cca2:"CA",name:"America/Resolute"},{id:"96",cca2:"CA",name:"America/Atikokan"},{id:"97",cca2:"CA",name:"America/Rankin_Inlet"},{id:"98",cca2:"CA",name:"America/Winnipeg"},{id:"99",cca2:"CA",name:"America/Rainy_River"},{id:"100",cca2:"CA",name:"America/Regina"},{id:"101",cca2:"CA",name:"America/Swift_Current"},{id:"102",cca2:"CA",name:"America/Edmonton"},{id:"103",cca2:"CA",name:"America/Cambridge_Bay"},{id:"104",cca2:"CA",name:"America/Yellowknife"},{id:"105",cca2:"CA",name:"America/Inuvik"},{id:"106",cca2:"CA",name:"America/Creston"},{id:"107",cca2:"CA",name:"America/Dawson_Creek"},{id:"108",cca2:"CA",name:"America/Vancouver"},{id:"109",cca2:"CA",name:"America/Whitehorse"},{id:"110",cca2:"CA",name:"America/Dawson"},{id:"111",cca2:"CC",name:"Indian/Cocos"},{id:"112",cca2:"CD",name:"Africa/Kinshasa"},{id:"113",cca2:"CD",name:"Africa/Lubumbashi"},{id:"114",cca2:"CF",name:"Africa/Bangui"},{id:"115",cca2:"CG",name:"Africa/Brazzaville"},{id:"116",cca2:"CH",name:"Europe/Zurich"},{id:"117",cca2:"CI",name:"Africa/Abidjan"},{id:"118",cca2:"CK",name:"Pacific/Rarotonga"},{id:"119",cca2:"CL",name:"America/Santiago"},{id:"120",cca2:"CL",name:"Pacific/Easter"},{id:"121",cca2:"CM",name:"Africa/Douala"},{id:"122",cca2:"CN",name:"Asia/Shanghai"},{id:"123",cca2:"CN",name:"Asia/Harbin"},{id:"124",cca2:"CN",name:"Asia/Chongqing"},{id:"125",cca2:"CN",name:"Asia/Urumqi"},{id:"126",cca2:"CN",name:"Asia/Kashgar"},{id:"127",cca2:"CO",name:"America/Bogota"},{id:"128",cca2:"CR",name:"America/Costa_Rica"},{id:"129",cca2:"CU",name:"America/Havana"},{id:"130",cca2:"CV",name:"Atlantic/Cape_Verde"},{id:"131",cca2:"CW",name:"America/Curacao"},{id:"132",cca2:"CX",name:"Indian/Christmas"},{id:"133",cca2:"CY",name:"Asia/Nicosia"},{id:"134",cca2:"CZ",name:"Europe/Prague"},{id:"135",cca2:"DE",name:"Europe/Berlin"},{id:"136",cca2:"DE",name:"Europe/Busingen"},{id:"137",cca2:"DJ",name:"Africa/Djibouti"},{id:"138",cca2:"DK",name:"Europe/Copenhagen"},{id:"139",cca2:"DM",name:"America/Dominica"},{id:"140",cca2:"DO",name:"America/Santo_Domingo"},{id:"141",cca2:"DZ",name:"Africa/Algiers"},{id:"142",cca2:"EC",name:"America/Guayaquil"},{id:"143",cca2:"EC",name:"Pacific/Galapagos"},{id:"144",cca2:"EE",name:"Europe/Tallinn"},{id:"145",cca2:"EG",name:"Africa/Cairo"},{id:"146",cca2:"EH",name:"Africa/El_Aaiun"},{id:"147",cca2:"ER",name:"Africa/Asmara"},{id:"148",cca2:"ES",name:"Europe/Madrid"},{id:"149",cca2:"ES",name:"Africa/Ceuta"},{id:"150",cca2:"ES",name:"Atlantic/Canary"},{id:"151",cca2:"ET",name:"Africa/Addis_Ababa"},{id:"152",cca2:"FI",name:"Europe/Helsinki"},{id:"153",cca2:"FJ",name:"Pacific/Fiji"},{id:"154",cca2:"FK",name:"Atlantic/Stanley"},{id:"155",cca2:"FM",name:"Pacific/Chuuk"},{id:"156",cca2:"FM",name:"Pacific/Pohnpei"},{id:"157",cca2:"FM",name:"Pacific/Kosrae"},{id:"158",cca2:"FO",name:"Atlantic/Faroe"},{id:"159",cca2:"FR",name:"Europe/Paris"},{id:"160",cca2:"GA",name:"Africa/Libreville"},{id:"161",cca2:"GB",name:"Europe/London"},{id:"162",cca2:"GD",name:"America/Grenada"},{id:"163",cca2:"GE",name:"Asia/Tbilisi"},{id:"164",cca2:"GF",name:"America/Cayenne"},{id:"165",cca2:"GG",name:"Europe/Guernsey"},{id:"166",cca2:"GH",name:"Africa/Accra"},{id:"167",cca2:"GI",name:"Europe/Gibraltar"},{id:"168",cca2:"GL",name:"America/Godthab"},{id:"169",cca2:"GL",name:"America/Danmarkshavn"},{id:"170",cca2:"GL",name:"America/Scoresbysund"},{id:"171",cca2:"GL",name:"America/Thule"},{id:"172",cca2:"GM",name:"Africa/Banjul"},{id:"173",cca2:"GN",name:"Africa/Conakry"},{id:"174",cca2:"GP",name:"America/Guadeloupe"},{id:"175",cca2:"GQ",name:"Africa/Malabo"},{id:"176",cca2:"GR",name:"Europe/Athens"},{id:"177",cca2:"GS",name:"Atlantic/South_Georgia"},{id:"178",cca2:"GT",name:"America/Guatemala"},{id:"179",cca2:"GU",name:"Pacific/Guam"},{id:"180",cca2:"GW",name:"Africa/Bissau"},{id:"181",cca2:"GY",name:"America/Guyana"},{id:"182",cca2:"HK",name:"Asia/Hong_Kong"},{id:"183",cca2:"HN",name:"America/Tegucigalpa"},{id:"184",cca2:"HR",name:"Europe/Zagreb"},{id:"185",cca2:"HT",name:"America/Port-au-Prince"},{id:"186",cca2:"HU",name:"Europe/Budapest"},{id:"187",cca2:"ID",name:"Asia/Jakarta"},{id:"188",cca2:"ID",name:"Asia/Pontianak"},{id:"189",cca2:"ID",name:"Asia/Makassar"},{id:"190",cca2:"ID",name:"Asia/Jayapura"},{id:"191",cca2:"IE",name:"Europe/Dublin"},{id:"192",cca2:"IL",name:"Asia/Jerusalem"},{id:"193",cca2:"IM",name:"Europe/Isle_of_Man"},{id:"194",cca2:"IN",name:"Asia/Kolkata"},{id:"195",cca2:"IO",name:"Indian/Chagos"},{id:"196",cca2:"IQ",name:"Asia/Baghdad"},{id:"197",cca2:"IR",name:"Asia/Tehran"},{id:"198",cca2:"IS",name:"Atlantic/Reykjavik"},{id:"199",cca2:"IT",name:"Europe/Rome"},{id:"200",cca2:"JE",name:"Europe/Jersey"},{id:"201",cca2:"JM",name:"America/Jamaica"},{id:"202",cca2:"JO",name:"Asia/Amman"},{id:"203",cca2:"JP",name:"Asia/Tokyo"},{id:"204",cca2:"KE",name:"Africa/Nairobi"},{id:"205",cca2:"KG",name:"Asia/Bishkek"},{id:"206",cca2:"KH",name:"Asia/Phnom_Penh"},{id:"207",cca2:"KI",name:"Pacific/Tarawa"},{id:"208",cca2:"KI",name:"Pacific/Enderbury"},{id:"209",cca2:"KI",name:"Pacific/Kiritimati"},{id:"210",cca2:"KM",name:"Indian/Comoro"},{id:"211",cca2:"KN",name:"America/St_Kitts"},{id:"212",cca2:"KP",name:"Asia/Pyongyang"},{id:"213",cca2:"KR",name:"Asia/Seoul"},{id:"214",cca2:"KW",name:"Asia/Kuwait"},{id:"215",cca2:"KY",name:"America/Cayman"},{id:"216",cca2:"KZ",name:"Asia/Almaty"},{id:"217",cca2:"KZ",name:"Asia/Qyzylorda"},{id:"218",cca2:"KZ",name:"Asia/Aqtobe"},{id:"219",cca2:"KZ",name:"Asia/Aqtau"},{id:"220",cca2:"KZ",name:"Asia/Oral"},{id:"221",cca2:"LA",name:"Asia/Vientiane"},{id:"222",cca2:"LB",name:"Asia/Beirut"},{id:"223",cca2:"LC",name:"America/St_Lucia"},{id:"224",cca2:"LI",name:"Europe/Vaduz"},{id:"225",cca2:"LK",name:"Asia/Colombo"},{id:"226",cca2:"LR",name:"Africa/Monrovia"},{id:"227",cca2:"LS",name:"Africa/Maseru"},{id:"228",cca2:"LT",name:"Europe/Vilnius"},{id:"229",cca2:"LU",name:"Europe/Luxembourg"},{id:"230",cca2:"LV",name:"Europe/Riga"},{id:"231",cca2:"LY",name:"Africa/Tripoli"},{id:"232",cca2:"MA",name:"Africa/Casablanca"},{id:"233",cca2:"MC",name:"Europe/Monaco"},{id:"234",cca2:"MD",name:"Europe/Chisinau"},{id:"235",cca2:"ME",name:"Europe/Podgorica"},{id:"236",cca2:"MF",name:"America/Marigot"},{id:"237",cca2:"MG",name:"Indian/Antananarivo"},{id:"238",cca2:"MH",name:"Pacific/Majuro"},{id:"239",cca2:"MH",name:"Pacific/Kwajalein"},{id:"240",cca2:"MK",name:"Europe/Skopje"},{id:"241",cca2:"ML",name:"Africa/Bamako"},{id:"242",cca2:"MM",name:"Asia/Rangoon"},{id:"243",cca2:"MN",name:"Asia/Ulaanbaatar"},{id:"244",cca2:"MN",name:"Asia/Hovd"},{id:"245",cca2:"MN",name:"Asia/Choibalsan"},{id:"246",cca2:"MO",name:"Asia/Macau"},{id:"247",cca2:"MP",name:"Pacific/Saipan"},{id:"248",cca2:"MQ",name:"America/Martinique"},{id:"249",cca2:"MR",name:"Africa/Nouakchott"},{id:"250",cca2:"MS",name:"America/Montserrat"},{id:"251",cca2:"MT",name:"Europe/Malta"},{id:"252",cca2:"MU",name:"Indian/Mauritius"},{id:"253",cca2:"MV",name:"Indian/Maldives"},{id:"254",cca2:"MW",name:"Africa/Blantyre"},{id:"255",cca2:"MX",name:"America/Mexico_City"},{id:"256",cca2:"MX",name:"America/Cancun"},{id:"257",cca2:"MX",name:"America/Merida"},{id:"258",cca2:"MX",name:"America/Monterrey"},{id:"259",cca2:"MX",name:"America/Matamoros"},{id:"260",cca2:"MX",name:"America/Mazatlan"},{id:"261",cca2:"MX",name:"America/Chihuahua"},{id:"262",cca2:"MX",name:"America/Ojinaga"},{id:"263",cca2:"MX",name:"America/Hermosillo"},{id:"264",cca2:"MX",name:"America/Tijuana"},{id:"265",cca2:"MX",name:"America/Santa_Isabel"},{id:"266",cca2:"MX",name:"America/Bahia_Banderas"},{id:"267",cca2:"MY",name:"Asia/Kuala_Lumpur"},{id:"268",cca2:"MY",name:"Asia/Kuching"},{id:"269",cca2:"MZ",name:"Africa/Maputo"},{id:"270",cca2:"NA",name:"Africa/Windhoek"},{id:"271",cca2:"NC",name:"Pacific/Noumea"},{id:"272",cca2:"NE",name:"Africa/Niamey"},{id:"273",cca2:"NF",name:"Pacific/Norfolk"},{id:"274",cca2:"NG",name:"Africa/Lagos"},{id:"275",cca2:"NI",name:"America/Managua"},{id:"276",cca2:"NL",name:"Europe/Amsterdam"},{id:"277",cca2:"NO",name:"Europe/Oslo"},{id:"278",cca2:"NP",name:"Asia/Kathmandu"},{id:"279",cca2:"NR",name:"Pacific/Nauru"},{id:"280",cca2:"NU",name:"Pacific/Niue"},{id:"281",cca2:"NZ",name:"Pacific/Auckland"},{id:"282",cca2:"NZ",name:"Pacific/Chatham"},{id:"283",cca2:"OM",name:"Asia/Muscat"},{id:"284",cca2:"PA",name:"America/Panama"},{id:"285",cca2:"PE",name:"America/Lima"},{id:"286",cca2:"PF",name:"Pacific/Tahiti"},{id:"287",cca2:"PF",name:"Pacific/Marquesas"},{id:"288",cca2:"PF",name:"Pacific/Gambier"},{id:"289",cca2:"PG",name:"Pacific/Port_Moresby"},{id:"290",cca2:"PH",name:"Asia/Manila"},{id:"291",cca2:"PK",name:"Asia/Karachi"},{id:"292",cca2:"PL",name:"Europe/Warsaw"},{id:"293",cca2:"PM",name:"America/Miquelon"},{id:"294",cca2:"PN",name:"Pacific/Pitcairn"},{id:"295",cca2:"PR",name:"America/Puerto_Rico"},{id:"296",cca2:"PS",name:"Asia/Gaza"},{id:"297",cca2:"PS",name:"Asia/Hebron"},{id:"298",cca2:"PT",name:"Europe/Lisbon"},{id:"299",cca2:"PT",name:"Atlantic/Madeira"},{id:"300",cca2:"PT",name:"Atlantic/Azores"},{id:"301",cca2:"PW",name:"Pacific/Palau"},{id:"302",cca2:"PY",name:"America/Asuncion"},{id:"303",cca2:"QA",name:"Asia/Qatar"},{id:"304",cca2:"RE",name:"Indian/Reunion"},{id:"305",cca2:"RO",name:"Europe/Bucharest"},{id:"306",cca2:"RS",name:"Europe/Belgrade"},{id:"307",cca2:"RU",name:"Europe/Kaliningrad"},{id:"308",cca2:"RU",name:"Europe/Moscow"},{id:"309",cca2:"RU",name:"Europe/Volgograd"},{id:"310",cca2:"RU",name:"Europe/Samara"},{id:"311",cca2:"RU",name:"Europe/Simferopol"},{id:"312",cca2:"RU",name:"Asia/Yekaterinburg"},{id:"313",cca2:"RU",name:"Asia/Omsk"},{id:"314",cca2:"RU",name:"Asia/Novosibirsk"},{id:"315",cca2:"RU",name:"Asia/Novokuznetsk"},{id:"316",cca2:"RU",name:"Asia/Krasnoyarsk"},{id:"317",cca2:"RU",name:"Asia/Irkutsk"},{id:"318",cca2:"RU",name:"Asia/Yakutsk"},{id:"319",cca2:"RU",name:"Asia/Khandyga"},{id:"320",cca2:"RU",name:"Asia/Vladivostok"},{id:"321",cca2:"RU",name:"Asia/Sakhalin"},{id:"322",cca2:"RU",name:"Asia/Ust-Nera"},{id:"323",cca2:"RU",name:"Asia/Magadan"},{id:"324",cca2:"RU",name:"Asia/Kamchatka"},{id:"325",cca2:"RU",name:"Asia/Anadyr"},{id:"326",cca2:"RW",name:"Africa/Kigali"},{id:"327",cca2:"SA",name:"Asia/Riyadh"},{id:"328",cca2:"SB",name:"Pacific/Guadalcanal"},{id:"329",cca2:"SC",name:"Indian/Mahe"},{id:"330",cca2:"SD",name:"Africa/Khartoum"},{id:"331",cca2:"SE",name:"Europe/Stockholm"},{id:"332",cca2:"SG",name:"Asia/Singapore"},{id:"333",cca2:"SH",name:"Atlantic/St_Helena"},{id:"334",cca2:"SI",name:"Europe/Ljubljana"},{id:"335",cca2:"SJ",name:"Arctic/Longyearbyen"},{id:"336",cca2:"SK",name:"Europe/Bratislava"},{id:"337",cca2:"SL",name:"Africa/Freetown"},{id:"338",cca2:"SM",name:"Europe/San_Marino"},{id:"339",cca2:"SN",name:"Africa/Dakar"},{id:"340",cca2:"SO",name:"Africa/Mogadishu"},{id:"341",cca2:"SR",name:"America/Paramaribo"},{id:"342",cca2:"SS",name:"Africa/Juba"},{id:"343",cca2:"ST",name:"Africa/Sao_Tome"},{id:"344",cca2:"SV",name:"America/El_Salvador"},{id:"345",cca2:"SX",name:"America/Lower_Princes"},{id:"346",cca2:"SY",name:"Asia/Damascus"},{id:"347",cca2:"SZ",name:"Africa/Mbabane"},{id:"348",cca2:"TC",name:"America/Grand_Turk"},{id:"349",cca2:"TD",name:"Africa/Ndjamena"},{id:"350",cca2:"TF",name:"Indian/Kerguelen"},{id:"351",cca2:"TG",name:"Africa/Lome"},{id:"352",cca2:"TH",name:"Asia/Bangkok"},{id:"353",cca2:"TJ",name:"Asia/Dushanbe"},{id:"354",cca2:"TK",name:"Pacific/Fakaofo"},{id:"355",cca2:"TL",name:"Asia/Dili"},{id:"356",cca2:"TM",name:"Asia/Ashgabat"},{id:"357",cca2:"TN",name:"Africa/Tunis"},{id:"358",cca2:"TO",name:"Pacific/Tongatapu"},{id:"359",cca2:"TR",name:"Europe/Istanbul"},{id:"360",cca2:"TT",name:"America/Port_of_Spain"},{id:"361",cca2:"TV",name:"Pacific/Funafuti"},{id:"362",cca2:"TW",name:"Asia/Taipei"},{id:"363",cca2:"TZ",name:"Africa/Dar_es_Salaam"},{id:"364",cca2:"UA",name:"Europe/Kiev"},{id:"365",cca2:"UA",name:"Europe/Uzhgorod"},{id:"366",cca2:"UA",name:"Europe/Zaporozhye"},{id:"367",cca2:"UG",name:"Africa/Kampala"},{id:"368",cca2:"UM",name:"Pacific/Johnston"},{id:"369",cca2:"UM",name:"Pacific/Midway"},{id:"370",cca2:"UM",name:"Pacific/Wake"},{id:"371",cca2:"US",name:"America/New_York"},{id:"372",cca2:"US",name:"America/Detroit"},{id:"373",cca2:"US",name:"America/Kentucky/Louisville"},{id:"374",cca2:"US",name:"America/Kentucky/Monticello"},{id:"375",cca2:"US",name:"America/Indiana/Indianapolis"},{id:"376",cca2:"US",name:"America/Indiana/Vincennes"},{id:"377",cca2:"US",name:"America/Indiana/Winamac"},{id:"378",cca2:"US",name:"America/Indiana/Marengo"},{id:"379",cca2:"US",name:"America/Indiana/Petersburg"},{id:"380",cca2:"US",name:"America/Indiana/Vevay"},{id:"381",cca2:"US",name:"America/Chicago"},{id:"382",cca2:"US",name:"America/Indiana/Tell_City"},{id:"383",cca2:"US",name:"America/Indiana/Knox"},{id:"384",cca2:"US",name:"America/Menominee"},{id:"385",cca2:"US",name:"America/North_Dakota/Center"},{id:"386",cca2:"US",name:"America/North_Dakota/New_Salem"},{id:"387",cca2:"US",name:"America/North_Dakota/Beulah"},{id:"388",cca2:"US",name:"America/Denver"},{id:"389",cca2:"US",name:"America/Boise"},{id:"390",cca2:"US",name:"America/Phoenix"},{id:"391",cca2:"US",name:"America/Los_Angeles"},{id:"392",cca2:"US",name:"America/Anchorage"},{id:"393",cca2:"US",name:"America/Juneau"},{id:"394",cca2:"US",name:"America/Sitka"},{id:"395",cca2:"US",name:"America/Yakutat"},{id:"396",cca2:"US",name:"America/Nome"},{id:"397",cca2:"US",name:"America/Adak"},{id:"398",cca2:"US",name:"America/Metlakatla"},{id:"399",cca2:"US",name:"Pacific/Honolulu"},{id:"400",cca2:"UY",name:"America/Montevideo"},{id:"401",cca2:"UZ",name:"Asia/Samarkand"},{id:"402",cca2:"UZ",name:"Asia/Tashkent"},{id:"403",cca2:"VA",name:"Europe/Vatican"},{id:"404",cca2:"VC",name:"America/St_Vincent"},{id:"405",cca2:"VE",name:"America/Caracas"},{id:"406",cca2:"VG",name:"America/Tortola"},{id:"407",cca2:"VI",name:"America/St_Thomas"},{id:"408",cca2:"VN",name:"Asia/Ho_Chi_Minh"},{id:"409",cca2:"VU",name:"Pacific/Efate"},{id:"410",cca2:"WF",name:"Pacific/Wallis"},{id:"411",cca2:"WS",name:"Pacific/Apia"},{id:"412",cca2:"YE",name:"Asia/Aden"},{id:"413",cca2:"YT",name:"Indian/Mayotte"},{id:"414",cca2:"ZA",name:"Africa/Johannesburg"},{id:"415",cca2:"ZM",name:"Africa/Lusaka"},{id:"416",cca2:"ZW",name:"Africa/Harare"},{id:"417",cca2:"CA",name:"America/Montreal"}],function(e){t[e.name]=e.cca2}),t}]).factory("CCToCountryName",["_",function(e){var t={};return e.forEach([{cca2:"AF",name:"Afghanistan"},{cca2:"AX",name:"Aland Islands"},{cca2:"AL",name:"Albania"},{cca2:"DZ",name:"Algeria"},{cca2:"AS",name:"American Samoa"},{cca2:"AD",name:"Andorra"},{cca2:"AO",name:"Angola"},{cca2:"AI",name:"Anguilla"},{cca2:"AQ",name:"Antarctica"},{cca2:"AG",name:"Antigua And Barbuda"},{cca2:"AR",name:"Argentina"},{cca2:"AM",name:"Armenia"},{cca2:"AW",name:"Aruba"},{cca2:"AU",name:"Australia"},{cca2:"AT",name:"Austria"},{cca2:"AZ",name:"Azerbaijan"},{cca2:"BS",name:"Bahamas"},{cca2:"BH",name:"Bahrain"},{cca2:"BD",name:"Bangladesh"},{cca2:"BB",name:"Barbados"},{cca2:"BY",name:"Belarus"},{cca2:"BE",name:"Belgium"},{cca2:"BZ",name:"Belize"},{cca2:"BJ",name:"Benin"},{cca2:"BM",name:"Bermuda"},{cca2:"BT",name:"Bhutan"},{cca2:"BO",name:"Bolivia"},{cca2:"BA",name:"Bosnia And Herzegovina"},{cca2:"BW",name:"Botswana"},{cca2:"BV",name:"Bouvet Island"},{cca2:"BR",name:"Brazil"},{cca2:"IO",name:"British Indian Ocean Territory"},{cca2:"BN",name:"Brunei Darussalam"},{cca2:"BG",name:"Bulgaria"},{cca2:"BF",name:"Burkina Faso"},{cca2:"BI",name:"Burundi"},{cca2:"KH",name:"Cambodia"},{cca2:"CM",name:"Cameroon"},{cca2:"CA",name:"Canada"},{cca2:"CV",name:"Cape Verde"},{cca2:"KY",name:"Cayman Islands"},{cca2:"CF",name:"Central African Republic"},{cca2:"TD",name:"Chad"},{cca2:"CL",name:"Chile"},{cca2:"CN",name:"China"},{cca2:"CX",name:"Christmas Island"},{cca2:"CC",name:"Cocos (Keeling) Islands"},{cca2:"CO",name:"Colombia"},{cca2:"KM",name:"Comoros"},{cca2:"CG",name:"Congo"},{cca2:"CD",name:"Congo (Democratic Republic)"},{cca2:"CK",name:"Cook Islands"},{cca2:"CR",name:"Costa Rica"},{cca2:"CI",name:"Cote D'Ivoire"},{cca2:"HR",name:"Croatia"},{cca2:"CU",name:"Cuba"},{cca2:"CY",name:"Cyprus"},{cca2:"CZ",name:"Czech Republic"},{cca2:"DK",name:"Denmark"},{cca2:"DJ",name:"Djibouti"},{cca2:"DM",name:"Dominica"},{cca2:"DO",name:"Dominican Republic"},{cca2:"EC",name:"Ecuador"},{cca2:"EG",name:"Egypt"},{cca2:"SV",name:"El Salvador"},{cca2:"GQ",name:"Equatorial Guinea"},{cca2:"ER",name:"Eritrea"},{cca2:"EE",name:"Estonia"},{cca2:"ET",name:"Ethiopia"},{cca2:"FK",name:"Falkland Islands (Malvinas)"},{cca2:"FO",name:"Faroe Islands"},{cca2:"FJ",name:"Fiji"},{cca2:"FI",name:"Finland"},{cca2:"FR",name:"France"},{cca2:"GF",name:"French Guiana"},{cca2:"PF",name:"French Polynesia"},{cca2:"TF",name:"French Southern Territories"},{cca2:"GA",name:"Gabon"},{cca2:"GM",name:"Gambia"},{cca2:"GE",name:"Georgia"},{cca2:"DE",name:"Germany"},{cca2:"GH",name:"Ghana"},{cca2:"GI",name:"Gibraltar"},{cca2:"GR",name:"Greece"},{cca2:"GL",name:"Greenland"},{cca2:"GD",name:"Grenada"},{cca2:"GP",name:"Guadeloupe"},{cca2:"GU",name:"Guam"},{cca2:"GT",name:"Guatemala"},{cca2:"GG",name:"Guernsey"},{cca2:"GN",name:"Guinea"},{cca2:"GW",name:"Guinea-Bissau"},{cca2:"GY",name:"Guyana"},{cca2:"HT",name:"Haiti"},{cca2:"HM",name:"Heard Island & Mcdonald Islands"},{cca2:"VA",name:"Holy See (Vatican City State)"},{cca2:"HN",name:"Honduras"},{cca2:"HK",name:"Hong Kong"},{cca2:"HU",name:"Hungary"},{cca2:"IS",name:"Iceland"},{cca2:"IN",name:"India"},{cca2:"ID",name:"Indonesia"},{cca2:"IR",name:"Iran (Islamic Republic Of)"},{cca2:"IQ",name:"Iraq"},{cca2:"IE",name:"Ireland"},{cca2:"IM",name:"Isle Of Man"},{cca2:"IL",name:"Israel"},{cca2:"IT",name:"Italy"},{cca2:"JM",name:"Jamaica"},{cca2:"JP",name:"Japan"},{cca2:"JE",name:"Jersey"},{cca2:"JO",name:"Jordan"},{cca2:"KZ",name:"Kazakhstan"},{cca2:"KE",name:"Kenya"},{cca2:"KI",name:"Kiribati"},{cca2:"KR",name:"Korea"},{cca2:"KW",name:"Kuwait"},{cca2:"KG",name:"Kyrgyzstan"},{cca2:"LA",name:"Lao People's Democratic Republic"},{cca2:"LV",name:"Latvia"},{cca2:"LB",name:"Lebanon"},{cca2:"LS",name:"Lesotho"},{cca2:"LR",name:"Liberia"},{cca2:"LY",name:"Libyan Arab Jamahiriya"},{cca2:"LI",name:"Liechtenstein"},{cca2:"LT",name:"Lithuania"},{cca2:"LU",name:"Luxembourg"},{cca2:"MO",name:"Macao"},{cca2:"MK",name:"Macedonia"},{cca2:"MG",name:"Madagascar"},{cca2:"MW",name:"Malawi"},{cca2:"MY",name:"Malaysia"},{cca2:"MV",name:"Maldives"},{cca2:"ML",name:"Mali"},{cca2:"MT",name:"Malta"},{cca2:"MH",name:"Marshall Islands"},{cca2:"MQ",name:"Martinique"},{cca2:"MR",name:"Mauritania"},{cca2:"MU",name:"Mauritius"},{cca2:"YT",name:"Mayotte"},{cca2:"MX",name:"Mexico"},{cca2:"FM",name:"Micronesia (Federated States Of)"},{cca2:"MD",name:"Moldova"},{cca2:"MC",name:"Monaco"},{cca2:"MN",name:"Mongolia"},{cca2:"ME",name:"Montenegro"},{cca2:"MS",name:"Montserrat"},{cca2:"MA",name:"Morocco"},{cca2:"MZ",name:"Mozambique"},{cca2:"MM",name:"Myanmar"},{cca2:"NA",name:"Namibia"},{cca2:"NR",name:"Nauru"},{cca2:"NP",name:"Nepal"},{cca2:"NL",name:"Netherlands"},{cca2:"AN",name:"Netherlands Antilles"},{cca2:"NC",name:"New Caledonia"},{cca2:"NZ",name:"New Zealand"},{cca2:"NI",name:"Nicaragua"},{cca2:"NE",name:"Niger"},{cca2:"NG",name:"Nigeria"},{cca2:"NU",name:"Niue"},{cca2:"NF",name:"Norfolk Island"},{cca2:"MP",name:"Northern Mariana Islands"},{cca2:"NO",name:"Norway"},{cca2:"OM",name:"Oman"},{cca2:"PK",name:"Pakistan"},{cca2:"PW",name:"Palau"},{cca2:"PS",name:"Palestinian Territory (Occupied)"},{cca2:"PA",name:"Panama"},{cca2:"PG",name:"Papua New Guinea"},{cca2:"PY",name:"Paraguay"},{cca2:"PE",name:"Peru"},{cca2:"PH",name:"Philippines"},{cca2:"PN",name:"Pitcairn"},{cca2:"PL",name:"Poland"},{cca2:"PT",name:"Portugal"},{cca2:"PR",name:"Puerto Rico"},{cca2:"QA",name:"Qatar"},{cca2:"RE",name:"Reunion"},{cca2:"RO",name:"Romania"},{cca2:"RU",name:"Russian Federation"},{cca2:"RW",name:"Rwanda"},{cca2:"BL",name:"Saint Barthelemy"},{cca2:"SH",name:"Saint Helena"},{cca2:"KN",name:"Saint Kitts And Nevis"},{cca2:"LC",name:"Saint Lucia"},{cca2:"MF",name:"Saint Martin"},{cca2:"PM",name:"Saint Pierre And Miquelon"},{cca2:"VC",name:"Saint Vincent And Grenadines"},{cca2:"WS",name:"Samoa"},{cca2:"SM",name:"San Marino"},{cca2:"ST",name:"Sao Tome And Principe"},{cca2:"SA",name:"Saudi Arabia"},{cca2:"SN",name:"Senegal"},{cca2:"RS",name:"Serbia"},{cca2:"SC",name:"Seychelles"},{cca2:"SL",name:"Sierra Leone"},{cca2:"SG",name:"Singapore"},{cca2:"SK",name:"Slovakia"},{cca2:"SI",name:"Slovenia"},{cca2:"SB",name:"Solomon Islands"},{cca2:"SO",name:"Somalia"},{cca2:"SS",name:"South Sudan"},{cca2:"ZA",name:"South Africa"},{cca2:"GS",name:"South Georgia And Sandwich Isl."},{cca2:"ES",name:"Spain"},{cca2:"LK",name:"Sri Lanka"},{cca2:"SD",name:"Sudan"},{cca2:"SR",name:"Suriname"},{cca2:"SJ",name:"Svalbard And Jan Mayen"},{cca2:"SZ",name:"Swaziland"},{cca2:"SE",name:"Sweden"},{cca2:"CH",name:"Switzerland"},{cca2:"SY",name:"Syrian Arab Republic"},{cca2:"TW",name:"Taiwan"},{cca2:"TJ",name:"Tajikistan"},{cca2:"TZ",name:"Tanzania"},{cca2:"TH",name:"Thailand"},{cca2:"TL",name:"Timor-Leste"},{cca2:"TG",name:"Togo"},{cca2:"TK",name:"Tokelau"},{cca2:"TO",name:"Tonga"},{cca2:"TT",name:"Trinidad And Tobago"},{cca2:"TN",name:"Tunisia"},{cca2:"TR",name:"Turkey"},{cca2:"TM",name:"Turkmenistan"},{cca2:"TC",name:"Turks And Caicos Islands"},{cca2:"TV",name:"Tuvalu"},{cca2:"UG",name:"Uganda"},{cca2:"UA",name:"Ukraine"},{cca2:"AE",name:"United Arab Emirates"},{cca2:"GB",name:"United Kingdom"},{cca2:"US",name:"United States"},{cca2:"UM",name:"United States Outlying Islands"},{cca2:"UY",name:"Uruguay"},{cca2:"UZ",name:"Uzbekistan"},{cca2:"VU",name:"Vanuatu"},{cca2:"VE",name:"Venezuela"},{cca2:"VN",name:"Viet Nam"},{cca2:"VG",name:"Virgin Islands (British)"},{cca2:"VI",name:"Virgin Islands (U.S.)"},{cca2:"WF",name:"Wallis And Futuna"},{cca2:"EH",name:"Western Sahara"},{cca2:"YE",name:"Yemen"},{cca2:"ZM",name:"Zambia"},{cca2:"ZW",name:"Zimbabwe"},{cca2:"SX",name:"Sint Maarten"},{cca2:"CW",name:"Curacao"},{cca2:"BQ",name:"Bonaire"},{cca2:"KP",name:"North Korea"}],function(e){t[e.cca2]=e.name}),t}]).directive("timezoneSelector",["_","moment","timezoneFactory","zoneToCC","CCToCountryName",function(l,u,d,p,f){return{restrict:"E",replace:!0,template:'<select style="min-width:300px;"></select>',scope:{ngModel:"=",translations:"="},link:function(e,a,n){var o=[],t=d.get(),i={};if(l.forEach(t,function(e){if(l.has(p,e.id)){var t=p[e.id];i[t]=i[t]?i[t]:[],i[t].push(e)}}),l.forEach(i,function(e,t){var a={text:f[t]+": ",children:e,firstNOffset:e[0].nOffset};o.push(a)}),"offset"===n.sortBy?(o=l.sortBy(o,"firstNOffset"),l.forEach(o,function(e,t){e.children=l.sortBy(e.children,"nOffset")})):o=l.sortBy(o,"text"),void 0!==n.showLocal){if(void 0!==jstz)var r=l.filter(t,{id:jstz.determine().name()});else{var c="UTC"+u().format("Z");r=l.filter(t,{offset:c})}void 0!==r&&0<r.length&&o.splice(0,0,{text:l.get(e,"translations.local","Local")+": ",children:r,firstNOffset:r[0].nOffset,firstOffset:r[0].offset})}if(void 0!==n.setLocal&&void 0!==jstz&&(e.ngModel||(e.ngModel=jstz.determine().name())),void 0!==n.primaryChoices){var s=[];l.forEach(n.primaryChoices.split(" "),function(e){s.push(e.replace("_"," "))}),void 0!==(r=l.filter(t,function(e){return l.includes(s,e.name)}))&&0<r.length&&o.splice(0,0,{text:l.get(e,"translations.primary","Primary")+": ",children:r,firstNOffset:r[0].nOffset,firstOffset:r[0].offset})}l.forEach(o,function(e){var t=$('<optgroup label="'+e.text+'">');e.children.forEach(function(e){"true"===n.displayUtc&&-1===e.name.indexOf("(UTC")&&(e.name=e.name+" ("+e.offset+")"),t.append('<option value="'+e.id+'">'+e.name+"</option>")}),a.append(t)}),a.chosen({width:n.width||"300px",include_group_label_in_selected:!0,search_contains:!0,no_results_text:l.get(e,"translations.no_results_text","No results, try searching for the name of your country or nearest major city."),placeholder_text_single:l.get(e,"translations.placeholder","Choose a timezone")}),e.$watch("ngModel",function(){a.val(e.ngModel),a.trigger("chosen:updated")})}}}]),window.Modernizr=function(n,d,o){function e(e){l.cssText=e}function a(e,t){return typeof e===t}function i(e,t,a,n){var o,i,r,c,s=d.createElement("div"),l=d.body,u=l||d.createElement("body");if(parseInt(a,10))for(;a--;)(r=d.createElement("div")).id=n?n[a]:f+(a+1),s.appendChild(r);return o=["&#173;",'<style id="s',f,'">',e,"</style>"].join(""),s.id=f,(l?s:u).innerHTML+=o,u.appendChild(s),l||(u.style.background="",u.style.overflow="hidden",c=p.style.overflow,p.style.overflow="hidden",p.appendChild(u)),i=t(s,e),l?s.parentNode.removeChild(s):(u.parentNode.removeChild(u),p.style.overflow=c),!!i}var t,r,c={},p=d.documentElement,f="modernizr",s=d.createElement(f),l=s.style,u=" -webkit- -moz- -o- -ms- ".split(" "),m={},h=[],g=h.slice,b={}.hasOwnProperty;for(var v in r=a(b,"undefined")||a(b.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return b.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(n){var o=this;if("function"!=typeof o)throw new TypeError;var i=g.call(arguments,1),r=function(){if(this instanceof r){function e(){}e.prototype=o.prototype;var t=new e,a=o.apply(t,i.concat(g.call(arguments)));return Object(a)===a?a:t}return o.apply(n,i.concat(g.call(arguments)))};return r}),m.touch=function(){var t;return"ontouchstart"in n||n.DocumentTouch&&d instanceof DocumentTouch?t=!0:i(["@media (",u.join("touch-enabled),("),f,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=9===e.offsetTop}),t},m)r(m,v)&&(t=v.toLowerCase(),c[t]=m[v](),h.push((c[t]?"":"no-")+t));return c.addTest=function(e,t){if("object"==typeof e)for(var a in e)r(e,a)&&c.addTest(a,e[a]);else{if(e=e.toLowerCase(),c[e]!==o)return c;t="function"==typeof t?t():t,p.className+=" "+(t?"":"no-")+e,c[e]=t}return c},e(""),s=null,function(e,s){function l(){var e=m.elements;return"string"==typeof e?e.split(" "):e}function u(e){var t=c[e[n]];return t||(t={},r++,e[n]=r,c[r]=t),t}function d(e,t,a){return t=t||s,f?t.createElement(e):!(n=(a=a||u(t)).cache[e]?a.cache[e].cloneNode():i.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e)).canHaveChildren||o.test(e)||n.tagUrn?n:a.frag.appendChild(n);var n}function t(e){var t,a,n,o,i,r,c=u(e=e||s);return!m.shivCSS||p||c.hasCSS||(c.hasCSS=(o="article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}",i=(n=e).createElement("p"),r=n.getElementsByTagName("head")[0]||n.documentElement,i.innerHTML="x<style>"+o+"</style>",!!r.insertBefore(i.lastChild,r.firstChild))),f||(t=e,(a=c).cache||(a.cache={},a.createElem=t.createElement,a.createFrag=t.createDocumentFragment,a.frag=a.createFrag()),t.createElement=function(e){return m.shivMethods?d(e,t,a):a.createElem(e)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/[\w\-]+/g,function(e){return a.createElem(e),a.frag.createElement(e),'c("'+e+'")'})+");return n}")(m,a.frag)),e}var p,f,a=e.html5||{},o=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,i=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,n="_html5shiv",r=0,c={};!function(){try{var e=s.createElement("a");e.innerHTML="<xyz></xyz>",p="hidden"in e,f=1==e.childNodes.length||function(){s.createElement("a");var e=s.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){f=p=!0}}();var m={elements:a.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==a.shivCSS,supportsUnknownElements:f,shivMethods:!1!==a.shivMethods,type:"default",shivDocument:t,createElement:d,createDocumentFragment:function(e,t){if(e=e||s,f)return e.createDocumentFragment();for(var a=(t=t||u(e)).frag.cloneNode(),n=0,o=l(),i=o.length;n<i;n++)a.createElement(o[n]);return a}};e.html5=m,t(s)}(this,d),c._version="2.7.1",c._prefixes=u,c.mq=function(e){var t,a=n.matchMedia||n.msMatchMedia;return a?a(e).matches:(i("@media "+e+" { #"+f+" { position: absolute; } }",function(e){t="absolute"==(n.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),t)},c.testStyles=i,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+h.join(" "),c}(this,this.document),function(e,p){function d(e){return"[object Function]"==o.call(e)}function f(e){return"string"==typeof e}function m(){}function h(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function g(){var e=C.shift();w=1,e?e.t?v(function(){("c"==e.t?b.injectCss:b.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),g()):w=0}function t(e,t,a,n,o){return w=0,t=t||"j",f(e)?function(a,n,e,t,o,i,r){function c(e){if(!l&&h(s.readyState)&&(d.r=l=1,w||g(),s.onload=s.onreadystatechange=null,e))for(var t in"img"!=a&&v(function(){A.removeChild(s)},50),T[n])T[n].hasOwnProperty(t)&&T[n][t].onload()}r=r||b.errorTimeout;var s=p.createElement(a),l=0,u=0,d={t:e,s:n,e:o,a:i,x:r};1===T[n]&&(u=1,T[n]=[]),"object"==a?s.data=n:(s.src=n,s.type=a),s.width=s.height="0",s.onerror=s.onload=s.onreadystatechange=function(){c.call(this,u)},C.splice(t,0,d),"img"!=a&&(u||2===T[n]?(A.insertBefore(s,_?null:y),v(c,r)):T[n].push(s))}("c"==t?s:r,e,t,this.i++,a,n,o):(C.splice(this.i++,0,e),1==C.length&&g()),this}function c(){var e=b;return e.loader={load:t,i:0},e}var a,b,n=p.documentElement,v=e.setTimeout,y=p.getElementsByTagName("script")[0],o={}.toString,C=[],w=0,i="MozAppearance"in n.style,_=i&&!!p.createRange().compareNode,A=_?n:y.parentNode,r=(n=e.opera&&"[object Opera]"==o.call(e.opera),n=!!p.attachEvent&&!n,i?"object":n?"script":"img"),s=n?"script":r,l=Array.isArray||function(e){return"[object Array]"==o.call(e)},$=[],T={},S={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};(b=function(e){function u(e,t,a,n,o){var i=function(e){e=e.split("!");var t,a,n,o=$.length,i=e.pop(),r=e.length;for(i={url:i,origUrl:i,prefixes:e},a=0;a<r;a++)n=e[a].split("="),(t=S[n.shift()])&&(i=t(i,n));for(a=0;a<o;a++)i=$[a](i);return i}(e),r=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(t=t&&(d(t)?t:t[e]||t[n]||t[e.split("/").pop().split("?")[0]]),i.instead?i.instead(e,t,a,n,o):(T[i.url]?i.noexec=!0:T[i.url]=1,a.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":void 0,i.noexec,i.attrs,i.timeout),(d(t)||d(r))&&a.load(function(){c(),t&&t(i.origUrl,o,n),r&&r(i.origUrl,o,n),T[i.url]=2})))}function t(e,t){function a(a,e){if(a){if(f(a))e||(c=function(){var e=[].slice.call(arguments);s.apply(this,e),l()}),u(a,c,t,0,i);else if(Object(a)===a)for(o in n=function(){var e,t=0;for(e in a)a.hasOwnProperty(e)&&t++;return t}(),a)a.hasOwnProperty(o)&&(e||--n||(d(c)?c=function(){var e=[].slice.call(arguments);s.apply(this,e),l()}:c[o]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),l()}}(s[o])),u(a[o],c,t,o,i))}else e||l()}var n,o,i=!!e.test,r=e.load||e.both,c=e.callback||m,s=c,l=e.complete||m;a(i?e.yep:e.nope,!!r),r&&a(r)}var a,n,o=this.yepnope.loader;if(f(e))u(e,0,o,0);else if(l(e))for(a=0;a<e.length;a++)f(n=e[a])?u(n,0,o,0):l(n)?b(n):Object(n)===n&&t(n,o);else Object(e)===e&&t(e,o)}).addPrefix=function(e,t){S[e]=t},b.addFilter=function(e){$.push(e)},b.errorTimeout=1e4,null==p.readyState&&p.addEventListener&&(p.readyState="loading",p.addEventListener("DOMContentLoaded",a=function(){p.removeEventListener("DOMContentLoaded",a,0),p.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=g,e.yepnope.injectJs=function(e,t,a,n,o,i){var r,c,s=p.createElement("script");n=n||b.errorTimeout;for(c in s.src=e,a)s.setAttribute(c,a[c]);t=i?g:t||m,s.onreadystatechange=s.onload=function(){!r&&h(s.readyState)&&(r=1,t(),s.onload=s.onreadystatechange=null)},v(function(){r||t(r=1)},n),o?s.onload():y.parentNode.insertBefore(s,y)},e.yepnope.injectCss=function(e,t,a,n,o,i){var r;n=p.createElement("link"),t=i?g:t||m;for(r in n.href=e,n.rel="stylesheet",n.type="text/css",a)n.setAttribute(r,a[r]);o||(y.parentNode.insertBefore(n,y),v(t,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e){"use strict";var t,a,n,o,i,r;e.matchMedia=e.matchMedia||(t=e.document,n=t.documentElement,o=n.firstElementChild||n.firstChild,i=t.createElement("body"),(r=t.createElement("div")).id="mq-test-1",r.style.cssText="position:absolute;top:-100em",i.style.background="none",i.appendChild(r),function(e){return r.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(i,o),a=42===r.offsetWidth,n.removeChild(i),{matches:a,media:e}})}(this),function(b){"use strict";function e(){M(!0)}var f={};(b.respond=f).update=function(){};function a(e,t){var a=n();a&&(a.open("GET",e,!0),a.onreadystatechange=function(){4!==a.readyState||200!==a.status&&304!==a.status||t(a.responseText)},4!==a.readyState&&a.send(null))}function m(e){return e.replace(f.regex.minmaxwh,"").match(f.regex.other)}var i=[],n=function(){var t=!1;try{t=new b.XMLHttpRequest}catch(e){t=new b.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();if(f.ajax=a,f.queue=i,f.unsupportedmq=m,f.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},f.mediaQueriesSupported=b.matchMedia&&null!==b.matchMedia("only all")&&b.matchMedia("only all").matches,!f.mediaQueriesSupported){var v,y,C,w=b.document,_=w.documentElement,A=[],$=[],T=[],r={},S=w.getElementsByTagName("head")[0]||_,c=w.getElementsByTagName("base")[0],x=S.getElementsByTagName("link"),P=function(){var e,t=w.createElement("div"),a=w.body,n=_.style.fontSize,o=a&&a.style.fontSize,i=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",a||((a=i=w.createElement("body")).style.background="none"),_.style.fontSize="100%",a.style.fontSize="100%",a.appendChild(t),i&&_.insertBefore(a,_.firstChild),e=t.offsetWidth,i?_.removeChild(a):a.removeChild(t),_.style.fontSize=n,o&&(a.style.fontSize=o),C=parseFloat(e)},M=function(e){var t="clientWidth",a=_[t],n="CSS1Compat"===w.compatMode&&a||w.body[t]||a,o={},i=x[x.length-1],r=(new Date).getTime();if(e&&v&&r-v<30)return b.clearTimeout(y),void(y=b.setTimeout(M,30));for(var c in v=r,A)if(A.hasOwnProperty(c)){var s=A[c],l=s.minw,u=s.maxw,d=null===l,p=null===u;l=l&&parseFloat(l)*(-1<l.indexOf("em")?C||P():1),u=u&&parseFloat(u)*(-1<u.indexOf("em")?C||P():1),s.hasquery&&(d&&p||!(d||l<=n)||!(p||n<=u))||(o[s.media]||(o[s.media]=[]),o[s.media].push($[s.rules]))}for(var f in T)T.hasOwnProperty(f)&&T[f]&&T[f].parentNode===S&&S.removeChild(T[f]);for(var m in T.length=0,o)if(o.hasOwnProperty(m)){var h=w.createElement("style"),g=o[m].join("\n");h.type="text/css",h.media=m,S.insertBefore(h,i.nextSibling),h.styleSheet?h.styleSheet.cssText=g:h.appendChild(w.createTextNode(g)),T.push(h)}},s=function(e,t,a){function n(e){return e.replace(f.regex.urls,"$1"+t+"$2$3")}var o=e.replace(f.regex.comments,"").replace(f.regex.keyframes,"").match(f.regex.media),i=o&&o.length||0,r=!i&&a;(t=t.substring(0,t.lastIndexOf("/"))).length&&(t+="/"),r&&(i=1);for(var c=0;c<i;c++){var s,l,u,d;r?(s=a,$.push(n(e))):(s=o[c].match(f.regex.findStyles)&&RegExp.$1,$.push(RegExp.$2&&n(RegExp.$2))),d=(u=s.split(",")).length;for(var p=0;p<d;p++)l=u[p],m(l)||A.push({media:l.split("(")[0].match(f.regex.only)&&RegExp.$2||"all",rules:$.length-1,hasquery:-1<l.indexOf("("),minw:l.match(f.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(f.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}M()},l=function(){if(i.length){var t=i.shift();a(t.href,function(e){s(e,t.href,t.media),r[t.href]=!0,b.setTimeout(function(){l()},0)})}},t=function(){for(var e=0;e<x.length;e++){var t=x[e],a=t.href,n=t.media,o=t.rel&&"stylesheet"===t.rel.toLowerCase();a&&o&&!r[a]&&(t.styleSheet&&t.styleSheet.rawCssText?(s(t.styleSheet.rawCssText,a,n),r[a]=!0):(/^([a-zA-Z:]*\/\/)/.test(a)||c)&&a.replace(RegExp.$1,"").split("/")[0]!==b.location.host||("//"===a.substring(0,2)&&(a=b.location.protocol+a),i.push({href:a,media:n})))}l()};t(),f.update=t,f.getEmValue=P,b.addEventListener?b.addEventListener("resize",e,!1):b.attachEvent&&b.attachEvent("onresize",e)}}(this),function(sg){function ug(e){if(vg[e])return vg[e].exports;var t=vg[e]={i:e,l:!1,exports:{}};return tg[e].call(t.exports,t,t.exports,ug),t.l=!0,t.exports}var tg,vg;vg={},ug.m=tg={100:function(e,t,a){(function(e){var t=a(5);try{e.Promise=t,window.Promise=t}catch(e){}}).call(t,a(2))},2:function(Mg,Ng){var Og;Og=function(){return this}();try{Og=Og||Function("return this")()||eval("this")}catch(e){"object"==typeof window&&(Og=window)}Mg.exports=Og},5:function(q,e,t){(function(J){!function(){"use strict";function n(){return V[z][F]||"Symbol(species)"}function o(e){return e&&"object"==typeof e}function s(e){return"function"==typeof e}function l(e,t){return e instanceof t}function t(e,t,a){if(!t(e))throw d(a)}function a(){try{return A.apply($,arguments)}catch(e){return K.e=e,K}}function u(e,t){return A=e,$=t,a}function e(t,a){function n(){for(var e=0;e<i;)a(o[e],o[e+1]),o[e++]=_,o[e++]=_;i=0,o.length>t&&(o.length=t)}var o=L(t),i=0;return function(e,t){o[i++]=e,o[i++]=t,2===i&&V.nextTick(n)}}function c(e,t){var a,n,o,i,r=0;if(!e)throw d(R);var c=e[V[z].iterator];if(s(c))n=c.call(e);else{if(!s(e.next)){if(l(e,L)){for(a=e.length;r<a;)t(e[r],r++);return r}throw d(R)}n=e}for(;!(o=n.next()).done;)if((i=u(t)(o.value,r++))===K)throw s(n.return)&&n.return(),i.e;return r}function d(e){return new TypeError(e)}function i(e){return(e?"":H)+(new k).stack}function r(e,t){var a="on"+e.toLowerCase(),n=x[a];M&&M.listeners(e).length?e===G?M.emit(e,t._v,t):M.emit(e,t):n?n({reason:t._v,promise:t}):V[e](t._v,t)}function p(e){return e&&e._s}function f(e){return p(e)?new e(w):(a=new e(function(e,t){if(a)throw d();n=e,o=t}),t(n,s),t(o,s),a);var a,n,o}function m(t,a){var n=!1;return function(e){n||(n=!0,U&&(t[N]=i(!0)),a===O?v(t,e):b(t,a,e))}}function h(e,t){function a(e){return n.push(e.replace(/^\s+|\s+$/g,""))}var n=[];return U&&(t[N]&&a(t[N]),function e(t){t&&I in t&&(e(t._next),a(t[I]+""),e(t._p))}(t)),(e&&e.stack?e.stack:e)+("\n"+n.join("\n")).replace(W,"")}function g(e,t){return e(t)}function b(e,t,a){var n=0,o=e._c;if(e._s===B)for(e._s=t,e._v=a,t===D&&(U&&l(a,k)&&(a.longStack=h(a,e)),X(e));n<o;)Y(e,e[n++]);return e}function v(e,t){if(t===e&&t)return b(e,D,d(j)),e;if(t!==T&&(s(t)||o(t))){var a=u(y)(t);if(a===K)return b(e,D,a.e),e;s(a)?(U&&p(t)&&(e._next=t),p(t)?C(e,t,a):V.nextTick(function(){C(e,t,a)})):b(e,O,t)}else b(e,O,t);return e}function y(e){return e.then}function C(t,a,e){var n=u(e,a)(function(e){a&&(a=T,v(t,e))},function(e){a&&(a=T,b(t,D,e))});n===K&&a&&(b(t,D,n.e),a=T)}function w(){}var _,A,$,T=null,S="object"==typeof self,x=S?self:J,P=x.Promise,M=x.process,E=x.console,U=!1,L=Array,k=Error,D=1,O=2,B=3,z="Symbol",F="species",I="_pt",N="_st",R="Invalid argument",H="\nFrom previous ",j="Chaining cycle detected for promise",G="unhandledRejection",K={e:T},W=/^.+\/node_modules\/yaku\/.+\n?/gm,V=function(e){var t,a=this;if(!o(a)||a._s!==_)throw d("Invalid this");if(a._s=B,U&&(a[I]=i()),e!==w){if(!s(e))throw d(R);(t=u(e)(m(a,O),m(a,D)))===K&&b(a,D,t.e)}};(function(e,t){for(var a in t)e[a]=t[a]})((V.default=V).prototype,{then:function(e,t){if(this._s===sg)throw d();return a=this,n=f(V.speciesConstructor(this,V)),i=t,s(o=e)&&(n._onFulfilled=o),s(i)&&(a._uh&&r("rejectionHandled",a),n._onRejected=i),U&&(n._p=a),a[a._c++]=n,a._s!==B&&Y(a,n),n;var a,n,o,i},catch:function(e){return this.then(_,e)},finally:function(t){return this.then(function(e){return V.resolve(t()).then(function(){return e})},function(e){return V.resolve(t()).then(function(){throw e})})},_c:0,_p:T}),V.resolve=function(e){return p(e)?e:v(f(this),e)},V.reject=function(e){return b(f(this),D,e)},V.race=function(e){function t(e){b(o,O,e)}function a(e){b(o,D,e)}var n=this,o=f(n),i=u(c)(e,function(e){n.resolve(e).then(t,a)});return i===K?n.reject(i.e):o},V.all=function(e){function a(e){b(i,D,e)}var n,o=this,i=f(o),r=[];return(n=u(c)(e,function(e,t){o.resolve(e).then(function(e){r[t]=e,--n||b(i,O,r)},a)}))===K?o.reject(n.e):(n||b(i,O,[]),i)},V.Symbol=x[z]||{},u(function(){Object.defineProperty(V,n(),{get:function(){return this}})})(),V.speciesConstructor=function(e,t){var a=e.constructor;return a&&a[n()]||t},V.unhandledRejection=function(e,t){E&&E.error("Uncaught (in promise)",U?t.longStack:h(e,t))},V.rejectionHandled=w,V.enableLongStackTrace=function(){U=!0},V.nextTick=S?function(e){P?new P(function(e){e()}).then(e):setTimeout(e)}:M.nextTick,V._s=1;var Y=e(999,function(e,t){var a,n;return(n=e._s!==D?t._onFulfilled:t._onRejected)===_?void b(t,e._s,e._v):(a=u(g)(n,e._v))===K?void b(t,D,a.e):void v(t,a)}),X=e(9,function(e){!function e(t){if(t._umark)return!0;t._umark=!0;for(var a,n=0,o=t._c;n<o;)if((a=t[n++])._onRejected||e(a))return!0}(e)&&(e._uh=1,r(G,e))});try{q.exports=V}catch(e){x.Yaku=V}}()}).call(e,t(2))}},ug.c=vg,ug.i=function(e){return e},ug.d=function(e,t,a){ug.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},ug.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return ug.d(t,"a",t),t},ug.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ug.p="",ug(ug.s=100)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),angular.module("paclient",[]).factory("api",["$http","$window","$q","$location","localStorageService",function(n,a,t,e,o){var i="http://core.primeairtime.com:3000/api";return self.parseJwt=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(a.atob(t))},self.isAuthed=function(){var e=self.getToken();if(e){var t=self.parseJwt(e);return Math.round((new Date).getTime())<=t.exp?(Math.abs(Math.round((new Date).getTime())-parseInt(t.exp))<72e5&&self.reauth(),!0):(o.clearAll(),!1)}return!1},self.getToken=function(){return o.get("token")},self.setToken=function(e){o.set("token",e)},self.setProfile=function(e){o.set("profile",e)},self.getConfig=function(){var e=self.getToken();if(e){var t={headers:{}};return t.headers.Authorization="Bearer "+e,t}return!1},self.reauth=function(){return t(function(e,t){self.get("/reauth").then(function(e){e.token&&self.setToken(e.token)}).catch(function(e){t(e)})})},self.getCoreDashboardByCustomTime=function(n,o){return console.log("/dashboard_Core_custom/"+n),t(function(t,a){var e=-(new Date).getTimezoneOffset();self.get("/dashboard_Core_custom/"+n+"/"+o+"?timezone="+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCoreDashboard=function(n){return console.log("/dashboard_Core/"+n),t(function(t,a){var e=-(new Date).getTimezoneOffset();self.get("/dashboard_Core/"+n+"?timezone="+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.get=function(e){var t=self.getConfig();return!!t&&n.get(i+e,t)},self.post=function(e,t){var a=self.getConfig();return!!a&&n.post(i+e,t,a)},self.put=function(e,t){var a=self.getConfig();return!!a&&n.put(i+e,t,a)},self.delete=function(e){var t=self.getConfig();return!!t&&n.delete(i+e,t)},self.login=function(e){return t(function(t,a){n.post(i+"/auth",{username:e.username,password:e.password}).then(function(e){if(e.data.token)return self.setToken(e.data.token),self.get("/status");a(err)}).then(function(e){self.setProfile(e.data),t(e.data)}).catch(function(e){a(e)})})},self._get=function(e){return t(function(t,a){self.get(e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self._post=function(e,n){return t(function(t,a){self.post(e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self._put=function(e,n){return t(function(t,a){self.put(e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self._delete=function(e){return t(function(t,a){self.delete(e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getProfileServer=function(){return t(function(t,a){self.get("/status").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getVersion=function(){return"1.0.0"},self.getProfile=function(){return t(function(t,a){var e=o.get("profile");e?t(e):self.getProfileServer().then(function(e){self.setProfile(e),t(e)}).catch(function(e){a(e)})})},self.updateProfile=function(){return t(function(t,a){self.getProfileServer().then(function(e){self.setProfile(e),t(e)}).catch(function(e){a(e)})})},self.getAccountsWallet=function(e){return t(function(t,a){self.post("/accounts/accountlist",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getAccounts=function(){return t(function(t,a){self.get("/accounts").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getAccount=function(e){return t(function(t,a){self.get("/accounts/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getAccountUsers=function(e){return t(function(t,a){self.get("/accounts/"+e+"/users").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getChildAccounts=function(e){return t(function(t,a){self.get("/accounts/"+e+"/accounts").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getUser=function(e,n){return t(function(t,a){self.get("/accounts/"+e+"/users/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createUser=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/users",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.editUser=function(e,n,o){return t(function(t,a){self.put("/accounts/"+e+"/users/"+n,o).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.deleteUser=function(e,n){return t(function(t,a){self.delete("/accounts/"+e+"/users/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTickets=function(e,n){return t(function(t,a){self.get("/tickets/"+e+"/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTopupsAcc=function(e,n){return t(function(t,a){self.get("/topuplog/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTicketStats=function(){return t(function(t,a){self.get("/tickets/stats").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTicket=function(e){return t(function(t,a){self.get("/tickets/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateTicket=function(e,n){return t(function(t,a){self.put("/tickets/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateAccount=function(e,n){return t(function(t,a){self.put("/accounts/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.deleteAccount=function(e){return t(function(t,a){self.delete("/accounts/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createAccount=function(e){return t(function(t,a){self.post("/accounts/",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createChildAccount=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/accounts",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createCredentialAccount=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/credentials",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateCredentialAccount=function(e,n,o){return t(function(t,a){self.put("/accounts/"+e+"/credentials/"+n,o).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCredentialAccount=function(e,n){return t(function(t,a){self.get("/accounts/"+e+"/credentials/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getRates=function(){return t(function(t,a){self.get("/rates/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCredentialsAccount=function(e){return t(function(t,a){self.get("/accounts/"+e+"/credentials/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCredentials=function(){return t(function(t,a){self.get("/credentials/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCredential=function(e){return t(function(t,a){self.get("/credentials/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateCredential=function(e,n){return t(function(t,a){self.put("/credentials/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.deleteCredentialAccount=function(e,n){return t(function(t,a){self.delete("/accounts/"+e+"/credentials/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createCredential=function(e){return t(function(t,a){self.post("/credentials/",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getSettings=function(){return t(function(t,a){self.get("/settings/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getSetting=function(e){return t(function(t,a){self.get("/settings/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateSetting=function(e,n){return t(function(t,a){self.put("/settings/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createSetting=function(e){return t(function(t,a){self.post("/settings/",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getRate=function(e){return t(function(t,a){self.get("/rates/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createRate=function(e){return t(function(t,a){self.post("/rates/",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.editRate=function(e,n){return t(function(t,a){self.put("/rates/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.deleteRate=function(e){return t(function(t,a){self.delete("/rates/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getProfitMap=function(e){return t(function(t,a){self.get("/accounts/"+e+"/profitmap").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCountries=function(){return t(function(t,a){self.get("/countries").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getCurrencies=function(){return t(function(t,a){self.get("/currencies").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createWallet=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/wallets",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getWallet=function(e,n){return t(function(t,a){self.get("/accounts/"+e+"/wallets/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getWallets=function(e){return t(function(t,a){self.get("/accounts/"+e+"/wallets/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateWallet=function(e,n,o){return t(function(t,a){self.put("/accounts/"+e+"/wallets/"+n,o).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTopupsFilter=function(e,n){return t(function(t,a){self.post("/topuplog/page/"+n,e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTransactionsFiltered=function(e,n){return t(function(t,a){self.post("/transactions/"+n,e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getAcl=function(e){return t(function(t,a){self.get("/accounts/"+e+"/acl").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateAcl=function(e,n){return t(function(t,a){self.put("/accounts/"+e+"/acl",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createAcl=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/acl",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getProfitMap=function(e){return t(function(t,a){self.get("/accounts/"+e+"/profitmap").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateProfitMap=function(e,n){return t(function(t,a){self.put("/accounts/"+e+"/profitmap",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getOperators=function(e){return t(function(t,a){self.get("/countries/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getAllOperators=function(){return t(function(t,a){self.get("/operators").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getOperator=function(e){return t(function(t,a){self.get("/operators/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTransactions=function(e,n){return t(function(t,a){self.get("/accounts/"+e+"/transactions/page/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getPinBatchList=function(){return t(function(t,a){self.get("/pins").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTransactionsAll=function(e){return t(function(t,a){self.get("/transactions/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getUsers=function(){return t(function(t,a){self.get("/users").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTopups=function(e){return t(function(t,a){self.get("/topuplog/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getMappings=function(e){return t(function(t,a){self.get("/provmap/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getTopup=function(e){return t(function(t,a){self.get("/topuplog/item/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getMapping=function(e){return t(function(t,a){self.get("/provmap/entry/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.editMapping=function(e,n){return t(function(t,a){self.put("/provmap/entry/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.newMapping=function(e){return t(function(t,a){self.post("/provmap/entry/",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.deleteMapping=function(e){return t(function(t,a){self.delete("/provmap/entry/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateWithdrawal=function(e,n){return t(function(t,a){self.put("/withdrawals/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createBatch=function(e){return t(function(t,a){self.post("/pins",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.invalidatePin=function(e,n,o){return t(function(t,a){self.get("/pins/"+e+"/"+n+"/"+o).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.invalidateBatch=function(e){return t(function(t,a){self.get("/pins/"+e+"/invalidate").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getPins=function(e){return t(function(t,a){self.get("/pins/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getProviders=function(){return t(function(t,a){self.get("/providers").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getParent=function(e){return t(function(t,a){self.get("/accounts/"+e+"/parent/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.createInvoice=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/credit/invoices/",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.editInvoice=function(e,n,o){return t(function(t,a){self.put("/accounts/"+e+"/credit/invoices/"+n,o).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.deleteInvoice=function(e,n){return t(function(t,a){self.delete("/accounts/"+e+"/credit/invoices/"+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.topupAcc=function(e,n){return t(function(t,a){self.post("/accounts/"+e+"/topup",n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getDashboard=function(){return t(function(t,a){self.get("/dashboard/").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.accountGetAll=function(){return t(function(t,a){self.get("/accounts/all").then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.pinSearch=function(e){return t(function(t,a){self.post("/pins/search",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.pinRelationTopup=function(e){return t(function(t,a){self.post("/pins/relatedtopup",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.pinRelationTransaction=function(e){return t(function(t,a){self.post("/pins/relatedtransaction",e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getPin=function(e){return t(function(t,a){self.get("/pin/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getAllPin=function(e){return t(function(t,a){self.get("/pins/all/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.PinApplyFilter=function(e,n){return t(function(t,a){self.post("/pins/filter/"+n,e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getApiSettings=function(e,n){return t(function(t,a){self.get("/apisettings?page="+e+"&category="+n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.getApiSetting=function(e){return t(function(t,a){self.get("/apisettings/"+e).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self.updateApiSetting=function(e,n){return t(function(t,a){self.put("/apisettings/"+e,n).then(function(e){t(e.data)}).catch(function(e){a(e)})})},self}]);var app=angular.module("autocomplete",[]);function TransferModalProps(){return this.tdata={},this.tdata.accounts=[],this.tdata.sourceWallets=[],this.tdata.destWallets=[],this.tdata.rates=[],this.tdata.sourceAccount=null,this.tdata.destAccount=null,this.rec={},this.rec.source=null,this.rec.destination=null,this.rec.amount=null,this.rec.sourcecur=null,this.rec.destcur=null,this}app.directive("autocomplete",function(){var p=-1;return{restrict:"E",scope:{searchParam:"=ngModel",suggestions:"=data",onType:"=onType",onSelect:"=onSelect",autocompleteRequired:"=",noAutoSort:"=noAutoSort"},controller:["$scope",function(a){a.selectedIndex=-1,a.initLock=!0,a.setIndex=function(e){a.selectedIndex=parseInt(e)},this.setIndex=function(e){a.setIndex(e),a.$apply()},a.getIndex=function(e){return a.selectedIndex};var n=!0;a.completing=!1,a.$watch("searchParam",function(e,t){t===e||!t&&a.initLock||(n&&void 0!==a.searchParam&&null!==a.searchParam&&(a.completing=!0,a.searchFilter=a.searchParam,a.selectedIndex=-1),a.onType&&a.onType(a.searchParam))}),this.preSelect=function(e){n=!1,a.$apply(),n=!0},a.preSelect=this.preSelect,this.preSelectOff=function(){n=!0},a.preSelectOff=this.preSelectOff,a.select=function(e){e&&(a.searchParam=e,a.searchFilter=e,a.onSelect&&a.onSelect(e)),n=!1,a.completing=!1,setTimeout(function(){n=!0},1e3),a.setIndex(-1)}}],link:function(n,e,t){console.log(n.noAutoSort),setTimeout(function(){n.initLock=!1,n.$apply()},250);var a="";for(var o in n.attrs={placeholder:"start typing...",class:"",id:"",inputclass:"",inputid:""},t)a=o.replace("attr","").toLowerCase(),0===o.indexOf("attr")&&(n.attrs[a]=t[o]);t.clickActivation&&(e[0].onclick=function(e){n.searchParam||setTimeout(function(){n.completing=!0,n.$apply()},200)});var i=37,r=38,c=39,s=40,l=13,u=27,d=9;document.addEventListener("keydown",function(e){switch(e.keyCode||e.which){case u:n.select(),n.setIndex(-1),n.$apply(),e.preventDefault()}},!0),document.addEventListener("blur",function(e){setTimeout(function(){n.select(),n.setIndex(-1),n.$apply()},150)},!0),e[0].addEventListener("keydown",function(e){var t=e.keyCode||e.which,a=angular.element(this).find("li").length;if(n.completing&&0!=a)switch(t){case r:if((p=n.getIndex()-1)<-1)p=a-1;else if(a<=p){p=-1,n.setIndex(p),n.preSelectOff();break}n.setIndex(p),-1!==p&&n.preSelect(angular.element(angular.element(this).find("li")[p]).text()),n.$apply();break;case s:if((p=n.getIndex()+1)<-1)p=a-1;else if(a<=p){p=-1,n.setIndex(p),n.preSelectOff(),n.$apply();break}n.setIndex(p),-1!==p&&n.preSelect(angular.element(angular.element(this).find("li")[p]).text());break;case i:break;case c:case l:case d:-1!==(p=n.getIndex())?(n.select(angular.element(angular.element(this).find("li")[p]).text()),t==l&&e.preventDefault()):t==l&&n.select(),n.setIndex(-1),n.$apply();break;case u:n.select(),n.setIndex(-1),n.$apply(),e.preventDefault();break;default:return}})},template:'        <div class="autocomplete {{ attrs.class }}" id="{{ attrs.id }}">          <input            type="text"            ng-model="searchParam"            placeholder="{{ attrs.placeholder }}"            class="{{ attrs.inputclass }}"            tabindex="{{ attrs.tabindex }}"            id="{{ attrs.inputid }}"            name="{{ attrs.name }}"            ng-required="{{ autocompleteRequired }}" />          <ul ng-if="!noAutoSort" ng-show="completing && (suggestions | filter:searchFilter).length > 0">            <li              suggestion              ng-repeat="suggestion in suggestions | filter:searchFilter | orderBy:\'toString()\' track by $index"              index="{{ $index }}"              val="{{ suggestion }}"              ng-class="{ active: ($index === selectedIndex) }"              ng-click="select(suggestion)"              ng-bind-html="suggestion | highlight:searchParam"></li>          </ul>          <ul ng-if="noAutoSort" ng-show="completing && (suggestions | filter:searchFilter).length > 0">            <li              suggestion              ng-repeat="suggestion in suggestions | filter:searchFilter track by $index"              index="{{ $index }}"              val="{{ suggestion }}"              ng-class="{ active: ($index === selectedIndex) }"              ng-click="select(suggestion)"              ng-bind-html="suggestion | highlight:searchParam"></li>          </ul>        </div>'}}),app.filter("highlight",["$sce",function(o){return function(e,t){if("function"==typeof e)return"";if(t){var a="("+t.split(/\ /).join(" |")+"|"+t.split(/\ /).join("|")+")",n=new RegExp(a,"gi");a.length&&(e=e.replace(n,'<span class="highlight">$1</span>'))}return o.trustAsHtml(e)}}]),app.directive("suggestion",function(){return{restrict:"A",require:"^autocomplete",link:function(e,t,a,n){t.bind("mouseenter",function(){n.preSelect(a.val),n.setIndex(a.index)}),t.bind("mouseleave",function(){n.preSelectOff()})}}}),function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",dropzoneClass:"angular-ui-tree-dropzone",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,defaultCollapsed:!1,appendChildOnHover:!0})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,t){(this.scope=e).$element=t,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,n){(this.scope=a).$element=n,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$allowNodeDrop=!1,a.collapsed=!1,a.expandOnHover=!1,a.init=function(e){var t=e[0];a.$treeScope=e[1]?e[1].scope:null,a.$parentNodeScope=t.scope.$nodeScope,a.$modelValue=t.scope.$modelValue[a.$index],a.$parentNodesScope=t.scope,t.scope.initSubNode(a),n.on("$destroy",function(){t.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(e){return a.$parentNodesScope==e.$parentNodesScope},a.isChild=function(e){var t=a.childNodes();return t&&-1<t.indexOf(e)},a.prev=function(){var e=a.index();return 0<e?a.siblings()[e-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return 0<a.childNodesCount()},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(e,t){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(e,t)},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed,a.$treeScope.$callbacks.toggle(a.collapsed,a)},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var e=a.$parentNodeScope;return e?e.depth()+1:1},a.maxSubDepth=function(){return a.$childNodesScope?function e(t){if(!t)return 0;var a,n,o=0,i=t.childNodes();if(!i||0===i.length)return 0;for(n=i.length-1;0<=n;n--)a=1+e(i[n]),o=Math.max(o,a);return o}(a.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,e){(this.scope=a).$element=e,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(e){if(!e.$modelValue)return null;a.$nodesMap[e.$modelValue.$$hashKey]=e},a.destroySubNode=function(e){if(!e.$modelValue)return null;a.$nodesMap[e.$modelValue.$$hashKey]=null},a.accept=function(e,t){return a.$treeScope.$callbacks.accept(e,a,t)},a.beforeDrag=function(e){return a.$treeScope.$callbacks.beforeDrag(e)},a.isParent=function(e){return e.$parentNodesScope==a},a.hasChild=function(){return 0<a.$modelValue.length},a.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},a.removeNode=function(e){var t=a.$modelValue.indexOf(e.$modelValue);return-1<t?(a.safeApply(function(){a.$modelValue.splice(t,1)[0]}),a.$treeScope.$callbacks.removed(e)):null},a.insertNode=function(e,t){a.safeApply(function(){a.$modelValue.splice(e,0,t)})},a.childNodes=function(){var e,t=[];if(a.$modelValue)for(e=0;e<a.$modelValue.length;e++)t.push(a.$nodesMap[a.$modelValue[e].$$hashKey]);return t},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(e){var t=a.maxDepth||a.$treeScope.maxDepth;return 0<t&&a.depth()+e.maxSubDepth()+1>t}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(t,e){(this.scope=t).$element=e,t.$nodesScope=null,t.$type="uiTree",t.$emptyElm=null,t.$dropzoneElm=null,t.$callbacks=null,t.dragEnabled=!0,t.emptyPlaceholderEnabled=!0,t.maxDepth=0,t.dragDelay=0,t.cloneEnabled=!1,t.nodropEnabled=!1,t.dropzoneEnabled=!1,t.isEmpty=function(){return t.$nodesScope&&t.$nodesScope.$modelValue&&0===t.$nodesScope.$modelValue.length},t.place=function(e){t.$nodesScope.$element.append(e),t.$emptyElm.remove()},this.resetEmptyElement=function(){t.$nodesScope.$modelValue&&0!==t.$nodesScope.$modelValue.length||!t.emptyPlaceholderEnabled?t.$emptyElm.remove():e.append(t.$emptyElm)},this.resetDropzoneElement=function(){t.$nodesScope.$modelValue&&0===t.$nodesScope.$modelValue.length||!t.dropzoneEnabled?t.$dropzoneElm.remove():e.append(t.$dropzoneElm)},t.resetEmptyElement=this.resetEmptyElement,t.resetDropzoneElement=this.resetDropzoneElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(l,u){return{restrict:"A",scope:!0,controller:"TreeController",link:function(a,e,t,n){var o,i,r,c={accept:null,beforeDrag:null},s={};angular.extend(s,l),s.treeClass&&e.addClass(s.treeClass),"table"===e.prop("tagName").toLowerCase()?(a.$emptyElm=angular.element(u.document.createElement("tr")),r=0<(i=e.find("tr")).length?angular.element(i).children().length:1e6,o=angular.element(u.document.createElement("td")).attr("colspan",r),a.$emptyElm.append(o)):(a.$emptyElm=angular.element(u.document.createElement("div")),a.$dropzoneElm=angular.element(u.document.createElement("div"))),s.emptyTreeClass&&a.$emptyElm.addClass(s.emptyTreeClass),s.dropzoneClass&&a.$dropzoneElm.addClass(s.dropzoneClass),a.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&(n.resetEmptyElement(),n.resetDropzoneElement())},!0),a.$watch(t.dragEnabled,function(e){"boolean"==typeof e&&(a.dragEnabled=e)}),a.$watch(t.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(a.emptyPlaceholderEnabled=e,n.resetEmptyElement())}),a.$watch(t.nodropEnabled,function(e){"boolean"==typeof e&&(a.nodropEnabled=e)}),a.$watch(t.dropzoneEnabled,function(e){"boolean"==typeof e&&(a.dropzoneEnabled=e,n.resetDropzoneElement())}),a.$watch(t.cloneEnabled,function(e){"boolean"==typeof e&&(a.cloneEnabled=e)}),a.$watch(t.maxDepth,function(e){"number"==typeof e&&(a.maxDepth=e)}),a.$watch(t.dragDelay,function(e){"number"==typeof e&&(a.dragDelay=e)}),c.accept=function(e,t,a){return!(t.nodropEnabled||t.$treeScope.nodropEnabled||t.outOfDepth(e))},c.beforeDrag=function(e){return!0},c.expandTimeoutStart=function(){},c.expandTimeoutCancel=function(){},c.expandTimeoutEnd=function(){},c.removed=function(e){},c.dropped=function(e){},c.dragStart=function(e){},c.dragMove=function(e){},c.dragStop=function(e){},c.beforeDrop=function(e){},c.toggle=function(e,t){},a.$watch(t.uiTree,function(e,t){angular.forEach(e,function(e,t){c[t]&&"function"==typeof e&&(c[t]=e)}),a.$callbacks=c},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(i){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(e,t,a,n){var o={};angular.extend(o,i),o.handleClass&&t.addClass(o.handleClass),e!=n.scope&&(e.$nodeScope=n.scope,n.scope.$handleScope=e)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(_,F,I,N,R,H){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(A,d,t,e){var $,T,S,x,p,P,M,E,U,L,k,a,n,o,i,r,c,s,l,u,f,m,h,D,g,b,O,v,B={},y="ontouchstart"in window,z=null,C=document.body,w=document.documentElement;angular.extend(B,_),B.nodeClass&&d.addClass(B.nodeClass),A.init(e),A.collapsed=!!F.getNodeAttribute(A,"collapsed")||_.defaultCollapsed,A.expandOnHover=!!F.getNodeAttribute(A,"expandOnHover"),A.scrollContainer=F.getNodeAttribute(A,"scrollContainer")||t.scrollContainer||null,A.sourceOnly=A.nodropEnabled||A.$treeScope.nodropEnabled,A.$watch(t.collapsed,function(e){"boolean"==typeof e&&(A.collapsed=e)}),A.$watch("collapsed",function(e){F.setNodeAttribute(A,"collapsed",e),t.$set("collapsed",e)}),A.$watch(t.expandOnHover,function(e){"boolean"!=typeof e&&"number"!=typeof e||(A.expandOnHover=e)}),A.$watch("expandOnHover",function(e){F.setNodeAttribute(A,"expandOnHover",e),t.$set("expandOnHover",e)}),t.$observe("scrollContainer",function(e){"string"==typeof e&&(A.scrollContainer=e)}),A.$watch("scrollContainer",function(e){F.setNodeAttribute(A,"scrollContainer",e),t.$set("scrollContainer",e),M=document.querySelector(e)}),A.$on("angular-ui-tree:collapse-all",function(){A.collapsed=!0}),A.$on("angular-ui-tree:expand-all",function(){A.collapsed=!1}),a=function(e){if((y||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var t,a,n,o,i,r,c,s,l,u=angular.element(e.target);if((t=F.treeNodeHandlerContainerOfElement(u))&&(u=angular.element(t)),a=d.clone(),s=F.elementIsTreeNode(u),l=F.elementIsTreeNodeHandle(u),(s||l)&&!(s&&F.elementContainsTreeNodeHandler(u)||"input"==(n=u.prop("tagName").toLowerCase())||"textarea"==n||"button"==n||"select"==n)){for(g=angular.element(e.target),b=g[0].attributes["ui-tree"];g&&g[0]&&g[0]!==d&&!b;){if(g[0].attributes&&(b=g[0].attributes["ui-tree"]),F.nodrag(g))return;g=g.parent()}A.beforeDrag(A)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),i=F.eventObj(e),$=!0,T=F.dragInfo(A),O=T.source.$treeScope.$id,"tr"===(o=d.prop("tagName")).toLowerCase()?(x=angular.element(I.document.createElement(o)),r=angular.element(I.document.createElement("td")).addClass(B.placeholderClass).attr("colspan",d[0].children.length),x.append(r)):x=angular.element(I.document.createElement(o)).addClass(B.placeholderClass),p=angular.element(I.document.createElement(o)),B.hiddenClass&&p.addClass(B.hiddenClass),S=F.positionStarted(i,d),x.css("height",d.prop("offsetHeight")+"px"),(P=angular.element(I.document.createElement(A.$parentNodesScope.$element.prop("tagName"))).addClass(A.$parentNodesScope.$element.attr("class")).addClass(B.dragClass)).css("width",F.width(d)+"px"),P.css("z-index",9999),(c=(d[0].querySelector(".angular-ui-tree-handle")||d[0]).currentStyle)&&(document.body.setAttribute("ui-tree-cursor",N.find("body").css("cursor")||""),N.find("body").css({cursor:c.cursor+"!important"})),A.sourceOnly&&x.css("display","none"),d.after(x),d.after(p),T.isClone()&&A.sourceOnly?P.append(a):P.append(d),N.find("body").append(P),P.css({left:i.pageX-S.offsetX+"px",top:i.pageY-S.offsetY+"px"}),U={placeholder:x,dragging:P},f(),A.$apply(function(){A.$treeScope.$callbacks.dragStart(T.eventArgs(U,S))}),L=Math.max(C.scrollHeight,C.offsetHeight,w.clientHeight,w.scrollHeight,w.offsetHeight),k=Math.max(C.scrollWidth,C.offsetWidth,w.clientWidth,w.scrollWidth,w.offsetWidth))}}},n=function(e){var t,a,n,o,i,r,c,s,l,u,d,p,f,m,h,g,b,v,y,C,w,_=F.eventObj(e);if(P){if(e.preventDefault(),I.getSelection?I.getSelection().removeAllRanges():I.document.selection&&I.document.selection.empty(),(a=_.pageX-S.offsetX)<0&&(a=0),(n=_.pageY-S.offsetY)<0&&(n=0),L<n+10&&(n=L-10),k<a+10&&(a=k-10),P.css({left:a+"px",top:n+"px"}),M?(r=M.getBoundingClientRect(),i=(o=M.scrollTop)+M.clientHeight,r.bottom<_.clientY&&i<M.scrollHeight&&(m=Math.min(M.scrollHeight-i,10),M.scrollTop+=m),r.top>_.clientY&&0<o&&(h=Math.min(o,10),M.scrollTop-=h)):((i=(o=window.pageYOffset||I.document.documentElement.scrollTop)+(window.innerHeight||I.document.clientHeight||I.document.clientHeight))<_.pageY&&i<L&&(m=Math.min(L-i,10),window.scrollBy(0,m)),o>_.pageY&&(h=Math.min(o,10),window.scrollBy(0,-h))),F.positionMoved(e,S,$),$)return void($=!1);if(s=_.pageX-(I.pageXOffset||I.document.body.scrollLeft||I.document.documentElement.scrollLeft)-(I.document.documentElement.clientLeft||0),l=_.pageY-(I.pageYOffset||I.document.body.scrollTop||I.document.documentElement.scrollTop)-(I.document.documentElement.clientTop||0),angular.isFunction(P.hide)?P.hide():(u=P[0].style.display,P[0].style.display="none"),I.document.elementFromPoint(s,l),p=angular.element(I.document.elementFromPoint(s,l)),(D=F.treeNodeHandlerContainerOfElement(p))&&(p=angular.element(D)),angular.isFunction(P.show)?P.show():P[0].style.display=u,F.elementIsTree(p)?d=p.controller("uiTree").scope:F.elementIsTreeNodeHandle(p)?d=p.controller("uiTreeHandle").scope:F.elementIsTreeNode(p)?d=p.controller("uiTreeNode").scope:F.elementIsTreeNodes(p)?d=p.controller("uiTreeNodes").scope:F.elementIsPlaceholder(p)?d=p.controller("uiTreeNodes").scope:F.elementIsDropzone(p)?(d=p.controller("uiTree").scope,w=!0):p.controller("uiTreeNode")&&(d=p.controller("uiTreeNode").scope),d&&d.$treeScope&&d.$treeScope.$id&&d.$treeScope.$id===O&&S.dirAx)0<S.distX&&(t=T.prev())&&!t.collapsed&&t.accept(A,t.childNodesCount())&&(t.$childNodesScope.$element.append(x),T.moveTo(t.$childNodesScope,t.childNodes(),t.childNodesCount())),S.distX<0&&(T.next()||(c=T.parentNode())&&c.$parentNodesScope.accept(A,c.index()+1)&&(c.$element.after(x),T.moveTo(c.$parentNodesScope,c.siblings(),c.index()+1)));else{if(f=!1,!d)return;if(!d.$treeScope||d.$parent.nodropEnabled||d.$treeScope.nodropEnabled||x.css("display",""),"uiTree"===d.$type&&d.dragEnabled&&(f=d.isEmpty()),"uiTreeHandle"===d.$type&&(d=d.$nodeScope),"uiTreeNode"!==d.$type&&!f&&!w)return void(B.appendChildOnHover&&!T.next()&&E&&((c=T.parentNode()).$element.after(x),T.moveTo(c.$parentNodesScope,c.siblings(),c.index()+1),E=!1));z&&x.parent()[0]!=z.$element[0]&&(z.resetEmptyElement(),z.resetDropzoneElement(),z=null),f?(z=d).$nodesScope.accept(A,0)&&T.moveTo(d.$nodesScope,d.$nodesScope.childNodes(),0):w?(z=d).$nodesScope.accept(A,d.$nodesScope.childNodes().length)&&T.moveTo(d.$nodesScope,d.$nodesScope.childNodes(),d.$nodesScope.childNodes().length):d.dragEnabled()&&(angular.isDefined(A.expandTimeoutOn)&&A.expandTimeoutOn!==d.id&&(R.cancel(A.expandTimeout),delete A.expandTimeout,delete A.expandTimeoutOn,A.$callbacks.expandTimeoutCancel()),d.collapsed&&(!0===A.expandOnHover||angular.isNumber(A.expandOnHover)&&0===A.expandOnHover?(d.collapsed=!1,d.$treeScope.$callbacks.toggle(!1,d)):!1!==A.expandOnHover&&angular.isNumber(A.expandOnHover)&&0<A.expandOnHover&&angular.isUndefined(A.expandTimeoutOn)&&(A.expandTimeoutOn=d.$id,A.$callbacks.expandTimeoutStart(),A.expandTimeout=R(function(){A.$callbacks.expandTimeoutEnd(),d.collapsed=!1,d.$treeScope.$callbacks.toggle(!1,d)},A.expandOnHover))),p=d.$element,g=F.offset(p),y=F.height(p),y-=(C=d.$childNodesScope?d.$childNodesScope.$element:null)?F.height(C):0,v=B.appendChildOnHover?.25*y:F.height(p)/2,b=_.pageY<g.top+v,d.$parentNodesScope.accept(A,d.index())?b?(p[0].parentNode.insertBefore(x[0],p[0]),T.moveTo(d.$parentNodesScope,d.siblings(),d.index())):B.appendChildOnHover&&d.accept(A,d.childNodesCount())?(d.$childNodesScope.$element.prepend(x),T.moveTo(d.$childNodesScope,d.childNodes(),0),E=!0):(p.after(x),T.moveTo(d.$parentNodesScope,d.siblings(),d.index()+1)):!b&&d.accept(A,d.childNodesCount())&&(d.$childNodesScope.$element.append(x),T.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount())))}A.$apply(function(){A.$treeScope.$callbacks.dragMove(T.eventArgs(U,S))})}},o=function(e){var t=T.eventArgs(U,S);e.preventDefault(),m(),R.cancel(A.expandTimeout),A.$treeScope.$apply(function(){H.when(A.$treeScope.$callbacks.beforeDrop(t)).then(function(e){!1!==e&&A.$$allowNodeDrop?(T.apply(),A.$treeScope.$callbacks.dropped(t)):u()}).catch(function(){u()}).finally(function(){p.replaceWith(A.$element),x.remove(),P&&(P.remove(),P=null),A.$treeScope.$callbacks.dragStop(t),A.$$allowNodeDrop=!1,T=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(N.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},i=function(e){A.dragEnabled()&&a(e)},r=function(e){n(e)},c=function(e){A.$$allowNodeDrop=!0,o(e)},s=function(e){o(e)},l={exec:function(e,t){t=t||0,this.cancel(),v=R(e,t)},cancel:function(){R.cancel(v)}},h=function(e){27===e.keyCode&&c(e)},(u=function(){d.bind("touchstart mousedown",function(e){0<A.dragDelay?l.exec(function(){i(e)},A.dragDelay):i(e)}),d.bind("touchend touchcancel mouseup",function(){0<A.dragDelay&&l.cancel()})})(),f=function(){angular.element(N).bind("touchend",c),angular.element(N).bind("touchcancel",c),angular.element(N).bind("touchmove",r),angular.element(N).bind("mouseup",c),angular.element(N).bind("mousemove",r),angular.element(N).bind("mouseleave",s),angular.element(N).bind("keydown",h)},m=function(){angular.element(N).unbind("touchend",c),angular.element(N).unbind("touchcancel",c),angular.element(N).unbind("touchmove",r),angular.element(N).unbind("mouseup",c),angular.element(N).unbind("mousemove",r),angular.element(N).unbind("mouseleave",s),angular.element(N).unbind("keydown",h)}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(s){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(t,e,a,n){var o={},i=n[0],r=n[1],c=n[2];angular.extend(o,s),o.nodesClass&&e.addClass(o.nodesClass),r?(r.scope.$childNodesScope=t).$nodeScope=r.scope:c.scope.$nodesScope=t,t.$treeScope=c.scope,i&&(i.$render=function(){t.$modelValue=i.$modelValue}),t.$watch(function(){return a.maxDepth},function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(function(){return a.nodropEnabled},function(e){void 0!==e&&(t.nodropEnabled=!0)},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(a,n,t){return{nodesData:{},setNodeAttribute:function(e,t,a){if(!e.$modelValue)return null;var n=this.nodesData[e.$modelValue.$$hashKey];n||(n={},this.nodesData[e.$modelValue.$$hashKey]=n),n[t]=a},getNodeAttribute:function(e,t){if(!e.$modelValue)return null;var a=this.nodesData[e.$modelValue.$$hashKey];return a?a[t]:null},nodrag:function(e){return void 0!==e.attr("data-nodrag")&&"false"!==e.attr("data-nodrag")},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:!0===e.$treeScope.cloneEnabled?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,resetParent:function(){this.parent=e.$parentNodesScope},moveTo:function(e,t,a){this.parent=e,this.siblings=t.slice(0);var n=this.siblings.indexOf(this.source);-1<n&&(this.siblings.splice(n,1),this.source.index()<a&&a--),this.siblings.splice(a,0,this.source),this.index=a},parentNode:function(){return this.parent.$nodeScope},prev:function(){return 0<this.index?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return!0===this.source.$treeScope.cloneEnabled},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,t){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:t}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var t=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:t.top+(n.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:t.left+(n.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}},positionStarted:function(e,t){var a={},n=e.pageX,o=e.pageY;return e.originalEvent&&e.originalEvent.touches&&0<e.originalEvent.touches.length&&(n=e.originalEvent.touches[0].pageX,o=e.originalEvent.touches[0].pageY),a.offsetX=n-this.offset(t).left,a.offsetY=o-this.offset(t).top,a.startX=a.lastX=n,a.startY=a.lastY=o,a.nowX=a.nowY=a.distX=a.distY=a.dirAx=0,a.dirX=a.dirY=a.lastDirX=a.lastDirY=a.distAxX=a.distAxY=0,a},positionMoved:function(e,t,a){var n,o=e.pageX,i=e.pageY;if(e.originalEvent&&e.originalEvent.touches&&0<e.originalEvent.touches.length&&(o=e.originalEvent.touches[0].pageX,i=e.originalEvent.touches[0].pageY),t.lastX=t.nowX,t.lastY=t.nowY,t.nowX=o,t.nowY=i,t.distX=t.nowX-t.lastX,t.distY=t.nowY-t.lastY,t.lastDirX=t.dirX,t.lastDirY=t.dirY,t.dirX=0===t.distX?0:0<t.distX?1:-1,t.dirY=0===t.distY?0:0<t.distY?1:-1,n=Math.abs(t.distX)>Math.abs(t.distY)?1:0,a)return t.dirAx=n,void(t.moving=!0);t.dirAx!==n?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),0!==t.dirX&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),0!==t.dirY&&t.dirY!==t.lastDirY&&(t.distAxY=0)),t.dirAx=n},elementIsTreeNode:function(e){return void 0!==e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return void 0!==e.attr("ui-tree-handle")},elementIsTree:function(e){return void 0!==e.attr("ui-tree")},elementIsTreeNodes:function(e){return void 0!==e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(t.placeholderClass)},elementIsDropzone:function(e){return e.hasClass(t.dropzoneClass)},elementContainsTreeNodeHandler:function(e){return 1<=e[0].querySelectorAll("[ui-tree-handle]").length},treeNodeHandlerContainerOfElement:function(e){return function(e,t){if(void 0===t)return null;var a=t.parentNode,n="function"==typeof a.setAttribute&&a.hasAttribute(e)?a:null;for(;a&&"function"==typeof a.setAttribute&&!a.hasAttribute(e);){if(a=a.parentNode,(n=a)===document.documentElement){n=null;break}0}return n}("ui-tree-handle",e[0])}}}])}(),angular.module("ui.select.pagination",[]).directive("uiSelectChoices",["$timeout","$parse","$compile","$document","$filter",function(r,c,e,t,l){return function(s,e,t){var n=e[0],o=!0;if(t.allChoices){s.pagingOptions={allOptions:s.$eval(t.allChoices)},t.refresh="addMoreItems()";var i=c(t.refresh);e.bind("scroll",function(e){var t=n.offsetHeight-n.scrollHeight,a=n.scrollTop;if(80<=Math.abs(a/t*100)&&o){o=!1,e.preventDefault(),e.stopPropagation();r(function(){s.addingMore=!0,i(s,{$event:e}),o=!0},100)}});var a=s.$on("uis:close",function(){var e=s.$select.pagingOptions||{};e.filteredItems=void 0,e.page=0});s.addMoreItems=function(e){var t=s.$select,a=s.pagingOptions.allOptions,n=[],o=t.search,i=t.pagingOptions=t.pagingOptions||{page:0,pageSize:20,items:t.items};0===i.page&&(i.items.length=0),i.originalAllItems||(i.originalAllItems=s.pagingOptions.allOptions);var r=o&&i.prevSearch&&o==i.prevSearch;i.filteredItems&&r&&(a=i.filteredItems),(i.prevSearch=o)&&0<o.length&&i.items.length<a.length&&!r&&(i.filteredItems,i.filteredItems=void 0,100<(n=l("filter")(i.originalAllItems,o)).length?(i.filteredItems||(i.page=0,i.items.length=0),i.page=0,i.items.length=0,a=i.filteredItems=n):(a=n,i.items.length=0,i.filteredItems=void 0)),i.page++,void 0!==a&&(i.page++,n=i.page*i.pageSize<a.length?a.slice(i.items.length,i.page*i.pageSize):a);for(var c=0;c<n.length;c++)i.items.push(n[c]);s.calculateDropdownPos(),s.$broadcast("uis:refresh"),e&&e()},s.$on("$destroy",function(){e.off("scroll"),a()})}}}]).filter("propsFilter",function(){return function(e,i){var r=[];if(angular.isArray(e)){var c=Object.keys(i);e.forEach(function(e){if(e){for(var t=!1,a=0;a<c.length;a++){var n=c[a],o=i[n].toLowerCase();if(-1!==e[n].toString().toLowerCase().indexOf(o)){t=!0;break}}t&&r.push(e)}})}else r=e;return r}}),angular.module("billinguiApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ui.tree","ui.select","ui.select.pagination","paclient","pascalprecht.translate","ngFileUpload","ui.bootstrap","ngCsv","chart.js","colorpicker.module","autocomplete","ngProgress","oitozero.ngSweetAlert","angular-timezone-selector","LocalStorageModule"]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"data/locale-",suffix:".json"}),e.preferredLanguage("en")}]).constant("DashboardConfig",{default:{topFilter:"All"}}).config(["$stateProvider","$urlRouterProvider","ChartJsProvider",function(e,t,a){a.setOptions({colors:["#803690","#00ADF9","#DCDCDC","#46BFBD","#FDB45C","#949FB1","#4D5360"]}),t.otherwise("/"),e.state("app",{url:"/",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/main.html",controller:"DashboardCtrl"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("accountList",{url:"/accounts/:filter",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/accounts.html",controller:"AccountsController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("newAccount",{url:"/account/new",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/accountNew.html",controller:"NewAccountController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("accountView",{url:"/account/:id",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/accountView.html",controller:"AccountController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("pinSearch",{url:"/pins/pinsearch",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/pinsearch.html",controller:"PinSearchController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("sr",{url:"/system/salesreport",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/sr.html",controller:"SrController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("sc",{url:"/system/summary",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/scc.html",controller:"SccController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("dfr",{url:"/system/dfr",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/dfrlist.html",controller:"DFRController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("ccontrol",{url:"/system/msisdncache",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/ccontrol.html",controller:"MsisdnCacheController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("apool",{url:"/system/apools",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/apools.html",controller:"AccountPoolController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("commLinks",{url:"/system/commlinks",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/commlinks.html",controller:"CommLinkController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("pinBatchList",{url:"/pins/pins",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/pinbatches.html",controller:"PinBatchListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("providerList",{url:"/providers",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/providers.html",controller:"ProviderController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("pTab",{url:"/system/price-tables",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/pricetables.html",controller:"PriceTableController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("batchView",{url:"/pins/:id",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/pins.html",controller:"PinListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("supportDash",{url:"/support/",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/supportdash.html",controller:"SupportDashController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("ticketList",{url:"/tickets/",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/tickets.html",controller:"TicketListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("ticketView",{url:"/tickets/:id",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/ticketView.html",controller:"TicketController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("tList",{url:"/topuplogs",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/topuplog.html",controller:"TopupListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("ftList",{url:"/ftconsole",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/ftconsole.html",controller:"FtconsoleController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("provMaps",{url:"/provmap",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/mapping.html",controller:"MappingController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("transactionList",{url:"/transactions",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/transactions.html",controller:"TransactionListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("transactionView",{url:"/transaction/:id/:transactions",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/transactionView.html",controller:"TransactionController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("loginList",{url:"/loginlogs",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/loginlogs.html",controller:"LoginListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("userList",{url:"/users",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/users.html",controller:"UsersController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("rateList",{url:"/rates",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/rates.html",controller:"RateListController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("credsList",{url:"/credentials",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/credentials.html",controller:"CredentialsController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("settingList",{url:"/settings",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/settings.html",controller:"SettingController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("apiSettingList",{url:"/apisettings",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/apisettings.html",controller:"ApiSettingsController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("newAgent",{url:"/account/:id/accounts/new",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/agentNew.html",controller:"NewAgentController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("newItem",{url:"/account/:account/items/new",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/itemNew.html",controller:"NewItemController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("supportPanelView",{url:"/support-logs/:id",views:{sidebar:{templateUrl:"views/partials/sidebar.html",controller:"SidebarCtrl"},content:{templateUrl:"views/partials/supportPanel.html",controller:"ItemsController"},header:{templateUrl:"views/partials/header.html",controller:"SidebarCtrl"},modals:{templateUrl:"views/partials/modals.html",controller:"ModalCtrl"},footerjs:{templateUrl:"views/partials/footerjs_dashboard.html"}}}).state("logout",{url:"/logout",views:{login:{templateUrl:"views/partials/login.html",controller:"LogoutController"},footerjs:{templateUrl:"views/partials/footerjs_login.html"}}}).state("login",{url:"/login",views:{login:{templateUrl:"views/partials/login.html",controller:"LoginCtrl"},footerjs:{templateUrl:"views/partials/footerjs_login.html",controller:"SidebarCtrl"}}})}]).directive("datetimepickerNeutralTimezone",function(){return{restrict:"A",priority:1,require:"ngModel",link:function(e,t,a,n){n.$formatters.push(function(e){var t=new Date(Date.parse(e));return t=new Date(t.getTime()+6e4*t.getTimezoneOffset())}),n.$parsers.push(function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset())})}}}).config(["$provide",function(e){e.decorator("localStorageService",["$delegate",function(n){var o=n.get,i=n.set;return n.get=function(e){if(o(e)){var t=o(e);if(t.expire){var a=Date.now();return t.expire<a?(n.remove(e),null):t.data}return t}return null},n.set=function(e,t,a){var n=null;angular.isNumber(a)?(n=Date.now()+36e5*a,i(e,{data:t,expire:n})):i(e,t)},n}])}]),angular.module("billinguiApp").controller("LoginCtrl",["$scope","api","$location","$rootScope","$window","ngProgressFactory","$interval","localStorageService",function(t,n,a,e,o,i,r,c){n.isAuthed()&&a.path("/"),t.checkEvt=function(e){console.log("KeyEVT"),13===e.which&&(console.log("ENTER=EVT"),t.authenticate())},t.initShort=function(){return new Promise(function(t,a){n.isAuthed()?n._get("/accounts/names").then(function(e){return c.set("acnames",e),n._get("/countries")}).then(function(e){return c.set("clist",e),n._get("/currencies")}).then(function(e){return c.set("currencies",e),n._get("/rates")}).then(function(e){c.set("rates",e),t()}).catch(function(e){console.log("GOT e in LOGIN module (catch)",e),a()}):a()})},t.initLoginProcesses=function(){return new Promise(function(t,a){n.isAuthed()?n._get("/accounts/names").then(function(e){return c.set("acnames",e),n._get("/countries")}).then(function(e){return c.set("clist",e),n._get("/currencies")}).then(function(e){return c.set("currencies",e),n._get("/rates")}).then(function(e){return c.set("rates",e),n.getDashboard()}).then(function(e){return c.set("dashMain",e),n.getCoreDashboard("daily")}).then(function(e){return c.set("dashcore_daily",e),n._get("/providers")}).then(function(e){c.set("providers",e),t()}).catch(function(e){console.log("GOT e in LOGIN module (catch)",e),a()}):a()})},t.authenticate=function(){t.progressbar=i.createInstance(),t.progressbar.start();var e=t.user;n.login(e).then(function(e){return n.setProfile(e),"master"==(t.prf=e).access_level?t.initLoginProcesses():t.initShort()}).then(function(e){t.progressbar.complete(),"master"==t.prf.access_level?a.path("/dashboard"):a.path("/topuplogs")}).catch(function(e){"401"==e.status&&(t.err=!0,t.user.username="",t.user.password="")})}}]),angular.module("billinguiApp").controller("LogoutController",["$window","$rootScope","$interval","localStorageService",function(e,t,a,n){n.remove("profile"),n.remove("token"),n.remove("acnames"),n.remove("clist"),n.remove("currencies"),n.remove("rates"),n.remove("providers"),n.remove("dashMain"),n.remove("dashcore_daily"),a.cancel(t.uintAcNames),a.cancel(t.uintClist),a.cancel(t.uintCurList),a.cancel(t.uintRateList),a.cancel(t.uintProvList),a.cancel(t.uintReauthAction),e.location.href="/"}]),angular.module("billinguiApp").controller("SidebarCtrl",["$scope","api","$location","$uibModal","$timeout","$translate","$rootScope","$window","$interval","localStorageService",function(t,a,e,n,o,i,r,c,s,l){a.isAuthed()?(a.getProfile().then(function(e){void 0!==(t.profile=e).avatar?t.avatarUrl="/img/"+e.avatar:t.avatarUrl="images/placeholders/avatars/avatar.png",t.lang=i.proposedLanguage()||i.use()}),r.updateAcNames=function(){a._get("/accounts/names").then(function(e){l.set("acnames",e)})},r.updateCountryList=function(){a._get("/countries").then(function(e){l.set("clist",e)})},r.updateCurrencies=function(){a._get("/currencies").then(function(e){l.set("currencies",e)})},r.updateRates=function(){a._get("/rates").then(function(e){l.set("rates",e)})},r.updateProviders=function(){a._get("/providers").then(function(e){l.set("providers",e)})},r.updateDash=function(){a.getDashboard().then(function(e){l.set("dashMain",e)})},r.updateCoreDashDaily=function(){a.getCoreDashboard("daily").then(function(e){l.set("dashcore_daily",e,.2),r.$emit("update_core_dash_daily",e)})},t.initIntervals=function(){console.log("BOOBOOINRI"),r.uintAcNames&&s.cancel(r.uintAcNames),r.uintAcNames=s(r.updateAcNames,9e5),r.uintClist&&s.cancel(r.uintClist),r.uintClist=s(r.updateCountryList,864e5),r.uintCurList&&s.cancel(r.uintCurList),r.uintCurList=s(r.updateCurrencies,864e5),r.uintRateList&&s.cancel(r.uintRateList),r.uintRateList=s(r.updateRates,864e5),r.uintProvList&&s.cancel(r.uintProvList),r.uintProvList=s(r.updateProviders,18e5),r.uintReauthAction&&s.cancel(r.uintReauthAction),r.uintReauthAction=s(a.reauth,36e5),r.uintdcore_Daily&&s.cancel(r.uintdcore_Daily),r.uintdcore_Daily=s(r.updateCoreDashDaily,9e5),r.uintdashMain&&s.cancel(r.uintdashMain),r.uintdashMain=s(r.updateDash,9e5)},t.setLang=function(){i.use(t.lang)},t.editProfile=function(){a.getUser(t.profile.main_account,t.profile._id).then(function(e){t.user=e,t.modal=n.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-user.html",controller:"SidebarModalController",scope:t}),t.modal.result.then(function(e){o(function(){a.updateProfile().then(function(e){t.profile=e})})},function(){console.log("but i waz dizmizeddd")})})},t.initIntervals()):e.path("/login")}]),angular.module("billinguiApp").controller("SidebarModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,a,n,e,o){a.load=function(){console.log("ARRRGGGH"),console.log($(".active"))},a.newUserCancel=function(){t.dismiss()},a.editUserOK=function(){var e={};for(key in a.user)"main_account"!=key&&"__v"!=key&&"_id"!=key&&"createdAt"!=key&&"last_login"!=key&&"updatedAt"!=key&&"password"!=key&&"passwordconfirm"!=key&&(e[key]=a.user[key]);a.user.password&&a.user.password==a.user.passwordconfirm&&(e.password=a.user.password),n.editUser(a.profile.main_account,a.profile._id,e).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})},a.uploadAvatar=function(t,e){a.f=t,a.errFile=e&&e[0],t&&(t.upload=o.upload({url:"/v1/accounts/"+a.profile.main_account+"/users/"+a.profile._id+"/avatar?token="+a.profile.token,data:{userPhoto:t}}),t.upload.then(function(e){$timeout(function(){t.result=e.data})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},a.load()}]),angular.module("billinguiApp").controller("DashboardCtrl",["$scope","api","$location","ngProgressFactory","$interval","$uibModal","SweetAlert","$rootScope","localStorageService","DashboardConfig",function(g,n,o,e,t,b,a,v,i,r){if(g.progressbar=e.createInstance(),console.log(g.progressbar),g.progressbar.start(),!n.isAuthed())return g.progressbar.complete(),void o.path("/login");function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}function s(e){Object.assign(this,{suc_count:0,fail_count:0,tot_count:0,suc_amount:0,fail_amount:0,tot_amount:0},e)}g.load=function(){$("#home").addClass("open").next().slideDown(250),setTimeout(c,250),$("#appdash").css("active"),g.progressbar.complete()},n.getProfile().then(function(e){return"user"==e.account_type&&o.path("/account/"+e.main_account),g.profile=e,g.load(),!1}).then(function(e){return g.accounts={},g.account_names=i.get("acnames"),i.get("dashMain")}).then(function(e){var a;if(g.dash_data=e,g.providerStr="default",g.topStr=r.default.topFilter,g.wallet=[],e.balances.forEach(function(e){g.wallet.contains(e._id)||null!==e._id&&g.wallet.push(e._id)}),g.balance=[],g.wallet.forEach(function(t){var a={};a.currency=t,a.amount=0,a.count=0;var n=[];e.balances.forEach(function(e){t==e._id&&(a.amount+=e.totalAmmount,n.contains(e.account_name)||n.push(e.account_name))}),a.count=n.length,g.balance.push(a)}),g.countries=[],g.cdata=[],e.top5_countries_topup_amount.forEach(function(e){g.countries.push(e._id);var t=e.amount.toFixed(2);g.cdata.push(t)}),g.cco_labels=[],g.cco_data=[],e.top5_countries_topup_count.forEach(function(e){var t;t=null==e._id?"No Country":e._id,g.cco_labels.push(t),g.cco_data.push(e.count)}),g.cca_labels=[],g.cca_data=[],e.top5_accounts_topup_amount.forEach(function(e){if(console.log("lineId",e,e._id),void 0!==g.account_names)var t=g.account_names[e._id];else t="Unknown Account";g.cca_labels.push(t),g.cca_data.push(e.amount.toFixed(2))}),g.ccc_labels=[],g.ccc_data=[],e.top5_accounts_topup_count.forEach(function(e){if(void 0!==g.account_names)var t=g.account_names[e._id];else t="Unknown Account";g.ccc_labels.push(t),g.ccc_data.push(e.count)}),g.coc_labels=[],g.coc_data=[],e.top5_operations_bycode.forEach(function(e){var t;t=null==e._id?"Unknown Code":e._id,g.coc_labels.push(t),g.coc_data.push(e.count),a+=e.count}),0<e.total_operations_count-a){var t=e.total_operations_count-a;g.coc_labels.push("Other"),g.coc_data.push(t)}var n=i.get("providers");return null==n&&o.path("/logout"),n}).then(function(e){return g.providers=e.providers,g.changeMode("daily"),i.get("currencies")}).then(function(e){return v.currencies=[],e.forEach(function(e){v.currencies[e.symbol]=e.name}),i.get("clist")}).then(function(e){v.countries=e}).catch(function(e){console.log(e)}),g.setDateSelectOptions=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear(),o=new Date(n,a-1,1).getDay(),i=Math.ceil((t+o)/7);g.year_sel=n.toString(),g.month_sel=a.toString(),g.week_sel=i.toString(),g.day_sel=t.toString(),g.selectedDate=g.year_sel+"-"+g.month_sel+"-"+g.week_sel+"-"+g.day_sel},g.changeMode=function(e){function t(e){var t=this;this.updateListeners=[],this.prepare(e).then(function(){t.isCustom?e.calculateDashboardCoreByCustomTime():e.calculateDashboardCore(),y()}),this.destroy=function(){this.updateListeners.forEach(function(e){e.call()})}}function a(e){t.call(this,e)}function n(e){t.call(this,e)}function o(e){t.call(this,e)}function i(e){t.call(this,e)}function r(e){t.call(this,e)}function c(e){t.call(this,e)}function s(e){t.call(this,e)}function l(e){t.call(this,e)}function u(e){t.call(this,e)}function d(e){t.call(this,e)}function p(e){t.call(this,e)}function f(e){t.call(this,e)}function m(){return b.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-select-date.html",controller:"DateSelectController",scope:g}).result.catch(function(){console.log("cancel")})}a.prototype.prepare=function(e){return e.tex="Today",Promise.resolve(!0)},n.prototype.prepare=function(a){return a.tex="Past 24 hours",this.updateListeners.push(v.$on("update_core_dash_daily",function(e,t){console.log("Update Daily"),a.calculateDashboardCore()})),Promise.resolve(!0)},o.prototype.prepare=function(e){return e.tex="This Week",Promise.resolve(!0)},i.prototype.prepare=function(e){return e.tex="Past 7 days",Promise.resolve(!0)},r.prototype.prepare=function(e){return e.tex="This Month",Promise.resolve(!0)},c.prototype.prepare=function(e){return e.tex="Past 30 days",Promise.resolve(!0)},s.prototype.prepare=function(e){return e.tex="This Year",Promise.resolve(!0)},l.prototype.prepare=function(e){return e.tex="Past 12 months",Promise.resolve(!0)},u.prototype.prepare=function(n){var o=this;return new Promise(function(a,e){n.selectNum=0,n.sel_date="Day",n.setDateSelectOptions(),n.yearlist=[];for(var t=2017;t<=n.year_sel;t++)n.yearlist[t-2017]=t.toString();n.monthlist=["1","2","3","4","5","6","7","8","9","10","11","12"],n.weeklist=[],n.daylist=[],days_of_month=new Date(n.year_sel,n.month_sel,0).getDate();for(t=0;t<days_of_month;t++)n.daylist[t]=(t+1).toString();m().then(function(e){if(e){var t=(n.selectedDate=e).split("-");o.isCustom=!0,t[0]==n.year_sel&&t[1]==n.month_sel&&t[3]==n.day_sel&&(o.isCustom=!1,n.mode="today",n.tex="Today"),a()}})})},d.prototype.prepare=function(n){var o=this;return new Promise(function(a,e){n.selectNum=1,n.sel_date="Week",n.setDateSelectOptions(),n.yearlist=[];for(var t=2017;t<=n.year_sel;t++)n.yearlist[t-2017]=t.toString();n.monthlist=["1","2","3","4","5","6","7","8","9","10","11","12"],n.weeklist=["1","2","3","4","5"],n.daylist=[],m().then(function(e){if(e){o.isCustom=!0;var t=(n.selectedDate=e).split("-");t[0]==n.year_sel&&t[1]==n.month_sel&&t[2]==n.week_sel&&(o.isCustom=!1,n.mode="this_week",n.tex="This Week"),a()}})})},p.prototype.prepare=function(n){var o=this;return new Promise(function(a,e){n.selectNum=2,n.sel_date="Month",n.setDateSelectOptions(),n.yearlist=[];for(var t=2017;t<=n.year_sel;t++)n.yearlist[t-2017]=t.toString();n.monthlist=["1","2","3","4","5","6","7","8","9","10","11","12"],n.weeklist=[],n.daylist=[],m().then(function(e){if(e){o.isCustom=!0;var t=(n.selectedDate=e).split("-");t[0]==n.year_sel&&t[1]==n.month_sel&&(o.isCustom=!1,n.mode="this_month",n.tex="This Month"),a()}})})},f.prototype.prepare=function(n){var o=this;return new Promise(function(a,e){n.selectNum=3,n.sel_date="Year",n.setDateSelectOptions(),n.yearlist=[];for(var t=2017;t<=n.year_sel;t++)n.yearlist[t-2017]=t.toString();n.monthlist=[],n.weeklist=[],n.daylist=[],m().then(function(e){if(e){var t=(n.selectedDate=e).split("-");o.isCustom=!0,t[0]==n.year_sel&&(o.isCustom=!1,n.mode="this_year",n.tex="This Year"),a()}})})};var h={today:a,daily:n,this_week:o,weekly:i,this_month:r,monthly:c,this_year:s,yearly:l,custom_day:u,custom_week:d,custom_month:p,custom_year:f};g.modeObj&&g.modeObj.destroy(),h[g.mode=e]&&(g.modeObj=new h[e](g))},g.calculateDashboardCoreByCustomTime=function(){n.getCoreDashboardByCustomTime(g.mode,g.selectedDate).then(function(e){if(null!=e){switch(strlist=g.selectedDate.split("-"),g.mode){case"custom_day":g.tex=strlist[0]+"-"+strlist[1]+"-"+strlist[3]+"(Custom Day)";break;case"custom_week":g.tex=strlist[0]+"-"+strlist[1]+"-"+strlist[2]+"(Custom Week)";break;case"custom_month":g.tex=strlist[0]+"-"+strlist[1]+"(Custom Month)";break;case"custom_year":g.tex=strlist[0]+"(Custom Year)"}g.db=e,g.providerStr="default",g.TopList=["All","Top5","Top10"],g.showtransflag="default",g.config={autoHideScrollbar:!1,theme:"light",advanced:{updateOnContentResize:!0},setHeight:350,scrollInertia:0},g.showDashboard(e,r.default.topFilter)}else a.swal("Oops!","No data was found","error")})},g.calculateDashboardCore=function(){var e="dashcore_"+g.mode,t=i.get(e);if(t){var a=t;g.db=a,g.providerStr="default",g.TopList=["All","Top5","Top10"],g.showtransflag="default",g.config={autoHideScrollbar:!1,theme:"light",advanced:{updateOnContentResize:!0},setHeight:350,scrollInertia:0},g.showDashboard(a,r.default.topFilter)}else n.getCoreDashboard(g.mode).then(function(e){null!=e&&(g.db=e,g.providerStr="default",g.TopList=["All","Top5","Top10"],g.showtransflag="default",g.config={autoHideScrollbar:!1,theme:"light",advanced:{updateOnContentResize:!0},setHeight:350,scrollInertia:0},g.showDashboard(e,r.default.topFilter))})},g.changedProductType=function(e){g.showtransflag="producttype",g.productType=e,g.showDashboard(g.db,g.topStr)},g.changedProvider=function(e){g.showtransflag="provider",g.providerStr=e,g.showDashboard(g.db,g.topStr)},g.changedCountry=function(e){g.providerStr="default",g.countryStr=e,g.showtransflag="country",g.showDashboard(g.db,g.topStr)},g.changedDestination=function(e){g.providerStr="default",g.destStr=e,g.showtransflag="destination",g.showDashboard(g.db,g.topStr)},g.changedAgent=function(t){g.providerStr="default",g.agentID=t,g.showtransflag="agent",g.db.top10_accounts.forEach(function(e){e._id===t&&n.getAccount(e._id).then(function(e){null!==e?e.wallets.forEach(function(e){!0===e.primary&&(g.agentCur=e.currency,g.showDashboard(g.db,g.topStr))}):console.log("acc is null")})})},g.changeTransCount=function(){g.TransCountByCur={},g.wallet.forEach(function(t){void(g.TransCountByCur[t]=0)!==g.db.transCount_by_currency&&g.db.transCount_by_currency.forEach(function(e){t==e._id&&(g.TransCountByCur[t]=e.count)})}),console.log(g.topStr,g.balance,g.TransCountByCur)},g.changedTopCount=function(e){g.showtransflag="default",g.providerStr="default",g.topStr=e,g.showDashboard(g.db,e)},g.changedCurrency=function(e){g.providerStr="default",g.currency=e},g.topDestinations=function(e){g.destinationList=[],void 0!==e.top10_destinations&&e.top10_destinations.forEach(function(e){var t=e._id.country+"-"+e._id.operator;g.destinationList.contains(t)||g.destinationList.push(t)})},g.topCountries=function(e){g.countryList=[],void 0!==e.top10_countries&&e.top10_countries.forEach(function(e){g.countryList.contains(e._id)||g.countryList.push(e._id)})},g.topAccounts=function(e){g.accountList=e.top10_accounts;var t=g.accountList.map(function(e){return e._id});g.accountWallets={},n.getAccountsWallet(t).then(function(e){e.forEach(function(e){g.accountWallets[e._id]=e.wallets})})},g.changeTCTable=function(r,e){var c,t=g.showtransflag;if("default"===t){var a=r.top10_accounts;c="Top5"==e?(accountIDs=a.slice(0,5).map(function(e){return e._id}),new AccountTopupTransFilter(t,accountIDs)):"Top10"==e?(accountIDs=a.slice(0,10).map(function(e){return e._id}),new AccountTopupTransFilter(t,accountIDs)):new CountryTopupTransFilter(t)}else"country"===t?c=new CountryTopupTransFilter(t,g.countryStr):"destination"===t?c=new CountryTopupTransFilter(t,g.destStr):"agent"===t?c=new AccountTopupTransFilter(t,g.agentID):"provider"===t?c=new CountryTopupTransFilter(t,g.providerStr):"producttype"===t&&(c=new CountryTopupTransFilter(t,g.productType));var n=g.countryList;"destination"===t?n=[g.destStr.split("-")[0]]:"country"===t&&(n=[g.countryStr]),g.topupCountry=[],n.forEach(function(e){var t,a,n,o,i=(t=r.stats,a=c,n=e,o={},t.forEach(function(e){a.filter(e).forEach(function(e){if(e.country==n){o[e.currency]||(o[e.currency]=new s({country:n}));var t=o[e.currency];"RECHARGE_COMPLETE"===e.code?(t.suc_count+=e.count,t.suc_amount+=e.amount):(t.fail_count+=e.count,t.fail_amount+=e.amount),t.cur=e.currency,t.tot_count+=e.count,t.tot_amount+=e.amount}})}),Object.values(o));g.topupCountry=g.topupCountry.concat(i)})},g.changeTDATable=function(r,e){var c,t=g.showtransflag;if("default"===t){var a=r.top10_accounts;c="Top5"==e?(accountIDs=a.slice(0,5).map(function(e){return e._id}),new AccountTopupTransFilter(t,accountIDs)):"Top10"==e?(accountIDs=a.slice(0,10).map(function(e){return e._id}),new AccountTopupTransFilter(t,accountIDs)):new CountryTopupTransFilter(t)}else"country"===t?c=new CountryTopupTransFilter(t,g.countryStr):"destination"===t?c=new CountryTopupTransFilter(t,g.destStr):"agent"===t?c=new AccountTopupTransFilter(t,g.agentID):"provider"===t?c=new CountryTopupTransFilter(t,g.providerStr):"producttype"===t&&(c=new CountryTopupTransFilter(t,g.productType));var n=g.destinationList;"country"==t?n.filter(function(e){return e.split("-")[0]===g.countryStr}):"destination"==t&&(n=[g.destStr]),g.topupDestination_by_Amount=[],n.forEach(function(e){var t,a,n,o,i=(t=r.stats,a=c,n=e,o={},t.forEach(function(e){a.filter(e).forEach(function(e){if(e.country+"-"+e.operator_name===n){o[e.currency]||(o[e.currency]=new s({destination:n}));var t=o[e.currency];"RECHARGE_COMPLETE"===e.code?(t.suc_count+=e.count,t.suc_amount+=e.amount):(t.fail_count+=e.count,t.fail_amount+=e.amount),t.cur=e.currency,t.tot_count+=e.count,t.tot_amount+=e.amount}})}),Object.values(o));g.topupDestination_by_Amount=g.topupDestination_by_Amount.concat(i)})},g.changeTurnoverTable=function(e,t){var a,n=g.showtransflag,o=e.top10_accounts;"default"===n?a="Top5"==t?(o=o.slice(0,5),accountIDs=o.map(function(e){return e._id}),new AccountPaidTransFilter(n,accountIDs)):"Top10"==t?(o=o.slice(0,10),accountIDs=o.map(function(e){return e._id}),new AccountPaidTransFilter(n,accountIDs)):new AccountPaidTransFilter(n):"country"===n?a=new AccountPaidTransFilter(n,g.countryStr):"destination"===n?a=new AccountPaidTransFilter(n,g.destStr):"agent"===n?a=new AccountPaidTransFilter(n,g.agentID):"provider"===n?a=new AccountPaidTransFilter(n,g.providerStr):"producttype"===n&&(a=new AccountPaidTransFilter(n,g.productType));var i={};e.stats.forEach(function(e){a.filter(e).forEach(function(e){i[e._id]||(i[e._id]={_id:e._id,account_name:e.account_name,parent:"",suc_count:0,fail_count:0,tot_count:0,suc_amount:0,fail_amount:0,tot_amount:0}),topupObj=i[e._id],"RECHARGE_COMPLETE"===e.code?(topupObj.suc_count+=e.count,topupObj.suc_amount+=e.amount):(topupObj.fail_count+=e.count,topupObj.fail_amount+=e.amount),topupObj.parent=e.parentname,topupObj.cur=e.currency,topupObj.tot_count+=e.count,topupObj.tot_amount+=e.amount})}),g.paidAccounts=Object.values(i).sort(function(e,t){return t.tot_count-e.tot_count})},g.changeTCPTable=function(e,t){var a,n=g.showtransflag;if("default"===n){var o=e.top10_accounts;a="Top5"==t?(accountIDs=o.slice(0,5).map(function(e){return e._id}),new AccountPaidTransFilter(n,accountIDs)):"Top10"==t?(accountIDs=o.slice(0,10).map(function(e){return e._id}),new AccountPaidTransFilter(n,accountIDs)):new CountryPaidTransFilter(n)}else"country"===n?a=new CountryPaidTransFilter(n,g.countryStr):"destination"===n?a=new CountryPaidTransFilter(n,g.destStr):"agent"===n?a=new AccountPaidTransFilter(n,g.agentID):"provider"===n?a=new CountryPaidTransFilter(n,g.providerStr):"producttype"===n&&(a=new CountryPaidTransFilter(n,g.productType));g.tcpItems=[],e.stats.forEach(function(e){a.filter(e).forEach(function(t){var e={count:0,amount:0},a=!1;"RECHARGE_COMPLETE"===t.code&&(g.tcpItems.some(function(e){if(e.currency===t.currency&&e.operator===t.operator_name&&e.country===t.country&&e.tag===t.tag)return a=!0,e.count+=t.count,e.amount+=t.amount,!0}),a||(e.currency=t.currency,e.operator=t.operator_name,e.country=t.country,e.tag=t.tag,e.count=t.count,e.amount=t.amount,g.tcpItems.push(e)))})}),g.tcpCount=g.tcpItems.length},g.changeTCPGraph=function(e,t){g.tcpg={},g.tcpg.labels=[],g.tcpg.series=[],g.tcpg.data=[],g.tcpg.options={legend:{display:!0}},e.stats.forEach(function(e){g.tcpg.labels.push(g.formatTime(e.ts,g.mode))});var o,a=g.showtransflag;if("default"===a){var n=e.top10_accounts;o="Top5"==t?(accountIDs=n.slice(0,5).map(function(e){return e._id}),new AccountTopupTransFilter(a,accountIDs)):"Top10"==t?(accountIDs=n.slice(0,10).map(function(e){return e._id}),new AccountTopupTransFilter(a,accountIDs)):new CountryTopupTransFilter(a)}else"country"===a?o=new CountryTopupTransFilter(a,g.countryStr):"destination"===a?o=new CountryTopupTransFilter(a,g.destStr):"agent"===a?o=new AccountTopupTransFilter(a,g.agentID):"provider"===a?o=new CountryTopupTransFilter(a,g.providerStr):"producttype"===a&&(o=new CountryTopupTransFilter(a,g.productType));var i=g.providerList;"provider"===g.showtransflag&&(i=[g.providerStr]),i.forEach(function(a,n){g.tcpg.data[n]=[],g.tcpg.series[n]=a,e.stats.forEach(function(e){var t=0;o.filter(e).forEach(function(e){e.tag===a&&"RECHARGE_COMPLETE"===e.code&&(t+=e.count)}),g.tcpg.data[n].push(t)})})},g.changeTransByAll=function(e,t,a){var n;if(g.ov={},g.ov.suc={},g.ov.fail={},g.ov.suc.amount={},g.ov.suc.count={},g.ov.suc.perc={},g.ov.fail.amount={},g.ov.fail.count={},g.ov.fail.perc={},g.balances2.forEach(function(e){g.ov.suc.amount[e]=0,g.ov.suc.count[e]=0,g.ov.suc.perc[e]=0,g.ov.fail.amount[e]=0,g.ov.fail.count[e]=0,g.ov.fail.perc[e]=0}),"default"===(a=g.showtransflag)){var o=e.top10_accounts;n="Top5"==t?(accountIDs=o.slice(0,5).map(function(e){return e._id}),new AccountPaidTransFilter(a,accountIDs)):"Top10"==t?(accountIDs=o.slice(0,10).map(function(e){return e._id}),new AccountPaidTransFilter(a,accountIDs)):new CountryPaidTransFilter(a)}else"country"===a?n=new CountryPaidTransFilter(a,g.countryStr):"destination"===a?n=new CountryPaidTransFilter(a,g.destStr):"agent"===a?n=new AccountPaidTransFilter(a,g.agentID):"provider"===a?n=new CountryPaidTransFilter(a,g.providerStr):"producttype"===a&&(n=new CountryPaidTransFilter(a,g.productType));e.stats.forEach(function(e){n.filter(e).forEach(function(e){"RECHARGE_COMPLETE"===e.code?(g.ov.suc.amount[e.currency]+=e.amount,g.ov.suc.count[e.currency]+=e.count):(g.ov.fail.amount[e.currency]+=e.amount,g.ov.fail.count[e.currency]+=e.count)})}),g.balances2.forEach(function(e){var t=g.ov.suc.count[e]+g.ov.fail.count[e];0<t&&(g.ov.suc.perc[e]=(g.ov.suc.count[e]/t*100).toFixed(2),g.ov.fail.perc[e]=(g.ov.fail.count[e]/t*100).toFixed(2))})},g.getProviderList=function(e){g.providerList=[],e.stats.forEach(function(e){void 0!==e.top10_countries_paid&&e.top10_countries_paid.forEach(function(e){g.providerList.contains(e.tag)||null!==e.tag&&void 0!==e.tag&&g.providerList.push(e.tag)}),void 0!==e.top10_accounts_paid&&e.top10_accounts_paid.forEach(function(e){g.providerList.contains(e.tag)||null!==e.tag&&void 0!==e.tag&&g.providerList.push(e.tag)})})},g.getProductTypes=function(e){this.productTypes=ProductType.TYPE_STRINGS},g.getBalances=function(e){g.balances2=[],g.curTurnoverList=[],g.curTurnoverList=[],e.stats.forEach(function(e){void 0!==e.top10_accounts_paid&&e.top10_accounts_paid.forEach(function(e){index=-1;for(var t=0;t<g.curTurnoverList.length;t++){if((a=g.curTurnoverList[t]).cur==e.currency){index=t;break}}var a;-1!=index?((a=g.curTurnoverList[index]).count+=e.count,a.amount+=e.amount):((a={}).cur=e.currency,a.count=e.count,a.amount=e.amount,g.curTurnoverList.push(a))})});for(var t=g.curTurnoverList.length,a=0;a<t-1;a++)for(var n=a+1;n<t;n++)if(g.curTurnoverList[a].count<g.curTurnoverList[n].count){var o=g.curTurnoverList[a];g.curTurnoverList[a]=g.curTurnoverList[n],g.curTurnoverList[n]=o}for(a=0;a<t;a++)g.balances2.push(g.curTurnoverList[a].cur);g.currency=g.balances2[0]},g.changeCTCTable=function(e,t){if(g.ctc={},g.ctc.labels=[],g.ctc.series=[],g.ctc.data=[],g.ctc.options={legend:{display:!0}},null!=e){e.stats.forEach(function(e){g.ctc.labels.push(g.formatTime(e.ts,g.mode))});var o,a=g.showtransflag;if("default"===a){var n=e.top10_accounts;o="Top5"==t?(accountIDs=n.slice(0,5).map(function(e){return e._id}),new AccountTopupTransFilter(a,accountIDs)):"Top10"==t?(accountIDs=n.slice(0,10).map(function(e){return e._id}),new AccountTopupTransFilter(a,accountIDs)):new CountryTopupTransFilter(a)}else"country"===a?o=new CountryTopupTransFilter(a,g.countryStr):"destination"===a?o=new CountryTopupTransFilter(a,g.destStr):"agent"===a?o=new AccountTopupTransFilter(a,g.agentID):"provider"===a?o=new CountryTopupTransFilter(a,g.providerStr):"producttype"===a&&(o=new CountryTopupTransFilter(a,g.productType));var i=g.countryList;if("country"===a)i=[g.countryStr];else if("destination"===a){i=[g.destStr.split("-")[0]]}i.forEach(function(a,n){g.ctc.series.push(a),g.ctc.data[n]=[],e.stats.forEach(function(e){var t=0;o.filter(e).forEach(function(e){e.country===a&&"RECHARGE_COMPLETE"===e.code&&(t+=e.count)}),g.ctc.data[n].push(t)})})}},g.changeDTCTable=function(e,t){if(g.dtc={},g.dtc.labels=[],g.dtc.series=[],g.dtc.data=[],g.dtc.options={legend:{display:!0}},null!=e){e.stats.forEach(function(e){g.dtc.labels.push(g.formatTime(e.ts,g.mode))});var o,a=g.showtransflag;if("default"===a){var n=e.top10_accounts;o="Top5"==t?(accountIDs=n.slice(0,5).map(function(e){return e._id}),new AccountTopupTransFilter(a,accountIDs)):"Top10"==t?(accountIDs=n.slice(0,10).map(function(e){return e._id}),new AccountTopupTransFilter(a,accountIDs)):new CountryTopupTransFilter(a)}else if("country"===a)o=new CountryTopupTransFilter(a,g.countryStr);else if("destination"===a)o=new CountryTopupTransFilter(a,g.destStr);else if("agent"===a)o=new AccountTopupTransFilter(a,g.agentID);else if("provider"===a)o=new CountryTopupTransFilter(a,g.providerStr);else{if("producttype"!==a)return;o=new CountryTopupTransFilter(a,g.productType)}var i=g.destinationList;"destination"===a?i=[g.destStr]:"country"===a&&(i=i.filter(function(e){return e.split("-")[0]===g.countryStr})),i.forEach(function(a,n){g.dtc.series.push(a),g.dtc.data[n]=[],e.stats.forEach(function(e){var t=0;o.filter(e).forEach(function(e){e.country+"-"+e.operator_name==a&&"RECHARGE_COMPLETE"===e.code&&(t+=e.count)}),g.dtc.data[n].push(t)})}),10<g.dtc.data.length&&(g.dtc.data=g.dtc.data.slice(0,10),g.dtc.series=g.dtc.series.slice(0,10))}},g.changeATCTable=function(e,t){g.atc={},g.atc.labels=[],g.atc.series=[],g.atc.data=[],g.atc.options={legend:{display:!0}},e.stats.forEach(function(e){g.atc.labels.push(g.formatTime(e.ts,g.mode))});var o,a=e.top10_accounts.slice(0,10),n=g.showtransflag;if("default"===n)o=new AccountTopupTransFilter(n,"Top5"==t?(a=a.slice(0,5)).map(function(e){return e._id}):"Top10"==t?a.map(function(e){return e._id}):a.map(function(e){return e._id}));else if("country"===n)o=new AccountTopupTransFilter(n,g.countryStr);else if("destination"===n)o=new AccountTopupTransFilter(n,g.destStr);else if("agent"===n)o=new AccountTopupTransFilter(n,g.agentID);else if("provider"===n)o=new AccountTopupTransFilter(n,g.providerStr);else{if("producttype"!==n)return;o=new AccountTopupTransFilter(n,g.productType)}a.forEach(function(a,n){g.atc.series[n]=a.name,g.atc.data[n]=[],e.stats.forEach(function(e){var t=0;o.filter(e).forEach(function(e){e.account_name==a.name&&"RECHARGE_COMPLETE"===e.code&&(t+=e.count)}),g.atc.data[n].push(t)})})},g.changeSFTable=function(e,t){g.sf={},g.sf.labels=[],g.sf.series=["Successful","Failed"],g.sf.data=[],g.sf.data[0]=[],g.sf.data[1]=[],g.sf.options={legend:{display:!0}};var a,n=g.showtransflag;"country"===n?a=new CountryTopupTransFilter(n,g.countryStr):"destination"===n?a=new CountryTopupTransFilter(n,g.destStr):"agent"===n?a=new AccountTopupTransFilter(n,g.agentID):"provider"===n?a=new CountryTopupTransFilter(n,g.providerStr):"producttype"===n&&(a=new CountryTopupTransFilter(n,g.productType)),"default"===g.showtransflag?e.stats.forEach(function(e,t){var a=e.suxx_vs_fail;void 0!==a&&(g.sf.labels.push(g.formatTime(e.ts,g.mode)),g.sf.data[0][t]=[],g.sf.data[1][t]=[],g.sf.data[0][t]=a.successful,g.sf.data[1][t]=a.failed)}):e.stats.forEach(function(e,t){g.sf.labels.push(g.formatTime(e.ts,g.mode)),g.sf.data[0][t]=0,g.sf.data[1][t]=0,a.filter(e).forEach(function(e){"RECHARGE_COMPLETE"===e.code?g.sf.data[0][t]+=e.count:g.sf.data[1][t]+=e.count})})},g.changeChannelTable=function(n,e){g.ch={},g.ch.labels=[],g.ch.series=["Web","API","PIN Portal","IVR"],g.ch.data=[],g.ch.data[0]=[],g.ch.data[1]=[],g.ch.data[2]=[],g.ch.data[3]=[],g.ch.options={legend:{display:!0}},n.stats.forEach(function(e,t){var a=n.stats[t].topups_by_channel;void 0!==a&&(g.ch.labels.push(g.formatTime(e.ts,g.mode)),g.ch.data[0][t]=[],g.ch.data[1][t]=[],g.ch.data[2][t]=[],g.ch.data[3][t]=[],g.ch.data[0][t]=a.web,g.ch.data[1][t]=a.api,g.ch.data[2][t]=a.pinp,g.ch.data[3][t]=a.ivr)})},g.changeCurrencyTurnover=function(e,t){g.curTurnoverList=[],e.stats.forEach(function(e){void 0!==e.top10_accounts_paid&&e.top10_accounts_paid.forEach(function(e){index=-1;for(var t=0;t<g.curTurnoverList.length;t++){if((a=g.curTurnoverList[t]).cur==e.currency){index=t;break}}var a;-1!=index?((a=g.curTurnoverList[index]).count+=e.count,a.amount+=e.amount):((a={}).cur=e.currency,a.count=e.count,a.amount=e.amount,g.curTurnoverList.push(a))})})},g.changeTCCGraph=function(e,t){g.tcc={},g.tcc.labels=[],g.tcc.series=[],g.tcc.data=[],g.tcc.options={legend:{display:!0}};var a,n=g.showtransflag;if("default"===n){var o=e.top10_accounts;a="Top5"==t?(accountIDs=o.slice(0,5).map(function(e){return e._id}),new AccountPaidTransFilter(n,accountIDs)):"Top10"==t?(accountIDs=o.slice(0,10).map(function(e){return e._id}),new AccountPaidTransFilter(n,accountIDs)):new CountryPaidTransFilter(n)}else"country"===n?a=new CountryPaidTransFilter(n,g.countryStr):"destination"===n?a=new CountryPaidTransFilter(n,g.destStr):"agent"===n?a=new AccountPaidTransFilter(n,g.agentID):"provider"===n?a=new CountryPaidTransFilter(n,g.providerStr):"producttype"===n&&(a=new CountryPaidTransFilter(n,g.productType));e.stats.forEach(function(e){g.tcc.labels.push(g.formatTime(e.ts,g.mode))});for(var i=0;i<g.balances2.length;i++)g.tcc.data[i]=[],g.tcc.series[i]=g.balances2[i],e.stats.forEach(function(e){var t=0;a.filter(e).forEach(function(e){e.currency===g.balances2[i]&&"RECHARGE_COMPLETE"===e.code&&(t+=e.count)}),g.tcc.data[i].push(t)})},g.changeProductTable=function(e,t){var a,n={},o=[],i=g.showtransflag;if("default"===i){var r=e.top10_accounts;a="Top5"==t?(accountIDs=r.slice(0,5).map(function(e){return e._id}),new AccountPaidTransFilter(i,accountIDs)):"Top10"==t?(accountIDs=r.slice(0,10).map(function(e){return e._id}),new AccountPaidTransFilter(i,accountIDs)):new CountryPaidTransFilter(i)}else"country"===i?a=new CountryPaidTransFilter(i,g.countryStr):"destination"===i?a=new CountryPaidTransFilter(i,g.destStr):"agent"===i?a=new AccountPaidTransFilter(i,g.agentID):"provider"===i?a=new CountryPaidTransFilter(i,g.providerStr):"producttype"===i&&(a=new CountryPaidTransFilter(i,g.productType));e.stats.forEach(function(e){a.filter(e).forEach(function(e){if("RECHARGE_COMPLETE"===e.code){var t=e.type,a=e.currency;n[t]||(n[t]={}),n[t][a]||(n[t][a]={amount:0,count:0}),n[t][a].amount+=e.amount,n[t][a].count+=e.count}})}),Object.keys(n).forEach(function(t){Object.keys(n[t]).forEach(function(e){o.push(new Product(Object.assign({type:t,currency:e},n[t][e])))})}),g.ptc=o},g.changeProductGraph=function(e,t){var n,o=ProductType.TYPE_STRINGS,a={labels:[],series:[],data:[],options:{legend:{display:!0}}},i={},r=g.showtransflag;if("default"===r){var c=e.top10_accounts;n="Top5"==t?(accountIDs=c.slice(0,5).map(function(e){return e._id}),new AccountPaidTransFilter(r,accountIDs)):"Top10"==t?(accountIDs=c.slice(0,10).map(function(e){return e._id}),new AccountPaidTransFilter(r,accountIDs)):new CountryPaidTransFilter(r)}else if("country"===r)n=new CountryPaidTransFilter(r,g.countryStr);else if("destination"===r)n=new CountryPaidTransFilter(r,g.destStr);else if("agent"===r)n=new AccountPaidTransFilter(r,g.agentID);else if("provider"===r)n=new CountryPaidTransFilter(r,g.providerStr);else{if("producttype"!==r)return;n=new CountryPaidTransFilter(r,g.productType)}e.stats.forEach(function(e){a.labels.push(g.formatTime(e.ts,g.mode))}),e.stats.forEach(function(e,a){Object.keys(i).forEach(function(e){i[e][a]=0}),n.filter(e).forEach(function(e){if("RECHARGE_COMPLETE"===e.code){var t=o[e.type];i[t]||(i[t]=new Array(a+1).fill(0)),i[t][a]+=e.count}})}),a.series=Object.keys(i),a.data=Object.values(i),g.ptcg=a},g.formatTime=function(e,t){return-1!=["today","daily","custom_day"].indexOf(t)?moment(e).format("HH:00"):-1!=["this_week","weekly","custom_week"].indexOf(t)?moment(e).format("DD.MM.YYYY"):-1!=["this_month","monthly","custom_month"].indexOf(t)?moment(e).format("DD.MM.YYYY"):-1!=["this_year","yearly","custom_year"].indexOf(t)?moment(e).format("MM.YYYY"):void 0},g.showDashboard=function(e,t){g.topCountries(e),g.topAccounts(e),g.topDestinations(e),g.getProviderList(e),g.getProductTypes(e),g.getBalances(e),"agent"===g.showtransflag&&(g.currency=g.agentCur),g.changeCTCTable(e,t),g.changeDTCTable(e,t),g.changeTransByAll(e,t),g.changeTCTable(e,t),g.changeTDATable(e,t),g.changeTransCount(),g.changeATCTable(e,t),g.changeTurnoverTable(e,t),g.changeSFTable(e,t),g.changeChannelTable(e,t),g.changeCurrencyTurnover(e,t),g.changeTCPTable(e,t),g.changeTCPGraph(e,t),g.changeTCCGraph(e,t),g.changeProductTable(e,t),g.changeProductGraph(e,t)};var l=!0,y=function(){g.timer=t(function(){console.log("aaaaaaa"),l&&(l=!1,n.getCoreDashboardByCustomTime(g.mode,g.selectedDate).then(function(e){g.accountIdList=e.map(function(e){return e._id}),n.getAccountsWallet(g.accountIdList).then(function(e){for(var t=0;t<e.length;t++)g.accountWallets[e[t].account_name]=e[t].wallets;l=!0})}))},3e5)};g.$on("$destroy",function(){g.modeObj&&g.modeObj.destroy()})}]),angular.module("billinguiApp").controller("DateSelectController",["$uibModalInstance","$scope","api","$stateParams",function(e,t,a,n){t.cancel=function(){e.dismiss()},t.select=function(){t.selectedDate=t.year_sel+"-"+t.month_sel+"-"+t.week_sel+"-"+t.day_sel,e.close(t.selectedDate)},t.updateDate=function(){}}]),angular.module("billinguiApp").controller("AccountsController",["$scope","api","$location","$uibModal","$timeout","$stateParams","SweetAlert","ngProgressFactory","$interval","$window","localStorageService",function(d,n,e,o,i,p,r,t,a,c,s){if(n.isAuthed()){d.userview=!1,d.page=1,d.query="",d.progressbar=t.createInstance(),d.account_names=[],d.anames=s.get("acnames"),d.anames.forEach(function(e){d.account_names[e._id]=e.account_name}),console.log(d.progressbar),d.progressbar.start(),n.updateProfile().then(function(e){d.profile=e}).catch(function(e){console.log(e)});function l(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}d.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(l,250)};d.changePage=function(e){d.page=e,""==d.query?u():n._post("/accounts/page/"+d.page+"?fields=createdAt,parent,account_name,wholesaler,type,test_mode,legal_type,active,wallets",{query:d.query}).then(function(e){d.accounts=e.docs,d.count=e.count,d.pages=e.pages,d.page=e.page,d.limit=e.limit}).catch(function(e){console.log(e)})};var u=function(){n._get("/accounts/page/"+d.page+"?fields=createdAt,parent,account_name,wholesaler,type,test_mode,legal_type,active,wallets").then(function(e){d.accounts=e.docs,d.count=e.count,d.pages=e.pages,d.page=e.page,d.limit=e.limit,""!==p.filter&&(d.typefilter=p.filter),d.accountcount=e.count;for(var t=[],a=0;a<e.docs.length;a++)if("wholesaler"==e.docs[a].type){var n={_id:e.docs[a]._id,child:[],type:"wholesaler"};t.push(n)}var o=t.length<1;for(a=0;a<e.docs.length;a++)if("reseller"==e.docs[a].type)if(o){n={_id:e.docs[a]._id,child:[],type:"reseller"};t.push(n)}else{for(var i=!1,r=0;r<t.length;r++)if(t[r]._id==e.docs[a].parent){var c={_id:e.docs[a]._id,child:[]};t[r].child.push(c),i=!0}i||t.push({_id:e.docs[a]._id,child:[],type:"reseller"})}for(o=t.length<1,a=0;a<e.docs.length;a++)if(o)t.push(e.docs[a]);else if("agent"==e.docs[a].type)if("reseller"==t[0].type){var s=!1;for(r=0;r<t.length;r++)if(e.docs[a].parent==t[r]._id){var l={_id:e.docs[a]._id,type:"agent",child:[]};t[r].child.push(l),s=!0}s||t.push({_id:e.docs[a]._id,type:"agent",child:[]})}else{i=!1;for(r=0;r<t.length;r++)if(e.docs[a].parent==t[r]._id){l={_id:e.docs[a]._id};t[r].child.push(l),i=!0}else{s=!1;for(var u=0;u<t[r].child.length;u++)if(e.docs[a].parent==t[r].child[u]._id){l={_id:e.docs[a]._id};t[r].child[u].child.push(l),i=s=!0}s||(t[r].child.push({_id:e.docs[a]._id}),i=!0)}i||t.push({_id:e.docs[a]._id})}d.progressbar.complete(),d.data=t,d.$broadcast("angular-ui-tree:collapse-all")}).catch(function(e){console.log(e)})},f=null;d.doSearch=function(e){null!=f&&i.cancel(f),f=i(function(){"/"!==d.query.charAt(0)?0!==d.query.length?13===e.which&&n._post("/accounts/page/1?fields=createdAt,parent,account_name,wholesaler,type,test_mode,legal_type,active,wallets",{query:d.query}).then(function(e){d.accounts=e.docs,d.count=e.count,d.pages=e.pages,d.page=e.page,d.limit=e.limit}).catch(function(e){console.log(e)}):d.changePage(1):3<d.query.length&&n._post("/accounts/page/1?fields=createdAt,parent,account_name,wholesaler,type,test_mode,legal_type,active,wallets",{query:d.query}).then(function(e){d.accounts=e.accounts,d.count=e.count,d.pages=1,d.page=1,d.limit=e.count}).catch(function(e){console.log(e)})},1e3)};function m(){n.getUsers().then(function(e){d.users=e.users,d.progressbar.complete()}).catch(function(e){console.log(e)})}d.showHierarchy=!0,d.toggleHierarchy=function(){d.showHierarchy=!d.showHierarchy},d.getAccountList=function(){return d.rcsv=[],d.accounts.forEach(function(e){var t={};t.account_number=e.numeric_id,t.account_name=e.account_name,t.legal_type=e.legal_type,t.parent=e.parent_name,t.type=e.type,d.rcsv.push(t)}),d.rcsv},d.transferFunds=function(t){var a=new TransferModalProps;n._get("/accounts/"+t).then(function(e){a.tdata.destWallets=e.wallets,a.tdata.destAccount=t,d.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-transfer.html",controller:"TransferModalController",resolve:{props:function(){return a}}}),d.modal.result.then(function(e){i(function(){r.swal({title:"Good Job!",text:"Funds Transfer Completed!",type:"success",closeOnConfirm:!0},function(e){e&&u()})})},function(e){void 0!==e&&(console.log("err",e),d.emsg=e.data.status+" - "+e.data.message,r.swal("Oops!","Error : "+d.emsg,"error"))})})},d.toggle=function(e){console.log("------",e,"-----------"),e.toggle()},d.deleteAccount=function(e){d.recid=e._id,n.getAccountUsers(d.recid).then(function(e){d.masteruser=e.users[0].username}),"wholesaler"==e.type?d.iswholesaler=!0:d.iswholesaler=!1,n.getChildAccounts(e._id).then(function(e){d.childrens=e.accounts,d.childflag=0<d.childrens.length,d.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-account.html",controller:"AccountsModalController",scope:d}),d.modal.result.then(function(e){i(function(){u()})},function(){console.log("but i waz dizmizeddd")})})},d.clearFilter=function(){delete d.typefilter,d.userview=!1},d.setFilter=function(e){"user"==(d.typefilter=e)&&(d.userview=!0)},u(),d.load(),d.topup=function(e){d.recid=e,d.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-topup.html",controller:"AccountsModalController",scope:d}),d.modal.result.then(function(e){i(function(){u()})},function(){console.log("but i waz dizmizeddd")})},d.editUser=function(t,e){n.getUser(t,e).then(function(e){d.user=e,d.accid=t,d.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-user.html",controller:"UserListModalController",scope:d}),d.modal.result.then(function(e){i(function(){m()})},function(){console.log("but i waz dizmizeddd")})})},d.deleteUser=function(t,e){n.getUser(t,e).then(function(e){d.user=e,d.accid=t,d.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-user.html",controller:"UserListModalController",scope:d}),d.modal.result.then(function(e){i(function(){m()})},function(){console.log("but i waz dizmizeddd")})})}}else e.path("/login")}]),angular.module("billinguiApp").controller("AccountsModalController",["$uibModalInstance","$scope","api","$stateParams","SweetAlert",function(t,a,n,e,o){a.accountsCancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.deleteOK=function(){a.masteruser="";for(var e=0;e<a.childrens.length;e++)a.iswholesaler&&(n.getChildAccounts(a.childrens[e]._id).then(function(e){for(var t=e.accounts,a=0;a<t.length;a++)n.deleteAccount(t[a]._id).then(function(e){}).catch(function(e){})}),n.deleteAccount(a.childrens[e]._id).then(function(e){}).catch(function(e){}));n.deleteAccount(a.recid).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})},a.refundTx=function(){n._get("/topuplog/item/"+a.recid+"/refund").then(function(e){a.rec=e,o.swal({title:"Good Job!",text:"TopupLog has been refunded!",type:"success",closeOnConfirm:!0},function(e){e&&t.dismiss()})}),a.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},a.topupOK=function(){console.log("i am being called");var e={};e.amount=a.top.amt,e.reason=a.top.reason,n.topupAcc(a.recid,e).then(function(e){t.close()}).catch(function(e){console.log("big badaaaa boom")})}}]),angular.module("billinguiApp").controller("UserListModalController",["$uibModalInstance","$scope","api","$stateParams",function(t,a,n,e){a.accountsCancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.uploadAvatar=function(t,e){a.f=t,a.errFile=e&&e[0],t&&(t.upload=Upload.upload({url:"/api/accounts/"+a.accid+"/users/"+a.user._id+"/avatar?token="+a.profile.token,data:{userPhoto:t}}),t.upload.then(function(e){$timeout(function(){t.result=e.data})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},a.newUserCancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.cancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.editUserOK=function(){var e={};for(key in a.user)"main_account"!=key&&"__v"!=key&&"_id"!=key&&"createdAt"!=key&&"last_login"!=key&&"updatedAt"!=key&&"password"!=key&&"passwordconfirm"!=key&&(e[key]=a.user[key]);a.user.password&&a.user.password==a.user.passwordconfirm&&(e.password=a.user.password),n.editUser(a.accid,a.user._id,e).then(function(e){}).catch(function(e){console.log(e)}),t.close()},a.deleteUserOK=function(){a.uconfirm==a.user.username?(n.deleteUser(a.accid,a.user._id).then(function(e){}).catch(function(e){console.log(e)}),t.close()):console.log("not match")},a.editCredentialOK=function(){console.log("boooo booo",a.rec),n._put("/credentials/"+a.rec._id,a.rec).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})}}]),angular.module("billinguiApp").controller("AccountController",["$uibModal","$scope","api","$location","$stateParams","$timeout","Upload","ngProgressFactory","SweetAlert","$rootScope","$window","localStorageService",function(c,l,u,e,s,n,a,t,o,i,r,d){if(u.isAuthed()){l.country_currency={ar:"ARS",bd:"BDT",af:"AFN",ag:"XCD",ai:"XCD",bb:"BBD",bj:"XOF",bo:"undefined",bm:"BMD",br:"BRL",bw:"BWP",vg:"USD",bf:"XOF",kh:"KHR",cm:"XAF",cn:"CNY",co:"COU",cr:"CRC",cy:"EUR",cd:"CDF",cu:"CUC",dm:"XCD",do:"DOP",eg:"EGP",ec:"USD",sv:"USD",gh:"GHS",gt:"GTQ",gq:"GNF",id:"IDR",in:"INR",jm:"JMD",jo:"JOD",ke:"KES",kg:"KGS",la:"LAK",lr:"LRD",mg:"MGA",my:"MYR",ml:"XOF",mx:"MXN",md:"MDL",ms:"XCD",np:"NPR",ma:"MAD",mz:"MZN",ni:"NIO",ne:"XOF",ng:"NGN",pk:"PKR",pa:"USD",py:"PYG",pe:"PEN",ph:"PHP",pl:"PLN",ro:"RON",ru:"RUB",sn:"XOF",rw:"RWF",sl:"SLL",sg:"SGD",za:"ZAR",es:"EUR",sz:"SZL",lk:"LKR",tz:"TZS",tk:"TJS",th:"THB",tt:"TTD",tr:"TRY",tn:"TND",tc:"USD",ug:"UGX",ua:"UAH",uy:"UYU",uz:"UZS",ye:"YER",zm:"ZMW",zw:"ZWL",sd:"SDG",it:"EUR",bs:"BSD",at:"EUR",by:"BYR"},l.currencyRate={},l.countryiso={},l.mainWallet="",l.subWallet=[],l.parentProfit={},l.progressbar=t.createInstance(),l.progressbar.start();function p(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}l.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(p,250),$("#acclist").css("active");for(var e=d.get("rates"),t=0;t<e.count;t++)"USD"==e.rates[t].source&&(l.currencyRate[e.rates[t].destination]=e.rates[t].rate)};function f(){u.getAccount(s.id).then(function(e){l.accounts=d.get("acnames"),l.account={},l.account.permitted_apis=[],l.account=e,l.account.parent_name="",void 0===l.account.show_tag_balance&&(l.account.show_tag_balance=!1,l.account.show_tag="",l.account.balance_type="compact"),l.profile.main_account==l.account.parent&&u.getAccount(l.profile.main_account).then(function(e){l.account.parent_name=e.account_name});for(var t=0;t<l.accounts.length;t++)l.accounts[t]._id===l.account.parent&&(l.account.parent_name=l.accounts[t].account_name);for(t=0;t<l.account.wallets.length;t++)1==l.account.wallets[t].primary?l.mainWallet=l.account.wallets[t].currency:l.subWallet.push(l.account.wallets[t].currency);l.account.features_enabled.contains("epin")?l.epin_enabled=!0:l.epin_enabled=!1,l.currencies=d.get("currencies")})}l.getMainTab=function(){f()},l.page=1;l.getTransactionsTab=function(){!function(){l.page;u.getTransactions(s.id,l.page).then(function(e){l.transactions=e.docs})}()};l.topupLogTab=function(){u.getTopupsAcc(s.id,l.page).then(function(e){l.data=e.docs})};function m(){u.getAccountUsers(s.id).then(function(e){l.users=e.users})}l.userViewTab=function(){m()};function h(){u.getChildAccounts(s.id).then(function(e){l.children=e.accounts})}l.childAccountTab=function(){h()};function g(){u.getCredentialsAccount(s.id).then(function(e){l.credentials=e.credentials})}l.credentialsTab=function(){g()};function b(){u._get("/accounts/"+s.id+"/drules").then(function(e){return l.drules=e.rulesets,u._get("/accounts/"+s.id+"/frules")}).then(function(e){l.frules=e.rulesets})}l.dfrTab=function(){b()},l.changePage=function(e){l.page=e},l.newDRule=function(){l.rec={},l.rec.rules=[],l.rec.isSystemWide=!1,l.nrule={},l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-drule.html",controller:"DFRModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){b()})},function(){console.log("but i waz dizmizeddd")})},l.newFRule=function(){l.rec={},l.rec.rules=[],l.rec.isSystemWide=!1,l.nrule={},l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-frule.html",controller:"DFRModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){b()})},function(){console.log("but i waz dizmizeddd")})},l.drEdit=function(e){l.recid=e,u._get("/accounts/"+s.id+"/drules/"+e).then(function(e){l.rec=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-drule.html",controller:"DFRModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){b()})},function(){console.log("but i waz dizmizeddd")})})},l.drDelete=function(e){l.recid=e,u._get("/accounts/"+s.id+"/drules/"+e).then(function(e){l.rec=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-drule.html",controller:"DFRModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){b()})},function(){console.log("but i waz dizmizeddd")})})},l.frEdit=function(e){l.recid=e,u._get("/accounts/"+s.id+"/frules/"+e).then(function(e){l.rec=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-frule.html",controller:"DFRModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){b()})},function(){console.log("but i waz dizmizeddd")})})},l.frDelete=function(e){l.recid=e,u._get("/accounts/"+s.id+"/frules/"+e).then(function(e){l.rec=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-frule.html",controller:"DFRModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){b()})},function(){console.log("but i waz dizmizeddd")})})},l.newWallet=function(){l.rec={},l.rec.currency="USD",l.rec.wallet_name="",l.availcur=[],u.getRates().then(function(e){e.rates.forEach(function(e){l.availcur.contains(e.destination)||l.availcur.push(e.destination)}),l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-wallet.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f(),i.updateBalance(),o.swal({title:"Good Job!",text:"Wallet has been created!",type:"success",closeOnConfirm:!0},function(e){})})},function(e){null!==e&&(l.emsg=e.data.status+" - "+e.data.message,o.swal("Oops!","Error : "+l.emsg,"error"))})})},l.newPA=function(){l.baa={},l.baa.apid=null,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-cc.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){l.account.permitted_apis.contains(l.baa.apid)||l.account.permitted_apis.push(l.baa.apid)},function(){console.log("but i waz dizmizeddd")})},l.newCred=function(){l.rec={},l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-credential.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){g()},function(){console.log("but i waz dizmizeddd")})},l.removePA=function(t){l.account.permitted_apis=l.account.permitted_apis.filter(function(e){return e!==t})},l.removeIP=function(t){l.account.appfw_whitelist=l.account.appfw_whitelist.filter(function(e){return e!==t})},l.newIP=function(){l.baa={},l.baa.ip=null,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-ip.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){l.account.appfw_whitelist.contains(l.baa.ip)||l.account.appfw_whitelist.push(l.baa.ip)},function(){console.log("but i waz dizmizeddd")})},l.editWallet=function(e){u.getWallet(l.account._id,e).then(function(e){l.rec=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-wallet.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f(),o.swal({title:"Good Job!",text:"Wallet has been updated!",type:"success",closeOnConfirm:!0},function(e){})})},function(e){null!==e&&(l.emsg=e.data.status+" - "+e.data.message,o.swal("Oops!","Error : "+l.emsg,"error"))})})},l.getRates=function(){if(void 0!==l.tdata.source&&void 0!==l.tdata.destination){if(l.raz={},l.raz.source=l.tdata.source.split(":"),l.raz.destination=l.tdata.destination.split(":"),l.raz.myrate=1,l.raz.source[1]!==l.raz.destination[1])if(l.raz.reverse=!1,0<(e=l.tdata.rates.filter(function(e){return e.source==l.raz.source[1]&&e.destination==l.raz.destination[1]})).length)l.raz.myrate=e[0].rate;else{var e=l.tdata.rates.filter(function(e){return e.destination==l.raz.source[1]&&e.source==l.raz.destination[1]});l.raz.reverse=!0,l.raz.myrate=e[0].rate}}},l.popup1={opened:!1},l.open1=function(){l.popup1.opened=!0},l.resetProfitMap=function(){if(l.account._id!==l.profile.main_account){var e=l.account;"wholesaler"!=e.type?u.getProfitMap(e.parent).then(function(e){return e.maps.forEach(function(e){l.parentProfit[e.code]=e.profit_pct}),u.getProfitMap(l.account._id)}).then(function(e){l.ProfitMap={},l.ProfitMap.maps=[],l.ProfitMap.active=e.active,console.log("I am angel",e),e.maps.forEach(function(e){var t={};t.code=e.code,t.active=e.active;var a=t.code.split(":"),n=0;if(Object.keys(l.parentProfit).forEach(function(e){e==t.code&&(n=l.parentProfit[e])}),t.profit_pct=e.profit_pct,t.profit_rate=0,"ALL"==a[0])t.country="All Countries";else{for(var o=l.country_currency[a[0].toLowerCase()],i=!1,r=0,c=0;c<l.subWallet.length;c++)l.subWallet[c]==o&&(i=!0,r=1);if(!i){var s=l.currencyRate[l.mainWallet];r=l.currencyRate[o]/s}t.profit_rate=(100-t.profit_pct-n)*r/100,t.profit_rate+=" "+o,d.get("clist").forEach(function(e){e.iso==a[0].toLowerCase()&&(t.country=e.country)})}"ALL"==a[1]?t.operator="All Operators":u.getOperators(a[0].toLowerCase()).then(function(e){e.forEach(function(e){t.code==e.code&&(t.operator=e.operator_name)})}),l.ProfitMap.maps.push(t)})}):u.getProfitMap(e._id).then(function(e){l.ProfitMap={},l.ProfitMap.maps=[],l.ProfitMap.active=e.active,e.maps.forEach(function(e){var t={};t.code=e.code,t.active=e.active;var a=t.code.split(":");if(t.profit_pct=e.profit_pct,t.profit_rate=0,"ALL"==a[0])t.country="All Countries";else{for(var n=l.country_currency[a[0].toLowerCase()],o=!1,i=0,r=0;r<l.subWallet.length;r++)l.subWallet[r]==n&&(o=!0,i=1);if(!o){var c=l.currencyRate[l.mainWallet];i=l.currencyRate[n]/c}t.profit_rate=(100-t.profit_pct)*i/100,t.profit_rate+=" "+n,d.get("clist").forEach(function(e){e.iso==a[0].toLowerCase()&&(t.country=e.country)})}"ALL"==a[1]?t.operator="All Operators":u.getOperators(a[0].toLowerCase()).then(function(e){e.forEach(function(e){t.code==e.code&&(t.operator=e.operator_name)})}),l.ProfitMap.maps.push(t)})})}},l.resetFixedProfitMap=function(){if(l.account._id!==l.profile.main_account){var e=l.account;u._get("/accounts/"+e._id+"/fprofitmap").then(function(e){l.FixedProfitMap={},l.FixedProfitMap.maps=[],l.FixedProfitMap.active=e.active,e.maps.forEach(function(e){var t={};t.code=e.code;var a=t.code.split(":");(t.profit=e.profit,t.rate=e.rate,t.currency=e.currency,"ALL"==a[0])?t.country="All Countries":d.get("clist").forEach(function(e){e.iso==a[0].toLowerCase()&&(t.country=e.country)});"ALL"==a[1]?t.operator="All Operators":"FT"==a[1]?t.operator="Funds Transfer":"SMS"==a[1]&&(t.operator="SMS"),l.FixedProfitMap.maps.push(t)})})}},l.resetAcl=function(){var e=l.account;void 0!==e.acl?(l.AccessList={},l.AccessList.type="permissive",l.AccessList.block=[],l.AccessList.allow=[],l.AccessList.active=!1,l.createNewAcl=!0,u.getAcl(e._id).then(function(e){l.AccessList={},l.AccessList.type=e.type,l.AccessList.block=[],l.AccessList.allow=[],l.AccessList.active=e.active,e.block.forEach(function(e){var t={};t.code=e.code,t.active=e.active;var a=e.code.split(":");"ALL"==a[0]?t.country="All Countries":d.get("clist").forEach(function(e){e.iso==a[0].toLowerCase()&&(t.country=e.country)});"ALL"==a[1]?t.operator="All Operators":u.getOperators(a[0].toLowerCase()).then(function(e){e.forEach(function(e){t.code==e.code&&(t.operator=e.operator_name)})}),l.AccessList.block.push(t)}),e.allow.forEach(function(e){var t={};t.code=e.code,t.active=e.active;var a=e.code.split(":");"ALL"==a[0]?t.country="All Countries":d.get("clist").forEach(function(e){e.iso==a[0].toLowerCase()&&(t.country=e.country)});"ALL"==a[1]?t.operator="All Operators":u.getOperators(a[0].toLowerCase()).then(function(e){e.forEach(function(e){t.code==e.code&&(t.operator=e.operator_name)})}),l.AccessList.allow.push(t)})})):(l.AccessList={},l.AccessList.type="permissive",l.AccessList.block=[],l.AccessList.allow=[],l.AccessList.active=!1,l.createNewAcl=!0)},l.getAclTab=function(){l.resetAcl()},l.resetAclClick=function(){l.createNewAcl=!0,l.AccessList={},l.AccessList.type="permissive",l.AccessList.block=[],l.AccessList.allow=[],l.AccessList.active=!0},l.editAclEntry=function(a,n){var e=i.countries;l.AclCountries=[];l.AclCountries.push({country:"ALL Countries",iso:"ALL"});for(var t=0;t<e.length;t++)l.AclCountries.push(e[t]),e[t].country==n.country&&(l.acl_country=e[t]);var o=l.acl_country.iso;if("ALL"==o){l.AclOperators=[];l.AclOperators.push({operator_id:"ALL",operator_name:"ALL Operators"})}else u.getOperators(o).then(function(e){l.AclOperators=[];for(var t=0;t<e.length;t++)l.AclOperators.push(e[t]),e[t].operator_name==n.operator&&(l.acl_operator=e[t]);l.rec={},l.rec.acltype=a,l.rec.country="0",l.rec.operator="0",l.editacl=n,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-aclentry.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})})},l.updateAcl=function(){l.progressbar=t.createInstance(),l.progressbar.start(),l.createNewAcl?u.createAcl(l.account._id,l.AccessList).then(function(t){l.progressbar.complete(),o.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){e&&(l.account.acl={},l.account.acl=t,l.resetAcl())})}).catch(function(e){console.log(e),l.progressbar.complete(),l.emsg=e.data.error.status+" - "+e.data.error.message,o.swal("Oops!","Error : "+l.emsg,"error")}):u.updateAcl(l.account._id,l.AccessList).then(function(e){l.progressbar.complete(),o.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){e&&l.resetAcl()})}).catch(function(e){console.log(e),l.progressbar.complete(),l.emsg=e.data.error.status+" - "+e.data.error.message,o.swal("Oops!","Error : "+l.emsg,"error")})},l.updateProfitMap=function(){l.progressbar=t.createInstance(),l.progressbar.start(),u.updateProfitMap(l.account._id,l.ProfitMap).then(function(e){l.progressbar.complete(),o.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){e&&l.resetProfitMap()})}).catch(function(e){console.log(e),l.progressbar.complete(),l.emsg=e.data.error.status+" - "+e.data.error.message,o.swal("Oops!","Error : "+l.emsg,"error")})},l.updateFixedProfitMap=function(){l.progressbar=t.createInstance(),l.progressbar.start(),u._put("/accounts/"+l.account._id+"/fprofitmap",l.FixedProfitMap).then(function(e){l.progressbar.complete(),o.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){e&&l.resetFixedProfitMap()})}).catch(function(e){console.log(e),l.progressbar.complete(),l.emsg=e.data.error.status+" - "+e.data.error.message,o.swal("Oops!","Error : "+l.emsg,"error")})},l.updateAccount=function(){l.progressbar=t.createInstance(),l.progressbar.start(),u.updateAccount(s.id,l.account).then(function(e){f(),l.progressbar.complete(),o.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){})}).catch(function(e){console.log(e),l.progressbar.complete(),l.emsg=e.data.error.status+" - "+e.data.error.message,o.swal("Oops!","Error : "+l.emsg,"error")})},l.newuser=function(){l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-user.html",controller:"UserModalController",resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){m()})},function(){console.log("but i waz dizmizeddd")})},l.deleteAccount=function(e){l.recid=e._id,u.getAccountUsers(l.recid).then(function(e){l.masteruser=e.users[0].username}),"wholesaler"==e.type?l.iswholesaler=!0:l.iswholesaler=!1,u.getChildAccounts(e._id).then(function(e){l.childrens=e.accounts,0<l.childrens.length?l.childflag=!0:l.childflag=!1,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-account.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){h()})},function(){console.log("but i waz dizmizeddd")})})},l.updateOperList=function(){var e=l.rec.country;l.rate_symbol="USD","ALL"==e?(l.AclOperators=[],l.canSelectOper=!0,l.acl_operator=l.AclOperators[0]):(l.rate_symbol=l.country_currency[e],u.getOperators(e).then(function(e){l.AclOperators=e,l.canSelectOper=!0}))},l.deleteAclEntry=function(e,t){if("block"==e){var a=l.AccessList.block.filter(function(e){return e.code!==t});l.AccessList.block=a}else if("allow"==e){a=l.AccessList.allow.filter(function(e){return e.code!==t});l.AccessList.allow=a}},l.deleteProfitMapEntry=function(t){var e=l.ProfitMap.maps.filter(function(e){return e.code!==t});l.ProfitMap.maps=e},l.deleteFixedProfitMapEntry=function(t){console.lo;var e=l.FixedProfitMap.maps.filter(function(e){return e.code!==t});l.FixedProfitMap.maps=e},l.editProfitMapEntry=function(n){var e=d.get("clist");l.AclCountries=[];l.AclCountries.push({country:"ALL Countries",iso:"ALL"});for(var t="",a=0;a<e.length;a++)l.AclCountries.push(e[a]),e[a].country==n.country&&(l.acl_country=e[a],t=l.acl_country.iso);if(""==t?(l.acl_country=l.AclCountries[0],l.AclOperators=[],l.AclOperators.push({operator_id:"ALL",operator_name:"ALL Operators"}),l.acl_operator=l.AclOperators[0]):u.getOperators(t).then(function(e){l.AclOperators=[],l.AclOperators.push({operator_id:"ALL",operator_name:"ALL Operators"});for(var t=!1,a=0;a<e.length;a++)l.AclOperators.push(e[a]),e[a].operator_name==n.operator&&(t=!0,l.acl_operator=e[a]);t||(l.acl_operator=l.AclOperators[0])}),l.rec={},l.rec.country=n.code.split(":")[0],l.rec.operator=n.code.split(":")[1],l.rec.profit_pct=n.profit_pct,""!=(l.oldPentry=n).profit_rate){var o=n.profit_rate.split(" ");l.rec.profit_rate=o[0],l.rate_symbol=o[1];var i=!1;for(a=0;a<l.subWallet.length;a++)l.subWallet[a]==l.rate_symbol&&(i=!0,l.currentRate=1);if(!i){var r=l.currencyRate[l.mainWallet];l.currentRate=l.currencyRate[l.rate_symbol]/r}}else l.rec.profit_rate=0,l.rate_symbol="";l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-profitentry.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},l.editFixedProfitMapEntry=function(e){l.rec={};var t=e.code.split(":");l.rec.country=t[0],l.rec.operator=t[1],l.rec.profit=e.profit,l.rec.currency=e.currency,l.oldPentry=e,"ALL"==t[0]?l.rec.countryText="All Countries":l.rec.countryText="Nigeria","FT"==t[1]?l.rec.operatorText="Funds Transfer":"SMS"==t[1]&&(l.rec.operatorText="SMS"),l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-fixedprofitentry.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},l.newentry=function(e){var t=d.get("clist");l.AclCountries=t,l.canSelectOper=!1,l.rec={},l.rec.acltype=e,l.rec.country="0",l.rec.operator="0",l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-aclentry.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},l.newPentry=function(){var e=d.get("clist");l.AclCountries=e,l.canSelectOper=!1,l.rec={},l.rec.country="0",l.rec.operator="0",l.rec.profit_pct=0,l.rec.profit_rate=0,l.showMPP=!1,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-profitentry.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},l.newFPentry=function(){l.AclCountries=[{iso:"NG",country:"Nigeria"}],l.AclOperators=[{operator_id:"FT",operator_name:"Funds Transfer"},{operator_id:"SMS",operator_name:"SMS"}],l.canSelectOper=!0,l.rec={},l.rec.country="0",l.rec.operator="0",l.rec.profit=0,l.rec.currency="NGN",l.showMPP=!1,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-fixedprofitentry.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},l.topup=function(){l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-topup.html",controller:"UserModalController",resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f()})},function(){console.log("but i waz dizmizeddd")})},l.transferFunds=function(){var t=new TransferModalProps;t.tdata.sourceAccount=l.account._id,t.tdata.destAccount=l.account._id,t.tdata.rates=d.get("rates"),u.getWallets(l.account._id).then(function(e){return t.tdata.sourceWallets=e.wallets,t.tdata.destWallets=e.wallets,u.getAccounts()}).then(function(e){return"agent"!==l.profile.account_type&&(t.tdata.accounts=e.accounts),u.getAccount(l.profile.main_account)}).then(function(e){t.tdata.accounts.push(e),l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-transfer.html",controller:"TransferModalController",resolve:{props:function(){return t}}}),l.modal.result.then(function(e){n(function(){f(),o.swal({title:"Good Job!",text:"Funds Transfer Completed!",type:"success",closeOnConfirm:!0},function(e){})})},function(e){void 0!==e&&(console.log("err",e),l.emsg=e.data.status+" - "+e.data.message,o.swal("Oops!","Error : "+l.emsg,"error"))})})},l.transferFundsID=function(t){var a=new TransferModalProps;u._get("/accounts/"+t).then(function(e){a.tdata.destWallets=e.wallets,a.tdata.destAccount=t,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-transfer.html",controller:"TransferModalController",resolve:{props:function(){return a}}}),l.modal.result.then(function(e){n(function(){o.swal({title:"Good Job!",text:"Funds Transfer Completed!",type:"success",closeOnConfirm:!0},function(e){e&&f()})})},function(e){void 0!==e&&(console.log("err",e),l.emsg=e.data.status+" - "+e.data.message,o.swal("Oops!","Error : "+l.emsg,"error"))})})},l.transferVFundsID=function(e){var t=new TransferModalProps;t.tdata.sourceAccount=l.profile.main_account,t.tdata.rates=d.get("rates"),t.tdata.destAccount=e,u._get("/accounts/"+e+"/vwallets").then(function(e){return t.tdata.destWallets=e.virtual_wallets,!0}).then(function(e){l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-vtransfer.html",controller:"TransferModalController",resolve:{props:function(){return t}}}),l.modal.result.then(function(e){n(function(){o.swal({title:"Good Job!",text:"Funds Transfer Completed!",type:"success",closeOnConfirm:!0},function(e){e&&f()})})},function(e){void 0!==e&&(console.log("err",e),l.emsg=e.data.status+" - "+e.data.message,o.swal("Oops!","Error : "+l.emsg,"error"))})})},l.newfinrec=function(){l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-finrec.html",controller:"UserModalController",resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f()})},function(){console.log("but i waz dizmizeddd")})},l.topup=function(){l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-topup.html",controller:"UserModalController",resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f()})},function(){console.log("but i waz dizmizeddd")})},l.editUser=function(e){u.getUser(s.id,e).then(function(e){l.user=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-user.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){m()})},function(){console.log("but i waz dizmizeddd")})})},l.editCred=function(e){u.getCredentialAccount(s.id,e).then(function(e){l.rec=e,l.rec.srcNum="",e.sourceNumbers.forEach(function(e){l.rec.srcNum+=e+","}),l.rec.srcNum=l.rec.srcNum.substring(0,l.rec.srcNum.length-1),l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-credential.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){g()})},function(){console.log("but i waz dizmizeddd")})})},l.deleteCred=function(e){l.recid=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-credential.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){g()})},function(){console.log("but i waz dizmizeddd")})},l.deleteUser=function(e){u.getUser(s.id,e).then(function(e){l.user=e,console.log(e),l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-user.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){m()})},function(){console.log("but i waz dizmizeddd")})})},l.deleteFinRecord=function(e){l.recid=e,l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-finrec.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f()})},function(){console.log("but i waz dizmizeddd")})},l.editFinRecord=function(t){l.recid=t,l.account.financial.forEach(function(e){e._id==t&&(l.rec=e)}),l.modal=c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-finrec.html",controller:"UserModalController",scope:l,resolve:{items:function(){return{id:s.id}}}}),l.modal.result.then(function(e){n(function(){f()})},function(){console.log("but i waz dizmizeddd")})},l.uploadLogo=function(t,e){l.f=t,l.errFile=e&&e[0],t&&(t.upload=a.upload({url:"/api/accounts/"+l.account._id+"/logoupload?token="+l.profile.token,data:{userPhoto:t}}),t.upload.then(function(e){n(function(){t.result=e.data})},function(e){0<e.status&&(l.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},l.uploadFavicon=function(t,e){l.faviconF=t,l.errFile=e&&e[0],t&&(t.upload=a.upload({url:"/api/accounts/"+l.account._id+"/faviconupload?token="+l.profile.token,data:{userPhoto:t}}),t.upload.then(function(e){n(function(){t.result=e.data})},function(e){0<e.status&&(l.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))};u.getProfile().then(function(e){l.currentRate=0,l.profile=e,l.load(),"wholesaler"==e.account_type?l.distr=!0:l.distr=!1,l.progressbar.complete(),l.filter={date_from:"",time_from:"",date_to:"",time_to:"",timezone:"",account:s.id,customer_reference:"",operator_reference:"",success:"",code:"",product_id:"",target:"",country:"",operator_name:"",channel:"",vnd_sim:"",api_transactionid:"",currency:""};l.filter}).then(function(e){l.account_names=d.get("acnames")}).catch(function(e){console.log(e)}),f(),l.load()}else e.path("/login")}]),angular.module("billinguiApp").controller("TransferModalController",["$uibModalInstance","$scope","api","props",function(t,a,n,e){n.getProfile().then(function(e){a.profile=e,a.distr="wholesaler"==e.account_type}),a.rec=e.rec,a.tdata=e.tdata,a.updateWalletList=function(){n.getWallets(a.tdata.sourceAccount).then(function(e){return a.tdata.sourceWallets=e.wallets,n.getWallets(a.tdata.destAccount)}).then(function(e){vm.tdata.destWallets=e.wallets})},a.transferFundsOK=function(){var e={destination:a.tdata.destination,amount:a.rec.amount,description:a.rec.description};n._post("/accounts/"+a.tdata.destAccount+"/topup",e).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})},a.transferVFundsOK=function(){var e={destination:a.tdata.destination,amount:a.rec.amount,description:a.rec.description};n._post("/accounts/"+a.tdata.destAccount+"/vtopup",e).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})}}]),angular.module("billinguiApp").controller("UserModalController",["$uibModalInstance","$scope","api","items","Upload",function(r,c,i,a,n){i.getProfile().then(function(e){c.profile=e,c.distr="wholesaler"==e.account_type}),i.getAccount(a.id).then(function(e){c.account=e,c.dontshowchild="agent"==e.type}),c.change_rate=function(){var e=c.rec,t=e.country.toUpperCase()+":"+e.operator.toUpperCase(),a=0;Object.keys(c.parentProfit).forEach(function(e){e==t&&(a=c.parentProfit[e])}),c.rec.profit_pct=100-100*c.rec.profit_rate/c.currentRate-a},c.change_pct=function(){var e=c.rec,t=e.country.toUpperCase()+":"+e.operator.toUpperCase(),a=0;Object.keys(c.parentProfit).forEach(function(e){e==t&&(a=c.parentProfit[e])}),c.rec.profit_rate=(100-c.rec.profit_pct-a)*c.currentRate/100},c.accountsCancel=function(){console.log("Cancel Was clicked"),r.dismiss()},c.deleteOK=function(){c.masteruser="";for(var e=0;e<c.childrens.length;e++)c.iswholesaler&&(i.getChildAccounts(c.childrens[e]._id).then(function(e){for(var t=e.accounts,a=0;a<t.length;a++)i.deleteAccount(t[a]._id).then(function(e){}).catch(function(e){})}),i.deleteAccount(c.childrens[e]._id).then(function(e){}).catch(function(e){}));i.deleteAccount(c.recid).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.updateeditableOperList=function(){var e=c.acl_country.iso;if("ALL"==e){c.AclOperators=[],c.canSelectOper=!0;c.AclOperators.push({operator_id:"ALL",operator_name:"ALL Operators"})}else i.getOperators(e).then(function(e){c.AclOperators=[];c.AclOperators.push({operator_id:"ALL",operator_name:"ALL Operators"});for(var t=0;t<e.length;t++)c.AclOperators.push(e[t]);c.canSelectOper=!0})},c.showPP=function(){for(var e=!1,t=c.rec.profit_pct=0;t<c.subWallet.length;t++)c.subWallet[t]==c.rate_symbol&&(e=!0,c.currentRate=1);if(!e){var a=c.currencyRate[c.mainWallet];c.currentRate=c.currencyRate[c.rate_symbol]/a}c.rec.profit_rate=(100-c.rec.profit_pct)*c.currentRate/100,c.showMPP=!0},c.editOperator=function(){c.rec.country=c.acl_country.iso,c.rec.operator=c.acl_operator.operator_id},c.editProfit=function(){var e=c.acl_country.iso;if(c.rec.profit_pct="",c.currentRate="",c.rec.profit_rate="","ALL"==e)c.AclOperators=[],c.rate_symbol="";else{var t=c.country_currency[e];c.rate_symbol=t;for(var a=!1,n=0;n<c.subWallet.length;n++)c.subWallet[n]==c.rate_symbol&&(a=!0,c.currentRate=1);if(!a){var o=c.currencyRate[c.mainWallet];c.currentRate=c.currencyRate[c.rate_symbol]/o}i.getOperators(e).then(function(e){c.AclOperators=[];c.AclOperators.push({operator_id:"ALL",operator_name:"ALL Operators"}),c.acl_operator=c.AclOperators[0];for(var t=0;t<e.length;t++)c.AclOperators.push(e[t])})}},c.editCredentialOK=function(){i.updateCredentialAccount(a.id,c.rec._id,c.rec).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.editAclEntryOK=function(){c.rec.country=c.acl_country.iso,c.rec.operator=c.acl_operator.operator_id;var t=c.rec,e={},a=t.country.toUpperCase()+":"+t.operator.toUpperCase();if(e.code=a,"ALL"!==t.country){var n=c.AclCountries.filter(function(e){return e.iso==t.country.toLowerCase()});e.country=n[0].country}else e.country="All Countries";if("ALL"!==t.operator){var o=c.AclOperators.filter(function(e){return e.operator_id==t.operator});e.operator=o[0].operator_name}else e.operator="All Operators";if(e.active=!0,"block"==c.rec.acltype){for(var i=0;i<c.AccessList.block.length;i++)if(c.AccessList.block[i].code==c.editacl.code){c.AccessList.block[i]=e;break}}else if("allow"==c.rec.acltype)for(i=0;i<c.AccessList.allow.length;i++)if(c.AccessList.allow[i].code==c.editacl.code){c.AccessList.allow[i]=e;break}r.close()},c.newAclEntryOK=function(){var t=c.rec,e={},a=t.country.toUpperCase()+":"+t.operator.toUpperCase();if(e.code=a,"ALL"!==t.country){var n=c.AclCountries.filter(function(e){return e.iso==t.country.toLowerCase()});e.country=n[0].country}else e.country="All Countries";if("ALL"!==t.operator){var o=c.AclOperators.filter(function(e){return e.operator_id==t.operator});e.operator=o[0].operator_name}else e.operator="All Operators";e.active=!0,"allow"==t.acltype?c.AccessList.allow.push(e):"block"==t.acltype&&c.AccessList.block.push(e),console.log(t,e),r.close()},c.newWalletOK=function(){i.createWallet(c.account._id,c.rec).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.newCredentialOK=function(){i.createCredentialAccount(c.account._id,c.rec).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.editWalletOK=function(){i.updateWallet(c.account._id,c.rec._id,c.rec).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.newPentryOK=function(){var t=c.rec,e={},a=t.country.toUpperCase()+":"+t.operator.toUpperCase();if(e.code=a,"ALL"!==t.country){var n=c.AclCountries.filter(function(e){return e.iso==t.country.toLowerCase()});e.country=n[0].country}else e.country="All Countries";if("ALL"!==t.operator){var o=c.AclOperators.filter(function(e){return e.operator_id==t.operator});e.operator=o[0].operator_name}else e.operator="All Operators";e.profit_pct=t.profit_pct,e.profit_rate=t.profit_rate+" "+c.rate_symbol,e.active=!0,c.ProfitMap.maps.push(e),console.log(t,e),r.close()},c.newFPentryOK=function(){var e=c.rec,t={},a=(t=e).country.toUpperCase()+":"+e.operator.toUpperCase();t.code=a,c.FixedProfitMap.maps.push(t),console.log(e,t),r.close()},c.editPentryOK=function(){c.rec.country=c.acl_country.iso,c.rec.operator=c.acl_operator.operator_id;var t=c.rec,e={},a=t.country.toUpperCase()+":"+t.operator.toUpperCase();if(e.code=a,"ALL"!==t.country){var n=c.AclCountries.filter(function(e){return e.iso==t.country.toLowerCase()});e.country=n[0].country}else e.country="All Countries";if("ALL"!==t.operator){var o=c.AclOperators.filter(function(e){return e.operator_id==t.operator});e.operator=o[0].operator_name}else e.operator="All Operators";e.profit_pct=t.profit_pct,e.profit_rate=t.profit_rate+" "+c.rate_symbol,e.active=!0;for(var i=0;i<c.ProfitMap.maps.length;i++)if(c.ProfitMap.maps[i].code==c.oldPentry.code){c.ProfitMap.maps[i]=e;break}console.log(t,e),r.close()},c.editFPentryOK=function(){var e=c.rec,t={},a=e.country.toUpperCase()+":"+e.operator.toUpperCase();(t=e).code=a;for(var n=0;n<c.FixedProfitMap.maps.length;n++)if(c.FixedProfitMap.maps[n].code==c.oldPentry.code){c.FixedProfitMap.maps[n]=t;break}console.log(e,t),r.close()},c.transferFundsOK=function(){var e={destination:c.tdata.destination.split(":")[0],amount:c.rec.amount,description:c.rec.description};i.topupAcc(c.tdata.destAccount._id,e).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.uploadAvatar=function(t,e){c.f=t,c.errFile=e&&e[0],t&&(t.upload=n.upload({url:"/api/accounts/"+c.account._id+"/users/"+c.user._id+"/avatar?token="+c.profile.token,data:{userPhoto:t}}),t.upload.then(function(e){$timeout(function(){t.result=e.data})},function(e){0<e.status&&(c.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},c.newUserOK=function(){c.user.password==c.user.passwordconfirm&&(delete c.user.passwordconfirm,i.createUser(a.id,c.user).then(function(e){console.log(e)}),r.close())},c.newUserCancel=function(){console.log("Cancel Was clicked"),r.dismiss()},c.editUserOK=function(){var e={};for(key in c.user)"main_account"!=key&&"__v"!=key&&"_id"!=key&&"createdAt"!=key&&"last_login"!=key&&"updatedAt"!=key&&"password"!=key&&"passwordconfirm"!=key&&(e[key]=c.user[key]);c.user.password&&c.user.password==c.user.passwordconfirm&&(e.password=c.user.password),i.editUser(a.id,c.user._id,e).then(function(e){}).catch(function(e){console.log(e)}),r.close()},c.deleteUserOK=function(){c.uconfirm==c.user.username?(i.deleteUser(a.id,c.user._id).then(function(e){}).catch(function(e){console.log(e)}),r.close()):console.log("not match")},c.deleteCredOK=function(){i.deleteCredentialAccount(a.id,c.recid).then(function(e){}).catch(function(e){console.log(e)}),r.close()},c.newFinRecOK=function(){c.rec.primary||(c.rec.primary=!1);var t={financial:[]};c.account.financial.forEach(function(e){t.financial.push(e)}),console.log("REC:",c.rec),t.financial.push(c.rec),i.updateAccount(a.id,t).then(function(e){r.close()})},c.topupOK=function(){console.log("i am being called");var e={};e.amount=c.top.amt,e.reason=c.top.reason,i.topupAcc(a.id,e).then(function(e){r.close()}).catch(function(e){console.log("big badaaaa boom")})},c.deleteFinRecordOK=function(){var t={financial:[]};c.account.financial.forEach(function(e){e._id==c.recid||t.financial.push(e)}),i.updateAccount(a.id,t).then(function(e){r.close()})},c.editFinRecordOK=function(){var t={financial:[]};c.account.financial.forEach(function(e){e._id==c.recid||t.financial.push(e)}),t.financial.push(c.rec),i.updateAccount(a.id,t).then(function(e){r.close()})},c.editSubOK=function(){console.log(" ok was clicked editSubOK ",c.sub),i.editSubscription(a.id,c.recid,c.sub).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.createSubOK=function(){"package"==c.sub.subscription_type&&(c.sub.quantity=1),i.createSubscription(a.id,c.sub).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.deleteSubOK=function(){i.deleteSubscription(a.id,c.recid).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.editRouteOK=function(){var e=c.route;delete e.rates,i.editRoute(a.id,c.recid,e).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.createRouteOK=function(){i.createRoute(a.id,c.route).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.deleteRouteOK=function(){i.deleteRoute(a.id,c.recid).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.newAssignmentOK=function(){if(c.account.available_routes.contains(c.route.parent_route))r.dismiss();else{c.account.available_routes.push(c.route.parent_route);var e={available_routes:[]};e.available_routes=c.account.available_routes,i.updateAccount(a.id,e).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})}},c.deleteAssignmentOK=function(){var t={available_routes:[]};c.account.available_routes.forEach(function(e){e==c.recid||t.available_routes.push(e)}),i.updateAccount(a.id,t).then(function(e){r.close()}).catch(function(e){r.dismiss(e)})},c.cancel=function(){console.log("Cancel Was clicked"),r.dismiss()},c.newCCOK=function(){console.log(c.account.permitted_apis,c.baa.apid),c.account.permitted_apis.push(c.baa.apid),r.close()},c.newIPOK=function(){c.account.appfw_whitelist.push(c.baa.ip),r.close()}}]),angular.module("billinguiApp").controller("TicketListController",["$scope","api","$location","$stateParams","ngProgressFactory","SweetAlert",function(a,t,e,n,o,r){if(t.isAuthed()){a.progressbar=o.createInstance(),console.log(a.progressbar),a.progressbar.start(),l=jQuery,u=new Array,d=new Array,l.fn.doAutosize=function(e){var t=l(this).data("minwidth"),a=l(this).data("maxwidth"),n="",o=l(this),i=l("#"+l(this).data("tester_id"));if(n!==(n=o.val())){var r=n.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");i.html(r);var c=i.width(),s=c+e.comfortZone>=t?c+e.comfortZone:t;(s<o.width()&&t<=s||t<s&&s<a)&&o.width(s)}},l.fn.resetAutosize=function(e){var t=l(this).data("minwidth")||e.minInputWidth||l(this).width(),a=l(this).data("maxwidth")||e.maxInputWidth||l(this).closest(".tagsinput").width()-e.inputPadding,n=l(this),o=l("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),letterSpacing:n.css("letterSpacing"),whiteSpace:"nowrap"}),i=l(this).attr("id")+"_autosize_tester";0<!l("#"+i).length&&(o.attr("id",i),o.appendTo("body")),n.data("minwidth",t),n.data("maxwidth",a),n.data("tester_id",i),n.css("width",t)},l.fn.addTag=function(o,i){return i=jQuery.extend({focus:!1,callback:!0},i),this.each(function(){var e=l(this).attr("id"),t=l(this).val().split(u[e]);if(""==t[0]&&(t=new Array),o=jQuery.trim(o),i.unique)1==(a=l(t).tagExist(o))&&l("#"+e+"_tag").addClass("not_valid");else var a=!1;if(""!=o&&1!=a){if(l("<span>").addClass("tag").append(l("<span>").text(o).append("  "),l("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return l("#"+e).removeTag(escape(o))})).insertBefore("#"+e+"_addTag"),t.push(o),l("#"+e+"_tag").val(""),i.focus?l("#"+e+"_tag").focus():l("#"+e+"_tag").blur(),l.fn.tagsInput.updateTagsField(this,t),i.callback&&d[e]&&d[e].onAddTag)d[e].onAddTag.call(this,o);if(d[e]&&d[e].onChange){var n=t.length;d[e].onChange.call(this,l(this),t[n-1])}}}),!1},l.fn.removeTag=function(a){return a=unescape(a),this.each(function(){var e=l(this).attr("id"),t=l(this).val().split(u[e]);for(l("#"+e+"_tagsinput .tag").remove(),str="",i=0;i<t.length;i++)t[i]!=a&&(str=str+u[e]+t[i]);l.fn.tagsInput.importTags(this,str),d[e]&&d[e].onRemoveTag&&d[e].onRemoveTag.call(this,a)}),!1},l.fn.tagExist=function(e){return 0<=jQuery.inArray(e,l(this))},l.fn.importTags=function(e){id=l(this).attr("id"),l("#"+id+"_tagsinput .tag").remove(),l.fn.tagsInput.importTags(this,e)},l.fn.tagsInput=function(e){var o=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},e);return this.each(function(){o.hide&&l(this).hide();var n=l(this).attr("id");n&&!u[l(this).attr("id")]||(n=l(this).attr("id","tags"+(new Date).getTime()).attr("id"));var e=jQuery.extend({pid:n,real_input:"#"+n,holder:"#"+n+"_tagsinput",input_wrapper:"#"+n+"_addTag",fake_input:"#"+n+"_tag"},o);u[n]=e.delimiter,(o.onAddTag||o.onRemoveTag||o.onChange)&&(d[n]=new Array,d[n].onAddTag=o.onAddTag,d[n].onRemoveTag=o.onRemoveTag,d[n].onChange=o.onChange);var t='<div id="'+n+'_tagsinput" class="tagsinput"><div id="'+n+'_addTag">';if(o.interactive&&(t=t+'<input id="'+n+'_tag" value="" data-default="'+o.defaultText+'" />'),l(t+='</div><div class="tags_clear"></div></div>').insertAfter(this),l(e.holder).css("width",o.width),l(e.holder).css("height",o.height),""!=l(e.real_input).val()&&l.fn.tagsInput.importTags(l(e.real_input),l(e.real_input).val()),o.interactive){if(l(e.fake_input).val(l(e.fake_input).attr("data-default")),l(e.fake_input).css("color",o.placeholderColor),l(e.fake_input).resetAutosize(o),l(e.holder).bind("click",e,function(e){l(e.data.fake_input).focus()}),l(e.fake_input).bind("focus",e,function(e){l(e.data.fake_input).val()==l(e.data.fake_input).attr("data-default")&&l(e.data.fake_input).val(""),l(e.data.fake_input).css("color","#000000")}),null!=o.autocomplete_url){for(attrname in autocomplete_options={source:o.autocomplete_url},o.autocomplete)autocomplete_options[attrname]=o.autocomplete[attrname];void 0!==jQuery.Autocompleter?(l(e.fake_input).autocomplete(o.autocomplete_url,o.autocomplete),l(e.fake_input).bind("result",e,function(e,t,a){t&&l("#"+n).addTag(t[0]+"",{focus:!0,unique:o.unique})})):void 0!==jQuery.ui.autocomplete&&(l(e.fake_input).autocomplete(autocomplete_options),l(e.fake_input).bind("autocompleteselect",e,function(e,t){return l(e.data.real_input).addTag(t.item.value,{focus:!0,unique:o.unique}),!1}))}else l(e.fake_input).bind("blur",e,function(e){var t=l(this).attr("data-default");return""!=l(e.data.fake_input).val()&&l(e.data.fake_input).val()!=t?e.data.minChars<=l(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=l(e.data.fake_input).val().length)&&l(e.data.real_input).addTag(l(e.data.fake_input).val(),{focus:!0,unique:o.unique}):(l(e.data.fake_input).val(l(e.data.fake_input).attr("data-default")),l(e.data.fake_input).css("color",o.placeholderColor)),!1});l(e.fake_input).bind("keypress",e,function(e){if(e.which==e.data.delimiter.charCodeAt(0)||13==e.which)return e.preventDefault(),e.data.minChars<=l(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=l(e.data.fake_input).val().length)&&l(e.data.real_input).addTag(l(e.data.fake_input).val(),{focus:!0,unique:o.unique}),l(e.data.fake_input).resetAutosize(o),!1;e.data.autosize&&l(e.data.fake_input).doAutosize(o)}),e.removeWithBackspace&&l(e.fake_input).bind("keydown",function(e){if(8==e.keyCode&&""==l(this).val()){e.preventDefault();var t=l(this).closest(".tagsinput").find(".tag:last").text(),a=l(this).attr("id").replace(/_tag$/,"");t=t.replace(/[\s]+x$/,""),l("#"+a).removeTag(escape(t)),l(this).trigger("focus")}}),l(e.fake_input).blur(),e.unique&&l(e.fake_input).keydown(function(e){8!=e.keyCode&&!String.fromCharCode(e.which).match(/\w+|[,/]+/)||l(this).removeClass("not_valid")})}}),this},l.fn.tagsInput.updateTagsField=function(e,t){var a=l(e).attr("id");l(e).val(t.join(u[a]))},l.fn.tagsInput.importTags=function(e,t){l(e).val("");var a=l(e).attr("id"),n=t.split(u[a]);for(i=0;i<n.length;i++)l(e).addTag(n[i],{focus:!1,callback:!1});d[a]&&d[a].onChange&&d[a].onChange.call(e,e,n[i])};function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.tType="open",a.mode="list",a.page=1,a.ticket=null,a.load=function(){$("#subAA").addClass("open").next().slideDown(250),setTimeout(c,250),$("#ticklist").css("active")},a.progressbar.complete(),t.getProfile().then(function(e){a.profile=e,a.tstats={},a.tstats.open=0,a.tstats.closed=0,a.user_names=[],s(),a.tType="open",a.onTypeChange(),a.load(),a.changePage(a.page)}),a.updateAccountView=function(){t.getAccounts().then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t,a.load()}).catch(function(e){console.log(e)})};var s=function(){a.user_names=[],t.getUsers().then(function(e){e.users.forEach(function(e){a.user_names[e._id]=e.username+" ( "+e.first_name+" "+e.last_name+" )"})})};a.onTypeChange=function(){a.mode="list","open"==a.tType?($("#tclosed, #tall").removeClass("active"),$("#topen").addClass("active")):"closed"==a.tType?($("#topen, #tall").removeClass("active"),$("#tclosed").addClass("active")):"all"==a.tType&&($("#tclosed, #topen").removeClass("active"),$("#tall").addClass("active"))},a.changeType=function(e){a.tType=e,a.onTypeChange(),a.changePage(a.page)},a.openTicket=function(e){console.log("ill open ticket "+e),a.mode="view",t.getTicket(e).then(function(e){console.log(e),a.ticket=e})},a.changePage=function(e){a.page=e,t.getTickets(a.tType,a.page).then(function(e){return a.count=e.count,a.data=e.docs,a.pages=e.pages,a.page=e.page,a.limit=e.limit,"agent"!==a.profile.account_type&&a.updateAccountView(),s(),t.getTicketStats()}).then(function(e){a.tstats=e}).catch(function(e){console.log(e)})}}else e.path("/login");var l,u,d}]),angular.module("billinguiApp").controller("PriceTableController",["$scope","api","$location","$stateParams","$uibModal","$timeout","Upload","SweetAlert","ngProgressFactory",function(t,e,a,n,o,i,r,c,s){if(e.isAuthed()){t.progressbar=s.createInstance(),console.log(t.progressbar),t.progressbar.start();t.load=function(){var e=$("#pinHead");$("#ptables").addClass("active");e.addClass("open").next().slideDown(250)},e.updateProfile().then(function(e){t.profile=e,t.load(),t.progressbar.complete()}).catch(function(e){console.log(e)}),t.trtoImport=function(){t.provid="TRTO",t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-import-rate.html",controller:"PriceModalController",scope:t}),t.modal.result.then(function(e){c.swal({title:"Good Job!",text:"Rates Imported!",type:"success",closeOnConfirm:!0},function(e){})},function(){console.log("but i waz dizmizeddd")})},t.trloImport=function(){t.provid="TRLO",t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-import-rate.html",controller:"PriceModalController",scope:t}),t.modal.result.then(function(e){c.swal({title:"Good Job!",text:"Rates Imported!",type:"success",closeOnConfirm:!0},function(e){})},function(){console.log("but i waz dizmizeddd")})},t.trtlImport=function(){t.provid="TRTL",t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-import-rate.html",controller:"PriceModalController",scope:t}),t.modal.result.then(function(e){c.swal({title:"Good Job!",text:"Rates Imported!",type:"success",closeOnConfirm:!0},function(e){})},function(){console.log("but i waz dizmizeddd")})},t.load()}else a.path("/login")}]),angular.module("billinguiApp").controller("PriceModalController",["$uibModalInstance","$scope","api","$stateParams","Upload","$timeout",function(e,a,t,n,o,i){a.cancel=function(){e.dismiss()},a.importOK=function(){var t=a.filecsv;t&&(t.upload=o.upload({url:"/api/pricetables/"+a.provid+"/import?token="+a.profile.token,data:{rate:t}}),e.close(),t.upload.then(function(e){i(function(){t.result=e.data})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))}}]),angular.module("billinguiApp").controller("TicketController",["$scope","api","$location","$stateParams","SweetAlert",function(a,t,n,o,i){if(t.isAuthed()){function e(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#subAA").addClass("open").next().slideDown(250),setTimeout(e,250),$("#ticklist").css("active")},t.getProfile().then(function(e){return a.profile=e,t.getTicket(o.id)}).then(function(e){if(console.log(e),a.ticket=e,"agent"!==a.profile.account_type)return t.getAccount(e.data.account)}).then(function(e){if("agent"!==a.profile.account_type)return(a.account=e).wallets.forEach(function(e){!0===e.primary&&(a.account.priwal=e)}),t.getTopupsAcc(e._id,1)}).then(function(e){if("agent"!==a.profile.account_type)return a.tl=e.docs,t.getTransactions(a.account._id,1)}).then(function(e){"agent"!==a.profile.account_type&&(a.tx=e.docs)}),a.updateTicketView=function(){t.getProfile().then(function(e){return a.profile=e,t.getTicket(o.id)}).then(function(e){if(console.log(e),a.ticket=e,"agent"!==a.profile.account_type)return t.getAccount(e.account)}).then(function(e){if("agent"!==a.profile.account_type)return(a.account=e).wallets.forEach(function(e){!0===e.primary&&(a.account.priwal=e)}),t.getTopupsAcc(e._id,1)}).then(function(e){if("agent"!==a.profile.account_type)return a.tl=e.docs,t.getTransactions(a.account._id,1)}).then(function(e){"agent"!==a.profile.account_type&&(a.tx=e.docs)})},a.updateAccountView=function(){t.getAccounts().then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t,a.load()}).catch(function(e){console.log(e)})},a.updateTicket=function(){t.updateTicket(o.id,a.ticket.data).then(function(e){i.swal({title:"Good Job!",text:"Your ticket with id #"+e.ticket_id+" was successfully updated!",type:"success",closeOnConfirm:!0},function(e){e&&a.updateTicketView()})})},a.createTicket=function(){t.createTicket(a.obj).then(function(t){i.swal({title:"Good Job!",text:"Your ticket with id #"+t.ticket_id+" was successfully created!",type:"success",closeOnConfirm:!0},function(e){e&&n.path("/tickets/"+t._id)})})}}else n.path("/login")}]),angular.module("billinguiApp").controller("TransactionListController",["$scope","api","$location","$stateParams","ngProgressFactory","$window","localStorageService",function(c,a,e,t,s,n,l){if(a.isAuthed()){c.localTimezone="";function o(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}c.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(o,250),$("#trlist").css("active"),c.localTimezone=c.filter.timezone,c.progressbar.complete()},a.getProfile().then(function(e){c.profile=e}),a.getTransactionsAll(1).then(function(e){c.progressbar=s.createInstance(),c.progressbar.start(),c.filtered=!1,c.filterBase="",c.summary={},c.count=e.count,c.data=e.docs,c.page=e.page,c.limit=10,c.currencies=[];for(var t=l.get("currencies"),a=0;a<t.length;a++){for(var n=0;n<c.currencies.length;n++){var o=0;if(c.currencies[n].symbol==t[a].symbol){o=1;break}}if(1!=o)(i={}).symbol=t[a].symbol,c.currencies.push(i)}c.sources=new Array({sou:"System top-up"},{sou:"Refund system"},{sou:"Affiliate system"},{sou:"Topup request"},{sou:"System Refund"},{sou:"System"},{sou:"ePin purchase"});for(a=0;a<c.data.length;a++){for(n=0;n<c.sources.length;n++){o=0;if(c.sources[n].sou==c.data[a].source){o=1;break}}var i;if(1!=o)(i={}).sou=c.data[a].source,c.sources.push(i)}for(a=0;a<c.data.length;a++)if("deb"==c.data[a].type){var r=c.data[a].description.split("paid with");c.data[a].description=r[0]}return l.get("acnames")}).then(function(e){var t=[];(c.accounts=e).forEach(function(e){t[e._id]=e.account_name}),c.account_names=t,c.load()}).catch(function(e){console.log(e)}),c.filter={date_from:"",time_from:"",account:"all",date_to:"",time_to:"",timezone:"",type:"",description:"",currency:"",wallet_id:"",source:"",transaction_id:""},c.applyFilter=function(){c.progressbar=s.createInstance(),c.progressbar.start();var e=c.filter;if(""!=c.filter.time_from){var t=new Date(c.filter.time_from.getTime()-6e4*c.filter.time_from.getTimezoneOffset());e.time_from=t}if(""!=c.filter.time_to){t=new Date(c.filter.time_to.getTime()-6e4*c.filter.time_to.getTimezoneOffset());e.time_to=t}a.getTransactionsFiltered(e,c.page).then(function(e){if(""!=c.filter.time_from){var t=new Date(c.filter.time_from.getTime()+6e4*c.filter.time_from.getTimezoneOffset());c.filter.time_from=t}if(c.filter.time_to){t=new Date(c.filter.time_to.getTime()+6e4*c.filter.time_to.getTimezoneOffset());c.filter.time_to=t}c.filtered=!0,c.count=e.count,c.progressbar.complete(),c.data=e.docs;for(var a=0;a<c.data.length;a++)if("deb"==c.data[a].type){var n=c.data[a].description.split("paid with");c.data[a].description=n[0]}return c.page=e.page,c.limit=15,c.filterBase=e.filter,l.get("acnames")}).then(function(e){var t=[];e.forEach(function(e){t[e._id]=e.account_name}),c.account_names=t,c.account_names[c.profile.main_account]="Me"}).catch(function(e){console.log(e),c.progressbar.complete()})},c.clearFilter=function(){c.filtered=!1,c.filterBase="",c.filter={date_from:"",time_from:"",account:"all",date_to:"",time_to:"",timezone:"",type:"",description:"",currency:"",wallet_id:"",source:"",transaction_id:""},c.filter.timezone=c.localTimezone,c.changePage(1),c.progressbar.complete()},c.changePage=function(e){if(c.progressbar=s.createInstance(),c.progressbar.start(),c.page=e,c.filtered){if(""!=c.filter.time_from){var t=new Date(c.filter.time_from.getTime()-6e4*c.filter.time_from.getTimezoneOffset());filterparam.time_from=t}if(""!=c.filter.time_to){t=new Date(c.filter.time_to.getTime()-6e4*c.filter.time_to.getTimezoneOffset());filterparam.time_to=t}a.getTransactionsFiltered(c.filter,c.page).then(function(e){if(""!=c.filter.time_from){var t=new Date(c.filter.time_from.getTime()+6e4*c.filter.time_from.getTimezoneOffset());c.filter.time_from=t}if(c.filter.time_to){t=new Date(c.filter.time_to.getTime()+6e4*c.filter.time_to.getTimezoneOffset());c.filter.time_to=t}c.count=e.count,c.data=e.docs;for(var a=0;a<c.data.length;a++)if("deb"==c.data[a].type){var n=c.data[a].description.split("paid with");c.data[a].description=n[0]}return c.page=e.page,c.limit=20,c.filterBase=e.filter,l.get("acnames")}).then(function(e){var t=[];e.forEach(function(e){t[e._id]=e.account_name}),c.account_names=t,c.account_names[c.profile.main_account]="Me",c.progressbar.complete()}).catch(function(e){console.log(e),c.progressbar.complete()})}else a.getTransactionsAll(c.page).then(function(e){if(""!=c.filter.time_from){var t=new Date(c.filter.time_from.getTime()+6e4*c.filter.time_from.getTimezoneOffset());c.filter.time_from=t}if(c.filter.time_to){t=new Date(c.filter.time_to.getTime()+6e4*c.filter.time_to.getTimezoneOffset());c.filter.time_to=t}c.count=e.count,c.data=e.docs;for(var a=0;a<c.data.length;a++)if("deb"==c.data[a].type){var n=c.data[a].description.split("paid with");c.data[a].description=n[0]}return c.page=e.page,c.limit=25,l.get("acnames")}).then(function(e){var t=[];e.forEach(function(e){t[e._id]=e.account_name}),c.account_names=t,c.load()}).catch(function(e){console.log(e),c.progressbar.complete()})},c.popup1={opened:!1},c.popup2={opened:!1},c.open1=function(){c.popup1.opened=!0},c.open2=function(){c.popup2.opened=!0}}else e.path("/login")}]),angular.module("billinguiApp").controller("LoginListController",["$scope","api","$location","$stateParams","ngProgressFactory","$rootScope",function(t,a,e,n,o,i){if(a.isAuthed()){t.progressbar=o.createInstance(),console.log(t.progressbar),t.progressbar.start();function r(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(r,250),$("#lglist").css("active")},a.getProfile().then(function(e){t.profile=e,t.progressbar.complete(),t.page=1,t.changePage(t.page)}),t.changePage=function(e){t.page=e,a._get("/loginlogs/"+t.page).then(function(e){t.count=e.count,t.data=e.docs,t.pages=e.pages,t.page=e.page,t.limit=e.limit,t.account_names=i.account_names(),t.load()}).catch(function(e){console.log(e)})}}else e.path("/login")}]),angular.module("billinguiApp").controller("TopupListController",["$scope","$interval","api","$location","$stateParams","$uibModal","ngProgressFactory","$rootScope","$window","SweetAlert","localStorageService",function(i,e,n,t,a,o,r,c,s,l,u){if(n.isAuthed()){function d(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}i.localTimezone="",i.applied=!1,i.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(d,250),$("#tolist").css("active")},n.getProfile().then(function(e){return i.profile=e,i.progressbar=r.createInstance(),i.progressbar.start(),i.filtered=!1,i.filterBase="",i.summary={},i.filter={date_from:"",time_from:"",date_to:"",time_to:"",timezone:"",account:"all",customer_reference:"",operator_reference:"",success:"",code:"",product_id:"",target:"",country:"",operator_name:"",channel:"",vnd_sim:"",api_transactionid:"",currency:"",wholesaler:"",tag:"",type:""},u.get("acnames")}).then(function(e){var t=[];i.onlyAgent=[],i.onlyWholesaler=[];for(var a=0;a<e.length;a++){var n=e[a];t[n._id]=n.account_name}return i.account_names=t,i.accounts=e,u.get("clist")}).then(function(e){return i.countries=e,i.load(),i.page=1,i.changePage(i.page),i.localTimezone=i.filter.timezone,i.currencies=[],u.get("currencies")}).then(function(e){for(var t=0;t<e.length;t++){for(var a=0;a<i.currencies.length;a++){var n=0;if(i.currencies[a].symbol==e[t].symbol){n=1;break}}if(1!=n){var o={};o.symbol=e[t].symbol,i.currencies.push(o)}}return!1}).then(function(e){i.operators=[]}).catch(function(e){console.log(e)});var p=!0;i.live_stream=!1;function f(){p=!0,e.cancel(i.timer)}i.liveStreamStatus=function(){this.live_stream?(p=!0,i.timer=e(function(){p&&(p=!1,i.progressbar=r.createInstance(),i.progressbar.start(),n._get("/topuplog/1??fields=account,type,vnd_sim,app_host,operator_reference,customer_reference,api_transactionid,time,target,product_id,country,operator_name,topup_amount,topup_currency,success,code,message,completed_in,channel,related_transactions,tag,route_tag,wholesaler,state").then(function(e){i.data=e.docs,p=!0,i.progressbar.complete()}))},3e3)):f()},i.TopupsapplyFilter=function(){this.live_stream=!1,f(),i.filterBase="";var e=i.filter;if(""!=i.filter.time_from){var t=new Date(i.filter.time_from.getTime()-6e4*i.filter.time_from.getTimezoneOffset());e.time_from=t}if(""!=i.filter.time_to){t=new Date(i.filter.time_to.getTime()-6e4*i.filter.time_to.getTimezoneOffset());e.time_to=t}i.progressbar=r.createInstance(),i.progressbar.start(),n.getTopupsFilter(e,i.page).then(function(e){if(i.progressbar.complete(),""!=i.filter.time_from){var t=new Date(i.filter.time_from.getTime()+6e4*i.filter.time_from.getTimezoneOffset());i.filter.time_from=t}""!=i.filter.time_to&&(t=new Date(i.filter.time_to.getTime()+6e4*i.filter.time_to.getTimezoneOffset()),i.filter.time_to=t),i.count=e.count,i.data=e.docs,i.limit=20,i.filterBase=e.filter,i.summary=e.summary,i.filtered=!0}).catch(function(e){console.log(e)})},i.clearFilter=function(){i.filtered=!1,i.filterBase="",i.filter={date_from:"",time_from:"",date_to:"",time_to:"",timezone:"",account:"all",customer_reference:"",operator_reference:"",success:"",code:"",product_id:"",target:"",country:"",operator_name:"",channel:"",vnd_sim:"",api_transactionid:"",currency:"",tag:"",type:""},i.filter.timezone=i.localTimezone,i.changePage(1)},i.changePage=function(e){if(i.page=e,i.filtered){var t=i.filter;if(""!=i.filter.time_from){var a=new Date(i.filter.time_from.getTime()-6e4*i.filter.time_from.getTimezoneOffset());t.time_from=a}if(""!=i.filter.time_to){a=new Date(i.filter.time_to.getTime()-6e4*i.filter.time_to.getTimezoneOffset());t.time_to=a}n.getTopupsFilter(t,i.page).then(function(e){if(""!=i.filter.time_from){var t=new Date(i.filter.time_from.getTime()+6e4*i.filter.time_from.getTimezoneOffset());i.filter.time_from=t}if(""!=i.filter.time_to){t=new Date(i.filter.time_to.getTime()+6e4*i.filter.time_to.getTimezoneOffset());i.filter.time_to=t}i.count=e.count,i.data=e.docs,i.limit=10,i.filterBase=e.filter,i.summary=e.summary,i.progressbar.complete()}).catch(function(e){console.log(e)})}else n._get("/topuplog/"+i.page+"?fields=account,type,vnd_sim,app_host,operator_reference,customer_reference,api_transactionid,time,target,product_id,country,operator_name,topup_amount,topup_currency,success,code,message,completed_in,channel,related_transactions,tag,wholesaler,route_tag,state").then(function(e){i.count=e.count,i.data=e.docs,i.page=e.page,i.limit=15,i.progressbar.complete()}).catch(function(e){console.log(e)})},i.popup1={opened:!1},i.popup2={opened:!1},i.open1=function(){i.popup1.opened=!0},i.open2=function(){i.popup2.opened=!0},i.showLog=function(e){i.recid=e,n.getTopup(e).then(function(e){i.rec=e,i.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-view-log.html",controller:"AccountsModalController",scope:i}),i.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})})},i.refundTx=function(){n._get("/topuplog/item/"+i.recid+"/refund").then(function(e){i.rec=e,l.swal({title:"Good Job!",text:"TopupLog has been refunded!",type:"success",closeOnConfirm:!0},function(e){e&&$uibModalInstance.dismiss()})}),$uibModalInstance.dismiss(),i.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})}}else t.path("/login")}]),angular.module("billinguiApp").controller("RateListController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(t,a,e,n,o,i,r){if(a.isAuthed()){t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.progressbar.complete(),t.newRate=function(){t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-rate.html",controller:"RateListModalController",scope:t}),t.modal.result.then(function(e){i(function(){a.getRates().then(function(e){t.myrates=e.rates,t.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})},t.editRate=function(e){t.rateid=e,a.getRate(e).then(function(e){t.rate=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-rate.html",controller:"RateListModalController",scope:t}),t.modal.result.then(function(e){i(function(){a.getRates().then(function(e){t.myrates=e.rates}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})})},t.deleteRate=function(e){t.rateid=e,a.getRate(e).then(function(e){t.rate=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-rate.html",controller:"RateListModalController",scope:t}),t.modal.result.then(function(e){i(function(){a.getRates().then(function(e){t.myrates=e.rates}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})})},t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250)},a.getProfile().then(function(e){return t.profile=e,t.load(),a.getRates()}).then(function(e){t.myrates=e.rates})}else e.path("/login")}]),angular.module("billinguiApp").controller("RateListModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,a,n,e,o){a.createRateOK=function(){n.createRate(a.rate).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.editRateOK=function(){var e={};e.rate=a.rate.rate,n.editRate(a.rateid,e).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.deleteRateOK=function(){n.deleteRate(a.rateid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.invalidatePinOK=function(){n.invalidatePin(a.batchid,a.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.invalidateBatchOK=function(){n.invalidateBatch(a.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.cancel=function(){t.dismiss()},a.popup1={opened:!1},a.popup2={opened:!1},a.open1=function(){a.popup1.opened=!0},a.open2=function(){a.popup2.opened=!0}}]),angular.module("billinguiApp").controller("UsersController",["$scope","api","$location","$uibModal","$timeout","ngProgressFactory",function(a,n,e,o,i,t){if(n.isAuthed()){a.progressbar=t.createInstance(),console.log(a.progressbar),a.progressbar.start(),n.updateProfile().then(function(e){a.profile=e}).catch(function(e){console.log(e)});function r(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(r,250),$("#userlist").css("active")};function c(){n.getUsers().then(function(e){return a.users=e.users,a.progressbar.complete(),n.getAccounts()}).then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t}).catch(function(e){console.log(e)})}c(),a.load(),a.editUser=function(t,e){n.getUser(t,e).then(function(e){a.user=e,a.accid=t,a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-user.html",controller:"UserListModalController",scope:a}),a.modal.result.then(function(e){i(function(){c()})},function(){console.log("but i waz dizmizeddd")})})},a.deleteUser=function(t,e){n.getUser(t,e).then(function(e){a.user=e,a.accid=t,a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-user.html",controller:"UserListModalController",scope:a}),a.modal.result.then(function(e){i(function(){c()})},function(){console.log("but i waz dizmizeddd")})})}}else e.path("/login")}]),angular.module("billinguiApp").controller("UserListModalController",["$uibModalInstance","$scope","api","$stateParams",function(t,a,n,e){a.accountsCancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.uploadAvatar=function(t,e){a.f=t,a.errFile=e&&e[0],t&&(t.upload=Upload.upload({url:"/api/accounts/"+a.accid+"/users/"+a.user._id+"/avatar?token="+a.profile.token,data:{userPhoto:t}}),t.upload.then(function(e){$timeout(function(){t.result=e.data})},function(e){0<e.status&&(a.errorMsg=e.status+": "+e.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},a.newUserCancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.cancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.editUserOK=function(){var e={};for(key in a.user)"main_account"!=key&&"__v"!=key&&"_id"!=key&&"createdAt"!=key&&"last_login"!=key&&"updatedAt"!=key&&"password"!=key&&"passwordconfirm"!=key&&(e[key]=a.user[key]);a.user.password&&a.user.password==a.user.passwordconfirm&&(e.password=a.user.password),n.editUser(a.accid,a.user._id,e).then(function(e){}).catch(function(e){console.log(e)}),t.close()},a.deleteUserOK=function(){a.uconfirm==a.user.username?(n.deleteUser(a.accid,a.user._id).then(function(e){}).catch(function(e){console.log(e)}),t.close()):console.log("not match")},a.editCredentialOK=function(){n.updateCredential(a.rec._id,a.rec).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})}}]),angular.module("billinguiApp").controller("wListController",["$scope","api","$location","$stateParams","$uibModal","$timeout",function(a,t,e,n,o,i){if(t.isAuthed()){function r(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(r,250),$("#wlist").css("active")},a.page=1,t.getProfile().then(function(e){a.profile=e}),t.getWithdrawals(a.page).then(function(e){return a.total=e.total,a.data=e.docs,a.pages=e.pages,a.page=e.page,a.limit=e.limit,t.getAccounts()}).then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t,a.load()}).catch(function(e){console.log(e)}),a.changePage=function(e){a.page=e,t.getWithdrawals(a.page).then(function(e){return a.total=e.total,a.data=e.docs,a.pages=e.pages,a.page=e.page,a.limit=e.limit,t.getAccounts()}).then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t,a.load()}).catch(function(e){console.log(e)})},a.review=function(e){a.recid=e,t.getWithdrawals(a.recid).then(function(e){a.rec=e,a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-withdrawal.html",controller:"WithdrawalModalController",scope:a}),a.modal.result.then(function(e){i(function(){t.getWithdrawals(a.page).then(function(e){return a.total=e.total,a.data=e.docs,a.pages=e.pages,a.page=e.page,a.limit=e.limit,t.getAccounts()}).then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t,a.load()}).catch(function(e){console.log(e)})})},function(){console.log("but i waz dizmizeddd")})}).catch(function(e){console.log(e)})}}else e.path("/login")}]),angular.module("billinguiApp").controller("WithdrawalModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,e,a,n,o){e.cancel=function(){t.dismiss()},e.weditOK=function(){a.updateWithdrawal(e.recid,e.rec).then(function(e){t.close()}).catch(function(e){console.log(e),t.dismiss()})}}]),angular.module("billinguiApp").controller("ProviderController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(t,a,e,n,o,i,r){if(a.isAuthed()){t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(c,250),$("#prlist").css("active")},a.updateProfile().then(function(e){t.profile=e,t.progressbar.complete(),t.load()}).catch(function(e){console.log(e)}),t.deletePackage=function(e){t.recid=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-package.html",controller:"PackagesModalController",scope:t}),t.modal.result.then(function(e){i(function(){updatePackagesView()})},function(){console.log("but i waz dizmizeddd")})},t.editPackage=function(e){t.recid=e,a.getPackage(n.account,e).then(function(e){t.rec=e,t.rec.package_price=parseInt(t.rec.package_price),t.rec.package_callbalance=parseInt(t.rec.package_callbalance)}),t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-package.html",controller:"PackagesModalController",scope:t}),t.modal.result.then(function(e){i(function(){updatePackagesView()})},function(){console.log("but i waz dizmizeddd")})},t.newPackage=function(){t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-package.html",controller:"PackagesModalController",scope:t}),t.modal.result.then(function(e){i(function(){updatePackagesView()})},function(){console.log("but i waz dizmizeddd")})};a.getProviders().then(function(e){t.providers=e.providers}),t.load()}else e.path("/login")}]),angular.module("billinguiApp").controller("ProviderModalController",["$uibModalInstance","$scope","api","$stateParams",function(t,e,a,n){e.packageCancel=function(){t.dismiss()},e.deleteOK=function(){a.deletePackage(n.account,e.recid).then(function(e){t.close()})},e.editPackageOK=function(){a.updatePackage(n.account,e.recid,e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})},e.newPackageOK=function(){a.createPackage(n.account,e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})}}]),angular.module("billinguiApp").controller("PinBatchListController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(a,t,e,n,o,i,r){if(t.isAuthed()){a.progressbar=r.createInstance(),console.log(a.progressbar),a.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#pins").addClass("open").next().slideDown(250),setTimeout(c,250),$("#pblist").css("active")},t.getProfile().then(function(e){a.profile=e,a.progressbar.complete()}),t.getPinBatchList().then(function(e){return a.batches=e.batches,a.bcount=e.count,a.load(),t.getAccounts()}).then(function(e){a.accounts=e;var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),a.account_names=t,a.load()}).catch(function(e){throw e}),a.invalidateBatch=function(e){a.batchid=e,a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-invalidate-batch.html",controller:"PinBatchModalController",scope:a}),a.modal.result.then(function(e){i(function(){t.getPinBatchList().then(function(e){a.batches=e.batches,a.bcount=e.count,a.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})},a.newBatch=function(){a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-batch.html",controller:"PinBatchModalController",scope:a}),a.modal.result.then(function(e){i(function(){t.getPinBatchList().then(function(e){a.batches=e.batches,a.bcount=e.count,a.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})}}else e.path("/login")}]),angular.module("billinguiApp").controller("PinBatchModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,e,a,n,o){e.createBatchOK=function(){a.createBatch(e.batch).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidatePinOK=function(){a.invalidatePin(e.batchid,e.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidateBatchOK=function(){a.invalidateBatch(e.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.cancel=function(){t.dismiss()},e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0}}]),angular.module("billinguiApp").controller("PinSearchController",["$scope","api","$location","ngProgressFactory",function(i,r,e,t){if(r.isAuthed()){i.progressbar=t.createInstance(),console.log(i.progressbar),i.progressbar.start();function a(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}i.load=function(){$("#pins").addClass("open").next().slideDown(250),setTimeout(a,250),$("#ps").css("active")},i.progressbar.complete(),i.popup1={opened:!1},i.popup2={opened:!1},i.open1=function(){i.popup1.opened=!0},i.open2=function(){i.popup2.opened=!0},i.Pins={},i.PinProperty=0,i.currencies=[],i.page=1,i.filtered=!1,i.filter={date_from:"",time_from:"",timezone:"",callerID:"",serial:"",currency:"",topupnumber:"",type:"",date_to:"",time_to:"",pin:"",value:"",valid:"",used:""},r.getAccounts().then(function(e){return i.progressbar=t.createInstance(),i.progressbar.start(),i.account_names=[],e.accounts.forEach(function(e){i.account_names[e._id]=e.account_name}),r.getCurrencies()}).then(function(e){for(var t=0;t<e.length;t++){for(var a=0;a<i.currencies.length;a++){var n=0;if(i.currencies[a].symbol==e[t].symbol){n=1;break}}if(1!=n){var o={};o.symbol=e[t].symbol,i.currencies.push(o)}}return r.getAllPin(i.page)}).then(function(e){i.Pins=e.entries,i.count=e.count,i.limit=e.limit,i.localTimezone=i.filter.timezone,i.progressbar.complete()}).catch(function(e){i.progressbar.complete(),console.log(e)}),i.pinRelation=function(t){i.topupInfo=[],i.transaction=[],r.pinRelationTopup({topupnumber:t.topupnumber}).then(function(e){if(e.forEach(function(e){t.used_date.split(".")[0]==e.updatedAt.split(".")[0]&&i.topupInfo.push(e)}),0!=i.topupInfo.length)return r.pinRelationTransaction({ids:i.topupInfo[0].related_transactions})}).then(function(e){i.transaction=e,i.PinProperty=2})},i.changePage=function(e){if(i.page=e,i.progressbar.start(),i.filtered){var t=i.filter;if(""!=i.filter.time_from){var a=new Date(i.filter.time_from.getTime()-6e4*i.filter.time_from.getTimezoneOffset());t.time_from=a}if(""!=i.filter.time_to){a=new Date(i.filter.time_to.getTime()-6e4*i.filter.time_to.getTimezoneOffset());t.time_to=a}r.PinApplyFilter(t,i.page).then(function(e){if(""!=i.filter.time_from){var t=new Date(i.filter.time_from.getTime()+6e4*i.filter.time_from.getTimezoneOffset());i.filter.time_from=t}""!=i.filter.time_to&&(t=new Date(i.filter.time_to.getTime()+6e4*i.filter.time_to.getTimezoneOffset()),i.filter.time_to=t),i.Pins=e.entries,i.count=e.count,i.limit=e.limit,i.filterBase=e.filter,i.filtered=!0,i.progressbar.complete()}).catch(function(e){console.log(e),i.progressbar.complete()})}else r.getAllPin(i.page).then(function(e){i.Pins=e.entries,i.count=e.count,i.limit=e.limit,i.progressbar.complete()}).catch(function(e){console.log(e),i.progressbar.complete()})},i.PinapplyFilter=function(){var e=i.filter;if(""!=i.filter.time_from){var t=new Date(i.filter.time_from.getTime()-6e4*i.filter.time_from.getTimezoneOffset());e.time_from=t}if(""!=i.filter.time_to){t=new Date(i.filter.time_to.getTime()-6e4*i.filter.time_to.getTimezoneOffset());e.time_to=t}r.PinApplyFilter(e,i.page).then(function(e){if(""!=i.filter.time_from){var t=new Date(i.filter.time_from.getTime()+6e4*i.filter.time_from.getTimezoneOffset());i.filter.time_from=t}""!=i.filter.time_to&&(t=new Date(i.filter.time_to.getTime()+6e4*i.filter.time_to.getTimezoneOffset()),i.filter.time_to=t),i.Pins=e.entries,i.count=e.count,i.limit=e.limit,i.filterBase=e.filter,i.filtered=!0,i.progressbar.complete()}).catch(function(e){console.log(e),i.progressbar.complete()})},i.clearFilter=function(){i.filtered=!1,i.filterBase="",i.filter={date_from:"",time_from:"",timezone:"",callerID:"",serial:"",currency:"",topupnumber:"",type:"",date_to:"",time_to:"",pin:"",value:"",valid:"",used:""},i.filter.timezone=i.localTimezone,i.changePage(1)},i.getPinById=function(e){r.getPin(e).then(function(e){i.obj=e,i.PinProperty=1})},i.resetPin=function(){i.PinProperty=0},i.enabledisablePin=function(t){r.getPin(t._id).then(function(e){return r.invalidatePin(e.batch_id,e._id,t.valid)}).then(function(e){}).catch(function(e){console.log(e)})}}else e.path("/")}]),angular.module("billinguiApp").controller("PinListController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(a,n,e,o,i,r,t){if(n.isAuthed()){a.progressbar=t.createInstance(),console.log(a.progressbar),a.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.invalidatePin=function(e,t){a.batchid=e,a.pinid=t,a.modal=i.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-invalidate-pin.html",controller:"PinBatchModalController",scope:a}),a.modal.result.then(function(e){r(function(){n.getPins(o.id).then(function(e){a.pins=e.pins,a.batch=e.batchinfo,a.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})},a.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(c,250)},n.getProfile().then(function(e){a.profile=e}),n.getPins(o.id).then(function(e){a.pins=e.pins,a.batch=e.batchinfo,a.load()})}else e.path("/login")}]),angular.module("billinguiApp").controller("NewAccountController",["$uibModal","$scope","api","$location","$stateParams","$timeout","Upload","ngProgressFactory","SweetAlert",function(e,a,n,o,t,i,r,c,s){if(n.isAuthed()){function l(){var e=$("#page-container"),t=$("#page-content"),a=$("header"),n=$("#page-content + footer"),o=$("#sidebar"),i=$("#sidebar-alt"),r=($(".sidebar-scroll"),$(window).height()),c=o.outerHeight(),s=i.outerHeight(),l=a.outerHeight(),u=n.outerHeight();a.hasClass("navbar-fixed-top")||a.hasClass("navbar-fixed-bottom")||c<r&&s<r?e.hasClass("footer-fixed")?t.css("min-height",r-l+"px"):t.css("min-height",r-(l+u)+"px"):e.hasClass("footer-fixed")?t.css("min-height",(s<c?c:s)-l+"px"):t.css("min-height",(s<c?c:s)-(l+u)+"px")}a.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(l,250)},n.getProfile().then(function(e){return a.profile=e,a.load(),"system"==e.account_type?a.distr=!0:a.distr=!1,a.account={},a.account.type="wholesaler",a.account.legal_type="company",a.account.permitted_apis=["TRTO","TRLO","MFIN","ETRX","SSLW","UKBL","NGIE","NGEK","NGFT","NGBP","NGIB","NGEN","NGCABIA","NGCABIB","NGCAAVB","NGCAAVC","NGCABABA","NGCABABB"],a.availcur=[],a.currencies=[],n.getRates()}).then(function(e){return e.rates.forEach(function(e){a.availcur.contains(e.destination)||a.availcur.push(e.destination)}),n.getCurrencies()}).then(function(e){e.forEach(function(e){a.currencies[e.symbol]=e.name})}),a.newPA=function(){a.baa={},a.baa.apid=null,a.modal=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-cc.html",controller:"UserModalController",scope:a,resolve:{items:function(){return{}}}}),a.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})},a.removePA=function(t){a.account.permitted_apis=a.account.permitted_apis.filter(function(e){return e!==t})},a.newAccount=function(){a.progressbar=c.createInstance(),a.progressbar.start(),n.createAccount(a.account).then(function(t){n.updateProfile(),a.progressbar.complete(),s.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){e&&o.path("/account/"+t._id)})}).catch(function(e){a.progressbar.complete(),a.emsg=e.data.error.status+" - "+e.data.error.message,s.swal("Oops!","Error : "+a.emsg,"error")})}}else o.path("/login")}]),angular.module("billinguiApp").controller("NewAgentController",["$uibModal","$scope","api","$location","$stateParams","$timeout","Upload","ngProgressFactory","SweetAlert",function(e,a,n,o,t,i,r,c,s){if(n.isAuthed()){function l(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(l,250)},n.getProfile().then(function(e){return a.profile=e,a.account={},a.account.legal_type="company",a.availcur=[],a.currencies=[],a.load(),"wholesaler"==e.account_type?a.distr=!0:a.distr=!1,console.log(e),n.getAccount(t.id)}).then(function(e){return"wholesaler"==(a.parent=e).type?(console.log("i am wholesaler"),a.account.type="reseller",a.canCreateReseller=!0):"reseller"==e.type?(a.account.type="agent",a.canCreateReseller=!1):console.log("smth wrong"),n.getRates()}).then(function(e){return e.rates.forEach(function(e){a.availcur.contains(e.destination)||a.availcur.push(e.destination)}),n.getCurrencies()}).then(function(e){e.forEach(function(e){a.currencies[e.symbol]=e.name})}),a.newAccount=function(){a.progressbar=c.createInstance(),a.progressbar.start(),n.createChildAccount(t.id,a.account).then(function(t){n.updateProfile(),a.progressbar.complete(),s.swal({title:"Good Job!",text:"Changes Saved!",type:"success",closeOnConfirm:!0},function(e){e&&o.path("/account/"+t._id)})}).catch(function(e){a.emsg=e.data.error.status+" - "+e.data.error.message,s.swal("Oops!","Error : "+a.emsg,"error")})}}else o.path("/login")}]),angular.module("billinguiApp").controller("MappingController",["$scope","api","$location","$stateParams","$uibModal","ngProgressFactory",function(t,a,e,n,o,i){if(a.isAuthed()){t.progressbar=i.createInstance(),console.log(t.progressbar),t.progressbar.start();function r(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(r,250),$("#trlist").css("active")},a.getProfile().then(function(e){t.profile=e,t.progressbar.complete()}),t.updateMapView=function(){t.changePage(t.page)},a.getMappings(1).then(function(e){t.count=e.count,t.data=e.docs,t.pages=e.pages,t.page=e.page,t.limit=e.limit,t.load()}).catch(function(e){console.log(e)}),t.changePage=function(e){t.page=e,a.getMappings(t.page).then(function(e){t.count=e.count,t.data=e.docs,t.pages=e.pages,t.page=e.page,t.limit=e.limit}).catch(function(e){console.log(e)})},t.newMap=function(){t.rec={},t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-mapping.html",controller:"MappingModalController",scope:t}),t.modal.result.then(function(e){t.updateMapView()},function(e){})},t.editMap=function(e){t.recid=e,t.rec={},t.availcur=[],a.getMapping(e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-mapping.html",controller:"MappingModalController",scope:t}),t.modal.result.then(function(e){t.updateMapView()},function(e){})})},t.deleteMap=function(e){a.deleteMapping(e).then(function(e){t.updateMapView()})}}else e.path("/login")}]),angular.module("billinguiApp").controller("MappingModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,a,e,n,o){e.getProfile().then(function(e){"wholesaler"==(a.profile=e).account_type?a.distr=!0:a.distr=!1}),a.newMappingOK=function(){e.newMapping(a.rec).then(function(e){t.close()})},a.editMappingOK=function(){e.editMapping(a.recid,a.rec).then(function(e){t.close()})},a.newUserCancel=function(){console.log("Cancel Was clicked"),t.dismiss()},a.newCCOK=function(){console.log(a.account.permitted_apis,a.baa.apid),a.account.permitted_apis.push(a.baa.apid),t.close()}}]),angular.module("billinguiApp").controller("CommLinkController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(t,a,e,n,o,i,r){if(a.isAuthed()){t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250),$("#clinks").css("active")},t.progressbar.complete(),t.newLink=function(){t.rate={},t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-link.html",controller:"CommLinkModalController",scope:t}),t.modal.result.then(function(e){i(function(){a._get("/commlinks").then(function(e){t.links=e.links,t.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})},updateCredentialView=function(){a.getProfile().then(function(e){return t.profile=e,a._get("/commlinks")}).then(function(e){t.links=e.links,t.load()})},t.linkEdit=function(e){t.recid=e,a._get("/commlinks/"+e).then(function(e){t.rate=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-link.html",controller:"CommLinkModalController",scope:t}),t.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},t.linkDelete=function(e){t.recid=e,a._get("/commlinks/"+e).then(function(e){t.rate=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-link.html",controller:"CommLinkModalController",scope:t}),t.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},a.getProfile().then(function(e){t.profile=e}),a._get("/commlinks").then(function(e){t.links=e.links,t.load()})}else e.path("/login")}]),angular.module("billinguiApp").controller("CommLinkModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,e,a,n,o){e.createLinkOK=function(){e.rate.active||(e.rate.active=!1),a._post("/commlinks",e.rate).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.editLinkOK=function(){a._put("/commlinks/"+e.recid,e.rate).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.deleteLinkOK=function(){a._delete("/commlinks/"+e.recid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidatePinOK=function(){a.invalidatePin(e.batchid,e.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidateBatchOK=function(){a.invalidateBatch(e.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.cancel=function(){t.dismiss()},e.newUserCancel=function(){t.dismiss()},e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0}}]),angular.module("billinguiApp").controller("AccountPoolController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(a,t,e,n,o,i,r){if(t.isAuthed()){a.progressbar=r.createInstance(),console.log(a.progressbar),a.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250),$("#apools").css("active")},a.progressbar.complete(),a.newLink=function(){a.rec={},a.rec.connectionProtocol="evc",a.rec.connectionMode="direct",a.rec.srcNum="",a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-apool.html",controller:"AccountPoolModalController",scope:a}),a.modal.result.then(function(e){i(function(){t._get("/acclinks").then(function(e){a.accounts=e.accounts,a.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})},updateCredentialView=function(){t.getProfile().then(function(e){return a.profile=e,t._get("/acclinks")}).then(function(e){a.accounts=e.accounts,a.load()})},a.linkEdit=function(e){a.recid=e,t._get("/acclinks/"+e).then(function(e){a.rec=e;var t=a.rec.srcNum="";a.rec.sourceNumbers.forEach(function(e){t+=e+","}),a.rec.srcNum=t.substring(0,t.length-1),a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-apool.html",controller:"AccountPoolModalController",scope:a}),a.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},a.linkDelete=function(e){a.recid=e,t._get("/acclinks/"+e).then(function(e){a.rate=e,a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-apool.html",controller:"AccountPoolModalController",scope:a}),a.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},t.getProfile().then(function(e){a.profile=e}),t._get("/acclinks").then(function(e){a.accounts=e.accounts,a.load()})}else e.path("/login")}]),angular.module("billinguiApp").controller("AccountPoolModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,e,a,n,o){e.createLinkOK=function(){e.rec.active||(e.rec.active=!1),a._post("/acclinks",e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.editLinkOK=function(){a._put("/acclinks/"+e.recid,e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.deleteLinkOK=function(){a._delete("/acclinks/"+e.recid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidatePinOK=function(){a.invalidatePin(e.batchid,e.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidateBatchOK=function(){a.invalidateBatch(e.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.cancel=function(){t.dismiss()},e.newUserCancel=function(){t.dismiss()},e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0}}]),angular.module("billinguiApp").controller("MsisdnCacheController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(t,a,e,n,o,i,r){if(a.isAuthed()){t.searchfield="",t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250),$("#ccontrol").css("active")},t.progressbar.complete(),t.doSearch=function(){t.progressbar.start(),a._get("/msisdncache/search/"+t.searchfield).then(function(e){t.cache=e.cache,t.progressbar.complete()})},t.newLink=function(){t.rec={},t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-centry.html",controller:"MsisdnCacheModalController",scope:t}),t.modal.result.then(function(e){i(function(){a._get("/msisdncache").then(function(e){t.cache=e.cache,t.load()}).catch(function(e){throw e})})},function(){console.log("but i waz dizmizeddd")})},updateCredentialView=function(){a.getProfile().then(function(e){return t.profile=e,a._get("/msisdncache")}).then(function(e){t.cache=e.cache,t.load()})},t.linkEdit=function(e){t.recid=e,a._get("/msisdncache/"+e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-centry.html",controller:"MsisdnCacheModalController",scope:t}),t.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},t.linkDelete=function(e){t.recid=e,a._get("/msisdncache/"+e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-centry.html",controller:"MsisdnCacheModalController",scope:t}),t.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},a.getProfile().then(function(e){t.profile=e}),a._get("/msisdncache").then(function(e){t.cache=e.cache,t.load()})}else e.path("/login")}]),angular.module("billinguiApp").controller("MsisdnCacheModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,e,a,n,o){e.createLinkOK=function(){e.rate.active||(e.rate.active=!1),a._post("/msisdncache",e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.editLinkOK=function(){a._put("/msisdncache/"+e.recid,e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.deleteLinkOK=function(){a._delete("/msisdncache/"+e.recid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidatePinOK=function(){a.invalidatePin(e.batchid,e.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidateBatchOK=function(){a.invalidateBatch(e.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.cancel=function(){t.dismiss()},e.newUserCancel=function(){t.dismiss()},e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0}}]),angular.module("billinguiApp").controller("DFRController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(t,a,e,n,o,i,r){if(a.isAuthed()){t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){var e=$("#page-container"),t=$("#page-content"),a=$("header"),n=$("#page-content + footer"),o=$("#sidebar"),i=$("#sidebar-alt"),r=($(".sidebar-scroll"),$(window).height()),c=o.outerHeight(),s=i.outerHeight(),l=a.outerHeight(),u=n.outerHeight();a.hasClass("navbar-fixed-top")||a.hasClass("navbar-fixed-bottom")||c<r&&s<r?e.hasClass("footer-fixed")?t.css("min-height",r-l+"px"):t.css("min-height",r-(l+u)+"px"):e.hasClass("footer-fixed")?t.css("min-height",(s<c?c:s)-l+"px"):t.css("min-height",(s<c?c:s)-(l+u)+"px")}function s(){a.getProfile().then(function(e){return t.profile=e,a._get("/drules")}).then(function(e){return t.drules=e.rulesets,a._get("/frules")}).then(function(e){t.frules=e.rulesets,t.load()})}t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250),$("#clinks").css("active")},t.progressbar.complete(),t.newDRule=function(){t.rec={},t.rec.rules=[],t.rec.isSystemWide=!0,t.nrule={},t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-drule.html",controller:"DFRModalController",scope:t}),t.modal.result.then(function(e){i(function(){s()})},function(){console.log("but i waz dizmizeddd")})},t.newFRule=function(){t.rec={},t.rec.rules=[],t.rec.isSystemWide=!0,t.nrule={},t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-new-frule.html",controller:"DFRModalController",scope:t}),t.modal.result.then(function(e){i(function(){s()})},function(){console.log("but i waz dizmizeddd")})};t.drEdit=function(e){t.recid=e,a._get("/drules/"+e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-drule.html",controller:"DFRModalController",scope:t}),t.modal.result.then(function(e){i(function(){s()})},function(){console.log("but i waz dizmizeddd")})})},t.drDelete=function(e){t.recid=e,a._get("/drules/"+e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-drule.html",controller:"DFRModalController",scope:t}),t.modal.result.then(function(e){i(function(){s()})},function(){console.log("but i waz dizmizeddd")})})},t.frEdit=function(e){t.recid=e,a._get("/frules/"+e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-frule.html",controller:"DFRModalController",scope:t}),t.modal.result.then(function(e){i(function(){s()})},function(){console.log("but i waz dizmizeddd")})})},t.frDelete=function(e){t.recid=e,a._get("/frules/"+e).then(function(e){t.rec=e,t.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-delete-frule.html",controller:"DFRModalController",scope:t}),t.modal.result.then(function(e){i(function(){s()})},function(){console.log("but i waz dizmizeddd")})})},s()}else e.path("/login")}]),angular.module("billinguiApp").controller("DFRModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,a,e,n,o){a.createDROK=function(){a.rec.active=!!a.rec.active,e._post("/drules",a.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.drEditOK=function(){e._put("/drules/"+a.recid,a.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.drDeleteOK=function(){e._delete("/drules/"+a.recid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.createFROK=function(){a.rec.active=!!a.rec.active,e._post("/frules",a.rec).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.frEditOK=function(){},a.frDeleteOK=function(){e._delete("/frules/"+a.recid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.addRule=function(){a.nrule.active=!!a.nrule.active,a.rec.rules.push(a.nrule),a.nrule={}},a.removeRule=function(t){a.nru=[],a.rec.rules.forEach(function(e){e.tag==t.tag||a.nru.push(e)}),a.rec.rules=a.nru},a.invalidatePinOK=function(){e.invalidatePin(a.batchid,a.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.invalidateBatchOK=function(){e.invalidateBatch(a.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},a.cancel=function(){t.dismiss()},a.newUserCancel=function(){t.dismiss()},a.popup1={opened:!1},a.popup2={opened:!1},a.open1=function(){a.popup1.opened=!0},a.open2=function(){a.popup2.opened=!0}}]),angular.module("billinguiApp").controller("SccController",["$scope","api","$location","$uibModal","$timeout","$stateParams","ngProgressFactory",function(t,e,a,n,o,i,r){if(e.isAuthed()){t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250),$("#sc").css("active")};e._get("/scc").then(function(e){t.scc=e,t.progressbar.complete(),t.load()}),t.load()}else a.path("/login")}]),angular.module("billinguiApp").controller("CredentialsController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(a,t,e,n,o,i,r){if(t.isAuthed()){a.progressbar=r.createInstance(),console.log(a.progressbar),a.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(c,250)},a.progressbar.complete(),updateCredentialView=function(){t.getProfile().then(function(e){return a.profile=e,t.getCredentials()}).then(function(e){a.credentials=e.credentials,a.load()})},a.credEdit=function(e){a.recid=e,t.getCredential(e).then(function(e){a.rec=e;var t="";a.rec.sourceNumbers.forEach(function(e){t+=e+","}),a.rec.srcNum=t.substring(0,t.length-1),a.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-credential.html",controller:"UserListModalController",scope:a}),a.modal.result.then(function(e){i(function(){updateCredentialView()})},function(){console.log("but i waz dizmizeddd")})})},t.getProfile().then(function(e){a.profile=e}),t.getCredentials().then(function(e){a.credentials=e.credentials,a.load()})}else e.path("/login")}]),angular.module("billinguiApp").controller("SettingController",["$scope","api","$location","$uibModal","$timeout","$stateParams","ngProgressFactory",function(t,a,e,n,o,i,r){if(a.isAuthed()){t.progressbar=r.createInstance(),console.log(t.progressbar),t.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(c,250)},t.progressbar.complete(),t.setEdit=function(e){t.recid=e,a.getSetting(e).then(function(e){t.rec=e,t.modal=n.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-setting.html",controller:"SettingModalController",scope:t}),t.modal.result.then(function(e){o(function(){s()})},function(){console.log("but i waz dizmizeddd")})})};var s=function(){a.updateProfile().then(function(e){return t.profile=e,"reseller"==t.profile.account_type||"distributor"==t.profile.account_type?t.res=!0:t.res=!1,"distributor"==t.profile.account_type?t.dis=!0:t.dis=!1,a.getSettings()}).then(function(e){t.settings=e.settings}).catch(function(e){console.log(e)})};s(),t.load()}else e.path("/login")}]),angular.module("billinguiApp").controller("SettingModalController",["$uibModalInstance","$scope","api","$stateParams",function(t,e,a,n){e.cancel=function(){console.log("Cancel Was clicked"),t.dismiss()},e.editSettingOK=function(){a.updateSetting(e.rec._id,e.rec).then(function(e){t.close()}).catch(function(e){t.dismiss(e)})}}]),angular.module("billinguiApp").controller("ApiSettingsController",["$scope","SweetAlert","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(t,a,n,e,o,i,r,c){if(n.isAuthed()){t.progressbar=c.createInstance(),t.progressbar.start(),console.log(t.progressbar),t.curTab="electricity",t.query="",t.page=1,t.limit=10,t.count=0;function s(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}t.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(s,250)},t.progressbar.complete(),updateApiSettingView=function(){n.getProfile().then(function(e){return t.profile=e,n.getApiSettings(t.page,t.curTab)}).then(function(e){t.apisettings=e.apisettings,t.count=e.count,t.page=e.page,t.limit=e.limit,t.load()})},t.apiSettingEdit=function(e){t.recid=e,n.getApiSetting(e).then(function(e){t.rec=e,t.rec.status="1"==t.rec.status,t.modal=i.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-edit-apisetting.html",controller:"UserListModalController",scope:t}),t.modal.result.then(function(e){r(function(){updateApiSettingView()})},function(){console.log("but i waz dizmizeddd")})})},t.editApiSettingOK=function(){t.rec.status=t.rec.status?"1":"0",n.updateApiSetting(t.rec._id,t.rec).then(function(e){t.modal.close(),a.swal({title:"Update Success!",text:"Api Setting has been updated!",type:"success",closeOnConfirm:!0},function(e){})}).catch(function(e){t.modal.dismiss(e)})},t.changePage=function(e){t.page=e,""==t.query&&updateApiSettingView()},t.selectTab=function(e){t.curTab!=e&&(t.count=0,t.curTab=e,t.changePage(1))},updateApiSettingView()}else e.path("/login")}]),angular.module("billinguiApp").controller("ModalCtrl",["$scope","api","$location","ngProgressFactory",function(t,e,a,n){e.isAuthed()?e.getProfile().then(function(e){t.profile=e}):a.path("/login")}]),angular.module("billinguiApp").controller("TransactionController",["$scope","$filter","api","$location","$stateParams","ngProgressFactory",function(i,e,r,t,c,a){if(r.isAuthed()){function n(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}i.load=function(){$("#account").addClass("open").next().slideDown(250),setTimeout(n,250),$("#trlist").css("active")},i.progressbar=a.createInstance(),console.log(i.progressbar),i.progressbar.start(),r.getProfile().then(function(e){i.profile=e,i.progressbar.complete()}),r.getTransactions(c.id,1).then(function(e){var t=[];if(c.transactions)t=c.transactions.split(",");i.progressbar.complete(),i.summary={},i.count=e.count,i.data1=[],i.data=e.docs;for(var a=0;a<i.data.length;a++)for(var n=0;n<t.length;n++)i.data[a]._id==t[n]&&i.data1.push(i.data[a]);for(a=0;a<i.data1.length;a++)if("deb"==i.data1[a].type){var o=i.data1[a].description.split("paid with");i.data1[a].description=o[0]}return i.page=1,i.limit=10,r.getAccounts()}).then(function(e){var t=[];e.accounts.forEach(function(e){t[e._id]=e.account_name}),i.account_names=t,i.account_names[i.profile.main_account]="Me",i.load()}).catch(function(e){console.log(e)})}else t.path("/login")}]),angular.module("billinguiApp").controller("SrController",["$scope","api","$location","$uibModal","$timeout","$stateParams","ngProgressFactory","localStorageService",function(f,m,e,t,a,n,o,i){if(m.isAuthed()){f.progressbar=o.createInstance(),console.log(f.progressbar),f.progressbar.start();function r(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}f.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(r,250),$("#sr").css("active")},f.SelectFile=function(e){f.SelectedFile=e},f.Upload=function(){var e=f.SelectedFile.name.toLowerCase(),t=e.substr(e.lastIndexOf(".")+1);if(/^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt|.xls|.xlsx)$/.test(f.SelectedFile.name.toLowerCase()))if("undefined"!=typeof FileReader){if("csv"==t){var a=new FileReader;a.onload=function(e){for(var t=f.list,a=f.date,n=0,o=e.target.result.split("\r\n"),i=o.length,r=(new Array,[]),c=o[0].split(","),s=0;s<i;s++){var l=o[s].split(","),u=0;if(l.length==c.length){for(var d=[],p=0;p<c.length;p++)"1"==t&&"SUCCESS"==l[8].trim()&&4==p&&(""==l[p]&&(u=1),Number(l[p])&&(d.push(l[p]),n+=parseInt(l[p]))),"2"==t&&"Fulfilled"==l[8].trim()&&3==p&&(""==l[p]&&(u=1),Number(l[p])&&(d.push(l[p]),n+=parseInt(l[p]))),"3"==t&&"1"==l[6].trim()&&2==p&&(""==l[p]&&(u=1),Number(l[p])&&(d.push(l[p]),n+=parseInt(l[p]))),"4"==t&&8==p&&(""==l[p]&&(u=1),Number(l[p])&&(d.push(l[p]),n+=parseInt(l[p])));if(1==u)break;r.push(d)}}console.log(n),m._post("/salesreport",{amount:n,ptype:t,date:a}).then(function(e){console.log(e)})},a.readAsText(f.SelectedFile)}if("xls"==t||"xlsx"==t){var n=new FileReader;if(n.readAsBinaryString)n.onload=function(e){f.ProcessExcel(e.target.result)},n.readAsBinaryString(f.SelectedFile);else{var o=new FileReader;o.onload=function(e){for(var t="",a=new Uint8Array(e.target.result),n=0;n<a.byteLength;n++)t+=String.fromCharCode(a[n]);f.ProcessExcel(t)},o.readAsArrayBuffer(f.SelectedFile)}}}else $window.alert("This browser does not support HTML5.");else $window.alert("Please upload a valid CSV file.")},f.ProcessExcel=function(e){for(var t=XLSX.read(e,{type:"binary"}),a=t.SheetNames[0],n=XLSX.utils.sheet_to_row_object_array(t.Sheets[a]),o=f.list,i=f.date,r=0,c=0;c<n.length;c++){var s=n[c],l=0;if("1"==o&&"SUCCESS"==s.vendStatus.trim()&&(""==s.vendStatus&&(l=1),Number(s.amount)&&(r+=parseInt(s.amount))),"2"==o&&"Fulfilled"==s.Status.trim()&&(console.log(s),""==s.Status&&(l=1),Number(s.Amount(NGN))&&(r+=parseInt(s.Amount(NGN)))),"3"==o&&"1"==s.status.trim()&&(""==s.status&&(l=1),Number(s.amount)&&(r+=parseInt(s.amount))),"4"==o&&(""==s.Amount&&(l=1),Number(s.Amount)&&(r+=parseInt(s.Amount))),1==l)break}console.log(r),m._post("/salesreport",{amount:r,ptype:o,date:i}).then(function(e){console.log(e)})},f.detailView=function(e){m._get("/salesreport/"+e).then(function(e){f.drec=e,f.viewSales=!1,f.viewDetail=!0})},f.popup1={opened:!1},f.open1=function(){f.popup1.opened=!0},f.displaybg=function(e,t){var a="background-color: forestgreen; color: white; padding:0px 5px 0px 5px;";return t<e&&(a="background-color:black; color: white; padding:0px 5px 0px 5px;"),e<t&&(a="background-color: brown; color: white; padding:0px 5px 0px 5px;"),a},f.countjson=function(e){return Object.keys(e).length},f.updateSalesView=function(){f.viewSales=!0,f.viewDetail=!1,m._get("/salesreport").then(function(e){f.salelist=e,f.progressbar.complete()})},f.updateSalesView()}else e.path("/login")}]),angular.module("billinguiApp").controller("SupportDashController",["$scope","api","$location","$stateParams","$uibModal","$timeout","ngProgressFactory",function(a,e,t,n,o,i,r){if(e.isAuthed()){a.progressbar=r.createInstance(),a.stats=[],a.stats.srate=[],a.stats.rtimes=[],a.stats.ltx=[],console.log(a.progressbar),a.progressbar.start();function c(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}a.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(c,250),$("#clinks").css("active")},a.progressbar.complete(),a.parseStats=function(e){e.forEach(function(e){if("ltx"==e.type){var t=[];e.values.forEach(function(e){t[e.key]=e.val}),a.stats[e.type]=t}else{t=[];e.values.forEach(function(e){t[e.key]=e.val}),a.stats[e.type][e.timedef]=t}})},a.updateStats=function(){e._get("/rtstats").then(function(e){a.parseStats(e)})},e.getProfile().then(function(e){a.profile=e}),a.load(),a.updateStats(),setInterval(a.updateStats,1e4)}else t.path("/login")}]),angular.module("billinguiApp").controller("SupportDashModalController",["$uibModalInstance","$scope","api","$stateParams","Upload",function(t,e,a,n,o){e.createLinkOK=function(){e.rate.active||(e.rate.active=!1),a._post("/commlinks",e.rate).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.editLinkOK=function(){a._put("/commlinks/"+e.recid,e.rate).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.deleteLinkOK=function(){a._delete("/commlinks/"+e.recid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidatePinOK=function(){a.invalidatePin(e.batchid,e.pinid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.invalidateBatchOK=function(){a.invalidateBatch(e.batchid).then(function(e){t.close()}).catch(function(e){t.dismiss()})},e.cancel=function(){t.dismiss()},e.newUserCancel=function(){t.dismiss()},e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0}}]),angular.module("billinguiApp").controller("FtconsoleController",["$scope","$interval","api","$location","$stateParams","$uibModal","ngProgressFactory","$rootScope","$window","SweetAlert","localStorageService",function(i,e,t,a,n,o,r,c,s,l,u){if(t.isAuthed()){function d(){page=$("#page-container"),pageContent=$("#page-content"),header=$("header"),footer=$("#page-content + footer"),sidebar=$("#sidebar"),sidebarAlt=$("#sidebar-alt"),sScroll=$(".sidebar-scroll");var e=$(window).height(),t=sidebar.outerHeight(),a=sidebarAlt.outerHeight(),n=header.outerHeight(),o=footer.outerHeight();header.hasClass("navbar-fixed-top")||header.hasClass("navbar-fixed-bottom")||t<e&&a<e?page.hasClass("footer-fixed")?pageContent.css("min-height",e-n+"px"):pageContent.css("min-height",e-(n+o)+"px"):page.hasClass("footer-fixed")?pageContent.css("min-height",(a<t?t:a)-n+"px"):pageContent.css("min-height",(a<t?t:a)-(n+o)+"px")}i.localTimezone="",i.applied=!1,i.data=[],i.load=function(){$("#pinHead").addClass("open").next().slideDown(250),setTimeout(d,250),$("#tolist").css("active")},i.loadData=function(){t._get("/ftreplist").then(function(e){i.data=e.transactions,i.progressbar.complete()})},t.getProfile().then(function(e){return i.profile=e,i.progressbar=r.createInstance(),i.progressbar.start(),i.filtered=!1,i.filterBase="",i.summary={},i.filter={date_from:"",time_from:"",date_to:"",time_to:"",timezone:"",account:"all",customer_reference:"",operator_reference:"",success:"",code:"",product_id:"",target:"",country:"",operator_name:"",channel:"",vnd_sim:"",api_transactionid:"",currency:"",wholesaler:"",tag:"",type:""},u.get("acnames")}).then(function(e){var t=[];i.onlyAgent=[],i.onlyWholesaler=[];for(var a=0;a<e.length;a++){var n=e[a];t[n._id]=n.account_name}return i.account_names=t,i.accounts=e,u.get("clist")}).then(function(e){return i.countries=e,i.load(),i.page=1,i.loadData(),i.localTimezone=i.filter.timezone,i.currencies=[],u.get("currencies")}).then(function(e){for(var t=0;t<e.length;t++){for(var a=0;a<i.currencies.length;a++){var n=0;if(i.currencies[a].symbol==e[t].symbol){n=1;break}}if(1!=n){var o={};o.symbol=e[t].symbol,i.currencies.push(o)}}return!1}).then(function(e){i.operators=[]}).catch(function(e){console.log(e)});i.live_stream=!1;i.popup1={opened:!1},i.popup2={opened:!1},i.canAct=!0,i.open1=function(){i.popup1.opened=!0},i.open2=function(){i.popup2.opened=!0},i.showLog=function(e){i.recid=e,t._get("/ftview/"+e).then(function(e){i.rec=e,i.modal=o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/partials/modal-view-log.html",controller:"AccountsModalController",scope:i}),i.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")})})},i.replayTx=function(e){i.canAct&&(i.canAct=!1,i.progressbar.start(),t._get("/ftreplay/"+e).then(function(e){i.rec=e,i.progressbar.complete(),l.swal({title:"Good Job!",text:"We have successfully reposted transaction!",type:"success",closeOnConfirm:!0},function(e){e&&(i.canAct=!0,i.loadData(),$uibModalInstance.dismiss())})}).catch(function(e){i.progressbar.complete(),i.canAct=!0,l.swal("Could not replay Transaction!","Sorry, Looks like failed again","error")}),$uibModalInstance.dismiss(),i.modal.result.then(function(e){},function(){console.log("but i waz dizmizeddd")}))}}else a.path("/login")}]);